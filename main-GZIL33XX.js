var xS=Object.defineProperty,PS=Object.defineProperties;var OS=Object.getOwnPropertyDescriptors;var ec=Object.getOwnPropertySymbols,kS=Object.getPrototypeOf,xy=Object.prototype.hasOwnProperty,Py=Object.prototype.propertyIsEnumerable,FS=Reflect.get;var Ry=(t,e,n)=>e in t?xS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E=(t,e)=>{for(var n in e||={})xy.call(e,n)&&Ry(t,n,e[n]);if(ec)for(var n of ec(e))Py.call(e,n)&&Ry(t,n,e[n]);return t},q=(t,e)=>PS(t,OS(e));var Oy=(t,e)=>{var n={};for(var r in t)xy.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ec)for(var r of ec(t))e.indexOf(r)<0&&Py.call(t,r)&&(n[r]=t[r]);return n};var br=(t,e,n)=>FS(kS(t),n,e);var m=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});function ky(t,e){return Object.is(t,e)}var be=null,tc=!1,nc=1,Ln=Symbol("SIGNAL");function K(t){let e=be;return be=t,e}function Fy(){return be}var rs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sf(t){if(tc)throw new Error("");if(be===null)return;be.consumerOnSignalRead(t);let e=be.nextProducerIndex++;if(sc(be),e<be.producerNode.length&&be.producerNode[e]!==t&&ns(be)){let n=be.producerNode[e];oc(n,be.producerIndexOfThis[e])}be.producerNode[e]!==t&&(be.producerNode[e]=t,be.producerIndexOfThis[e]=ns(be)?Uy(t,be,e):0),be.producerLastReadVersion[e]=t.version}function LS(){nc++}function Ly(t){if(!(ns(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===nc)){if(!t.producerMustRecompute(t)&&!cf(t)){t.dirty=!1,t.lastCleanEpoch=nc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=nc}}function Vy(t){if(t.liveConsumerNode===void 0)return;let e=tc;tc=!0;try{for(let n of t.liveConsumerNode)n.dirty||VS(n)}finally{tc=e}}function jy(){return be?.consumerAllowSignalWrites!==!1}function VS(t){t.dirty=!0,Vy(t),t.consumerMarkedDirty?.(t)}function ic(t){return t&&(t.nextProducerIndex=0),K(t)}function af(t,e){if(K(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ns(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)oc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function cf(t){sc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Ly(n),r!==n.version))return!0}return!1}function lf(t){if(sc(t),ns(t))for(let e=0;e<t.producerNode.length;e++)oc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Uy(t,e,n){if(By(t),t.liveConsumerNode.length===0&&$y(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Uy(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function oc(t,e){if(By(t),t.liveConsumerNode.length===1&&$y(t))for(let r=0;r<t.producerNode.length;r++)oc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];sc(i),i.producerIndexOfThis[r]=e}}function ns(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function sc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function By(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function $y(t){return t.producerNode!==void 0}function Hy(t){let e=Object.create(jS);e.computation=t;let n=()=>{if(Ly(e),sf(e),e.value===rc)throw e.error;return e.value};return n[Ln]=e,n}var rf=Symbol("UNSET"),of=Symbol("COMPUTING"),rc=Symbol("ERRORED"),jS=q(E({},rs),{value:rf,dirty:!0,error:null,equal:ky,producerMustRecompute(t){return t.value===rf||t.value===of},producerRecomputeValue(t){if(t.value===of)throw new Error("Detected cycle in computations.");let e=t.value;t.value=of;let n=ic(t),r;try{r=t.computation()}catch(i){r=rc,t.error=i}finally{af(t,n)}if(e!==rf&&e!==rc&&r!==rc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function US(){throw new Error}var Wy=US;function zy(){Wy()}function Gy(t){Wy=t}var BS=null;function qy(t){let e=Object.create(Ky);e.value=t;let n=()=>(sf(e),e.value);return n[Ln]=e,n}function uf(t,e){jy()||zy(),t.equal(t.value,e)||(t.value=e,$S(t))}function Yy(t,e){jy()||zy(),uf(t,e(t.value))}var Ky=q(E({},rs),{equal:ky,value:void 0});function $S(t){t.version++,LS(),Vy(t),BS?.()}function F(t){return typeof t=="function"}function Ei(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ac=Ei(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Tr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var me=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(o){e=o instanceof ac?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Zy(o)}catch(s){e=e??[],s instanceof ac?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ac(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Zy(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Tr(n,e)}remove(e){let{_finalizers:n}=this;n&&Tr(n,e),e instanceof t&&e._removeParent(this)}};me.EMPTY=(()=>{let t=new me;return t.closed=!0,t})();var df=me.EMPTY;function cc(t){return t instanceof me||t&&"closed"in t&&F(t.remove)&&F(t.add)&&F(t.unsubscribe)}function Zy(t){F(t)?t():t.unsubscribe()}var Mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wi={setTimeout(t,e,...n){let{delegate:r}=wi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=wi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function lc(t){wi.setTimeout(()=>{let{onUnhandledError:e}=Mt;if(e)e(t);else throw t})}function Sr(){}var Qy=ff("C",void 0,void 0);function Jy(t){return ff("E",void 0,t)}function Xy(t){return ff("N",t,void 0)}function ff(t,e,n){return{kind:t,value:e,error:n}}var Ar=null;function Ci(t){if(Mt.useDeprecatedSynchronousErrorHandling){let e=!Ar;if(e&&(Ar={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ar;if(Ar=null,n)throw r}}else t()}function e_(t){Mt.useDeprecatedSynchronousErrorHandling&&Ar&&(Ar.errorThrown=!0,Ar.error=t)}var Mr=class extends me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cc(e)&&e.add(this)):this.destination=zS}static create(e,n,r){return new Di(e,n,r)}next(e){this.isStopped?pf(Xy(e),this):this._next(e)}error(e){this.isStopped?pf(Jy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pf(Qy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},HS=Function.prototype.bind;function hf(t,e){return HS.call(t,e)}var mf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){uc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){uc(r)}else uc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){uc(n)}}},Di=class extends Mr{constructor(e,n,r){super();let i;if(F(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Mt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hf(e.next,o),error:e.error&&hf(e.error,o),complete:e.complete&&hf(e.complete,o)}):i=e}this.destination=new mf(i)}};function uc(t){Mt.useDeprecatedSynchronousErrorHandling?e_(t):lc(t)}function WS(t){throw t}function pf(t,e){let{onStoppedNotification:n}=Mt;n&&wi.setTimeout(()=>n(t,e))}var zS={closed:!0,next:Sr,error:WS,complete:Sr};var bi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function We(t){return t}function gf(...t){return vf(t)}function vf(t){return t.length===0?We:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var L=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=qS(n)?n:new Di(n,r,i);return Ci(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=t_(r),new r((i,o)=>{let s=new Di({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[bi](){return this}pipe(...n){return vf(n)(this)}toPromise(n){return n=t_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function t_(t){var e;return(e=t??Mt.Promise)!==null&&e!==void 0?e:Promise}function GS(t){return t&&F(t.next)&&F(t.error)&&F(t.complete)}function qS(t){return t&&t instanceof Mr||GS(t)&&cc(t)}function yf(t){return F(t?.lift)}function $(t){return e=>{if(yf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function U(t,e,n,r,i){return new _f(t,e,n,r,i)}var _f=class extends Mr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ti(){return $((t,e)=>{let n=null;t._refCount++;let r=U(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Si=class extends L{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,yf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new me;let n=this.getSubject();e.add(this.source.subscribe(U(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=me.EMPTY)}return e}refCount(){return Ti()(this)}};var n_=Ei(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class t extends L{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new dc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new n_}next(n){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?df:(this.currentObservers=null,o.push(n),new me(()=>{this.currentObservers=null,Tr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new L;return n.source=this,n}}return t.create=(e,n)=>new dc(e,n),t})(),dc=class extends Me{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:df}};var ke=class extends Me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var If={now(){return(If.delegate||Date).now()},delegate:void 0};var fc=class extends me{constructor(e,n){super()}schedule(e,n=0){return this}};var is={setInterval(t,e,...n){let{delegate:r}=is;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=is;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ai=class extends fc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return is.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&is.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Tr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Mi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Mi.now=If.now;var Ni=class extends Mi{constructor(e,n=Mi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ri=new Ni(Ai),Ef=Ri;var hc=class extends Ai{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var pc=class extends Ni{};var wf=new pc(hc);var ze=new L(t=>t.complete());function mc(t){return t&&F(t.schedule)}function Cf(t){return t[t.length-1]}function gc(t){return F(Cf(t))?t.pop():void 0}function Yt(t){return mc(Cf(t))?t.pop():void 0}function r_(t,e){return typeof Cf(t)=="number"?t.pop():e}function vc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function o_(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function i_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nr(t){return this instanceof Nr?(this.v=t,this):new Nr(t)}function s_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(D){return new Promise(function(M,k){o.push([h,D,M,k])>1||c(h,D)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(D){f(o[0][3],D)}}function l(h){h.value instanceof Nr?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function a_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof i_=="function"?i_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var yc=t=>t&&typeof t.length=="number"&&typeof t!="function";function _c(t){return F(t?.then)}function Ic(t){return F(t[bi])}function Ec(t){return Symbol.asyncIterator&&F(t?.[Symbol.asyncIterator])}function wc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cc=YS();function Dc(t){return F(t?.[Cc])}function bc(t){return s_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Nr(n.read());if(i)return yield Nr(void 0);yield yield Nr(r)}}finally{n.releaseLock()}})}function Tc(t){return F(t?.getReader)}function fe(t){if(t instanceof L)return t;if(t!=null){if(Ic(t))return KS(t);if(yc(t))return ZS(t);if(_c(t))return QS(t);if(Ec(t))return c_(t);if(Dc(t))return JS(t);if(Tc(t))return XS(t)}throw wc(t)}function KS(t){return new L(e=>{let n=t[bi]();if(F(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZS(t){return new L(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function QS(t){return new L(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,lc)})}function JS(t){return new L(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function c_(t){return new L(e=>{eA(t,e).catch(n=>e.error(n))})}function XS(t){return c_(bc(t))}function eA(t,e){var n,r,i,o;return o_(this,void 0,void 0,function*(){try{for(n=a_(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Je(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Vn(t,e=0){return $((n,r)=>{n.subscribe(U(r,i=>Je(r,t,()=>r.next(i),e),()=>Je(r,t,()=>r.complete(),e),i=>Je(r,t,()=>r.error(i),e)))})}function jn(t,e=0){return $((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function l_(t,e){return fe(t).pipe(jn(e),Vn(e))}function u_(t,e){return fe(t).pipe(jn(e),Vn(e))}function d_(t,e){return new L(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function f_(t,e){return new L(n=>{let r;return Je(n,e,()=>{r=t[Cc](),Je(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function Sc(t,e){if(!t)throw new Error("Iterable cannot be null");return new L(n=>{Je(n,e,()=>{let r=t[Symbol.asyncIterator]();Je(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function h_(t,e){return Sc(bc(t),e)}function p_(t,e){if(t!=null){if(Ic(t))return l_(t,e);if(yc(t))return d_(t,e);if(_c(t))return u_(t,e);if(Ec(t))return Sc(t,e);if(Dc(t))return f_(t,e);if(Tc(t))return h_(t,e)}throw wc(t)}function oe(t,e){return e?p_(t,e):fe(t)}function N(...t){let e=Yt(t);return oe(t,e)}function xi(t,e){let n=F(t)?t:()=>t,r=i=>i.error(n());return new L(e?i=>e.schedule(r,0,i):r)}function Df(t){return!!t&&(t instanceof L||F(t.lift)&&F(t.subscribe))}var gn=Ei(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function m_(t){return t instanceof Date&&!isNaN(t)}function x(t,e){return $((n,r)=>{let i=0;n.subscribe(U(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:tA}=Array;function nA(t,e){return tA(e)?t(...e):t(e)}function Ac(t){return x(e=>nA(t,e))}var{isArray:rA}=Array,{getPrototypeOf:iA,prototype:oA,keys:sA}=Object;function Mc(t){if(t.length===1){let e=t[0];if(rA(e))return{args:e,keys:null};if(aA(e)){let n=sA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function aA(t){return t&&typeof t=="object"&&iA(t)===oA}function Nc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Rc(...t){let e=Yt(t),n=gc(t),{args:r,keys:i}=Mc(t);if(r.length===0)return oe([],e);let o=new L(cA(r,e,i?s=>Nc(i,s):We));return n?o.pipe(Ac(n)):o}function cA(t,e,n=We){return r=>{g_(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)g_(e,()=>{let l=oe(t[c],e),u=!1;l.subscribe(U(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function g_(t,e,n){t?Je(n,t,e):e()}function v_(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=D=>l<r?p(D):c.push(D),p=D=>{o&&e.next(D),l++;let M=!1;fe(n(D,u++)).subscribe(U(e,k=>{i?.(k),o?h(k):e.next(k)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;c.length&&l<r;){let k=c.shift();s?Je(e,s,()=>p(k)):p(k)}f()}catch(k){e.error(k)}}))};return t.subscribe(U(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Ie(t,e,n=1/0){return F(e)?Ie((r,i)=>x((o,s)=>e(r,o,i,s))(fe(t(r,i))),n):(typeof e=="number"&&(n=e),$((r,i)=>v_(r,i,t,n)))}function os(t=1/0){return Ie(We,t)}function y_(){return os(1)}function Un(...t){return y_()(oe(t,Yt(t)))}function xc(t){return new L(e=>{fe(t()).subscribe(e)})}function bf(...t){let e=gc(t),{args:n,keys:r}=Mc(t),i=new L(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;fe(n[u]).subscribe(U(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Nc(r,a):a),o.complete())}))}});return e?i.pipe(Ac(e)):i}function __(t=0,e,n=Ef){let r=-1;return e!=null&&(mc(e)?n=e:r=e),new L(i=>{let o=m_(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Tf(...t){let e=Yt(t),n=r_(t,1/0),r=t;return r.length?r.length===1?fe(r[0]):os(n)(oe(r,e)):ze}function pt(t,e){return $((n,r)=>{let i=0;n.subscribe(U(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Xe(t){return $((e,n)=>{let r=null,i=!1,o;r=e.subscribe(U(n,void 0,void 0,s=>{o=fe(t(s,Xe(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function I_(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(U(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Rr(t,e){return F(e)?Ie(t,e,1):Ie(t,1)}function Bn(t){return $((e,n)=>{let r=!1;e.subscribe(U(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function mt(t){return t<=0?()=>ze:$((e,n)=>{let r=0;e.subscribe(U(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function E_(){return $((t,e)=>{t.subscribe(U(e,Sr))})}function ss(t){return x(()=>t)}function Sf(t,e){return e?n=>Un(e.pipe(mt(1),E_()),n.pipe(Sf(t))):Ie((n,r)=>fe(t(n,r)).pipe(mt(1),ss(n)))}function Af(t,e=Ri){let n=__(t,e);return Sf(()=>n)}function Mf(t,e=We){return t=t??lA,$((n,r)=>{let i,o=!0;n.subscribe(U(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function lA(t,e){return t===e}function Pc(t=uA){return $((e,n)=>{let r=!1;e.subscribe(U(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function uA(){return new gn}function Pi(t){return $((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Nt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):We,mt(1),n?Bn(e):Pc(()=>new gn))}function Oi(t){return t<=0?()=>ze:$((e,n)=>{let r=[];e.subscribe(U(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Nf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):We,Oi(1),n?Bn(e):Pc(()=>new gn))}function as(t,e){return $(I_(t,e,arguments.length>=2,!0))}function Rf(...t){let e=Yt(t);return $((n,r)=>{(e?Un(t,n,e):Un(t,n)).subscribe(r)})}function Fe(t,e){return $((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(U(r,c=>{i?.unsubscribe();let l=0,u=o++;fe(t(c,u)).subscribe(i=U(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function xf(t){return $((e,n)=>{fe(t).subscribe(U(n,()=>n.complete(),Sr)),!n.closed&&e.subscribe(n)})}function Ee(t,e,n){let r=F(t)||e||n?{next:t,error:e,complete:n}:t;return r?$((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(U(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):We}var lI="https://g.co/ng/security#xss",S=class extends Error{constructor(e,n){super(Il(e,n)),this.code=e}};function Il(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function _s(t){return{toString:t}.toString()}var Oc="__parameters__";function dA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function uI(t,e,n){return _s(()=>{let r=dA(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Oc)?c[Oc]:Object.defineProperty(c,Oc,{value:[]})[Oc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Yf=globalThis;function ae(t){for(let e in t)if(t[e]===ae)return e;throw Error("Could not find renamed property on target object.")}function fA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function qe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(qe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function w_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var hA=ae({__forward_ref__:ae});function En(t){return t.__forward_ref__=En,t.toString=function(){return qe(this())},t}function Ge(t){return dI(t)?t():t}function dI(t){return typeof t=="function"&&t.hasOwnProperty(hA)&&t.__forward_ref__===En}function A(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Kn(t){return{providers:t.providers||[],imports:t.imports||[]}}function El(t){return C_(t,hI)||C_(t,pI)}function fI(t){return El(t)!==null}function C_(t,e){return t.hasOwnProperty(e)?t[e]:null}function pA(t){let e=t&&(t[hI]||t[pI]);return e||null}function D_(t){return t&&(t.hasOwnProperty(b_)||t.hasOwnProperty(mA))?t[b_]:null}var hI=ae({\u0275prov:ae}),b_=ae({\u0275inj:ae}),pI=ae({ngInjectableDef:ae}),mA=ae({ngInjectorDef:ae}),T=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=A({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mI(t){return t&&!!t.\u0275providers}var gA=ae({\u0275cmp:ae}),vA=ae({\u0275dir:ae}),yA=ae({\u0275pipe:ae}),_A=ae({\u0275mod:ae}),qc=ae({\u0275fac:ae}),us=ae({__NG_ELEMENT_ID__:ae}),T_=ae({__NG_ENV_ID__:ae});function wl(t){return typeof t=="string"?t:t==null?"":String(t)}function IA(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():wl(t)}function EA(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new S(-200,t)}function Lh(t,e){throw new S(-201,!1)}var B=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(B||{}),Kf;function gI(){return Kf}function gt(t){let e=Kf;return Kf=t,e}function vI(t,e,n){let r=El(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&B.Optional)return null;if(e!==void 0)return e;Lh(t,"Injector")}var wA={},ds=wA,Zf="__NG_DI_FLAG__",Yc="ngTempTokenPath",CA="ngTokenPath",DA=/\n/gm,bA="\u0275",S_="__source",Vi;function TA(){return Vi}function $n(t){let e=Vi;return Vi=t,e}function SA(t,e=B.Default){if(Vi===void 0)throw new S(-203,!1);return Vi===null?vI(t,void 0,e):Vi.get(t,e&B.Optional?null:void 0,e)}function O(t,e=B.Default){return(gI()||SA)(Ge(t),e)}function _(t,e=B.Default){return O(t,Cl(e))}function Cl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Qf(t){let e=[];for(let n=0;n<t.length;n++){let r=Ge(t[n]);if(Array.isArray(r)){if(r.length===0)throw new S(900,!1);let i,o=B.Default;for(let s=0;s<r.length;s++){let a=r[s],c=AA(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function yI(t,e){return t[Zf]=e,t.prototype[Zf]=e,t}function AA(t){return t[Zf]}function MA(t,e,n,r){let i=t[Yc];throw e[S_]&&i.unshift(e[S_]),t.message=NA(`
`+t.message,i,n,r),t[CA]=i,t[Yc]=null,t}function NA(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==bA?t.slice(2):t;let i=qe(e);if(Array.isArray(e))i=e.map(qe).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):qe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(DA,`
  `)}`}var Ke=yI(uI("Optional"),8);var _I=yI(uI("SkipSelf"),4);function Ui(t,e){let n=t.hasOwnProperty(qc);return n?t[qc]:null}function Vh(t,e){t.forEach(n=>Array.isArray(n)?Vh(n,e):e(n))}function II(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function RA(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function xA(t,e,n){let r=Is(t,e);return r>=0?t[r|1]=n:(r=~r,RA(t,r,e,n)),r}function Pf(t,e){let n=Is(t,e);if(n>=0)return t[n|1]}function Is(t,e){return PA(t,e,1)}function PA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Bi={},it=[],Pr=new T(""),EI=new T("",-1),wI=new T(""),Zc=class{get(e,n=ds){if(n===ds){let r=new Error(`NullInjectorError: No provider for ${qe(e)}!`);throw r.name="NullInjectorError",r}return n}},CI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(CI||{}),Qt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Qt||{}),Wn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Wn||{});function OA(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Jf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];kA(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function DI(t){return t===3||t===4||t===6}function kA(t){return t.charCodeAt(0)===64}function fs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?A_(t,n,i,null,e[++r]):A_(t,n,i,null,null))}}return t}function A_(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var bI="ng-template";function FA(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&OA(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(jh(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function jh(t){return t.type===4&&t.value!==bI}function LA(t,e,n){let r=t.type===4&&!n?bI:t.value;return e===r}function VA(t,e,n){let r=4,i=t.attrs,o=i!==null?BA(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Rt(r)&&!Rt(c))return!1;if(s&&Rt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!LA(t,c,n)||c===""&&e.length===1){if(Rt(r))return!1;s=!0}}else if(r&8){if(i===null||!FA(t,i,c,n)){if(Rt(r))return!1;s=!0}}else{let l=e[++a],u=jA(c,i,jh(t),n);if(u===-1){if(Rt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Rt(r))return!1;s=!0}}}}return Rt(r)||s}function Rt(t){return(t&1)===0}function jA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return $A(e,t)}function UA(t,e,n=!1){for(let r=0;r<e.length;r++)if(VA(t,e[r],n))return!0;return!1}function BA(t){for(let e=0;e<t.length;e++){let n=t[e];if(DI(n))return e}return t.length}function $A(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function M_(t,e){return t?":not("+e.trim()+")":e}function HA(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Rt(s)&&(e+=M_(o,i),i=""),r=s,o=o||!Rt(r);n++}return i!==""&&(e+=M_(o,i)),e}function WA(t){return t.map(HA).join(",")}function zA(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Rt(i))break;i=o}r++}return{attrs:e,classes:n}}function X(t){return _s(()=>{let e=NI(t),n=q(E({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===CI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Qt.Emulated,styles:t.styles||it,_:null,schemas:t.schemas||null,tView:null,id:""});RI(n);let r=t.dependencies;return n.directiveDefs=R_(r,!1),n.pipeDefs=R_(r,!0),n.id=YA(n),n})}function GA(t){return Or(t)||TI(t)}function qA(t){return t!==null}function Zn(t){return _s(()=>({type:t.type,bootstrap:t.bootstrap||it,declarations:t.declarations||it,imports:t.imports||it,exports:t.exports||it,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function N_(t,e){if(t==null)return Bi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Wn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Wn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function he(t){return _s(()=>{let e=NI(t);return RI(e),e})}function Or(t){return t[gA]||null}function TI(t){return t[vA]||null}function SI(t){return t[yA]||null}function AI(t){let e=Or(t)||TI(t)||SI(t);return e!==null?e.standalone:!1}function MI(t,e){let n=t[_A]||null;if(!n&&e===!0)throw new Error(`Type ${qe(t)} does not have '\u0275mod' property.`);return n}function NI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Bi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||it,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:N_(t.inputs,e),outputs:N_(t.outputs),debugInfo:null}}function RI(t){t.features?.forEach(e=>e(t))}function R_(t,e){if(!t)return null;let n=e?SI:GA;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(qA)}function YA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function at(t){return{\u0275providers:t}}function KA(...t){return{\u0275providers:xI(!0,t),\u0275fromNgModule:!0}}function xI(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Vh(e,s=>{let a=s;Xf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&PI(i,o),n}function PI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Uh(i,o=>{e(o,r)})}}function Xf(t,e,n,r){if(t=Ge(t),!t)return!1;let i=null,o=D_(t),s=!o&&Or(t);if(!o&&!s){let c=t.ngModule;if(o=D_(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Xf(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Vh(o.imports,u=>{Xf(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&PI(l,e)}if(!a){let l=Ui(i)||(()=>new i);e({provide:i,useFactory:l,deps:it},i),e({provide:wI,useValue:i,multi:!0},i),e({provide:Pr,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Uh(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Uh(t,e){for(let n of t)mI(n)&&(n=n.\u0275providers),Array.isArray(n)?Uh(n,e):e(n)}var ZA=ae({provide:String,useValue:ae});function OI(t){return t!==null&&typeof t=="object"&&ZA in t}function QA(t){return!!(t&&t.useExisting)}function JA(t){return!!(t&&t.useFactory)}function $i(t){return typeof t=="function"}function XA(t){return!!t.useClass}var Dl=new T(""),$c={},eM={},Of;function Bh(){return Of===void 0&&(Of=new Zc),Of}var yt=class{},hs=class extends yt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,th(e,s=>this.processProvider(s)),this.records.set(EI,ki(void 0,this)),i.has("environment")&&this.records.set(yt,ki(void 0,this));let o=this.records.get(Dl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wI,it,B.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=K(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),K(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=$n(this),r=gt(void 0),i;try{return e()}finally{$n(n),gt(r)}}get(e,n=ds,r=B.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(T_))return e[T_](this);r=Cl(r);let i,o=$n(this),s=gt(void 0);try{if(!(r&B.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=oM(e)&&El(e);l&&this.injectableDefInScope(l)?c=ki(eh(e),$c):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&B.Self?Bh():this.parent;return n=r&B.Optional&&n===ds?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Yc]=a[Yc]||[]).unshift(qe(e)),o)throw a;return MA(a,e,"R3InjectorError",this.source)}else throw a}finally{gt(s),$n(o)}}resolveInjectorInitializers(){let e=K(null),n=$n(this),r=gt(void 0),i;try{let o=this.get(Pr,it,B.Self);for(let s of o)s()}finally{$n(n),gt(r),K(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(qe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){e=Ge(e);let n=$i(e)?e:Ge(e&&e.provide),r=nM(e);if(!$i(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ki(void 0,$c,!0),i.factory=()=>Qf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=K(null);try{return n.value===$c&&(n.value=eM,n.value=n.factory()),typeof n.value=="object"&&n.value&&iM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{K(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ge(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function eh(t){let e=El(t),n=e!==null?e.factory:Ui(t);if(n!==null)return n;if(t instanceof T)throw new S(204,!1);if(t instanceof Function)return tM(t);throw new S(204,!1)}function tM(t){if(t.length>0)throw new S(204,!1);let n=pA(t);return n!==null?()=>n.factory(t):()=>new t}function nM(t){if(OI(t))return ki(void 0,t.useValue);{let e=kI(t);return ki(e,$c)}}function kI(t,e,n){let r;if($i(t)){let i=Ge(t);return Ui(i)||eh(i)}else if(OI(t))r=()=>Ge(t.useValue);else if(JA(t))r=()=>t.useFactory(...Qf(t.deps||[]));else if(QA(t))r=()=>O(Ge(t.useExisting));else{let i=Ge(t&&(t.useClass||t.provide));if(rM(t))r=()=>new i(...Qf(t.deps));else return Ui(i)||eh(i)}return r}function ki(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function rM(t){return!!t.deps}function iM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function oM(t){return typeof t=="function"||typeof t=="object"&&t instanceof T}function th(t,e){for(let n of t)Array.isArray(n)?th(n,e):n&&mI(n)?th(n.\u0275providers,e):e(n)}function en(t,e){t instanceof hs&&t.assertNotDestroyed();let n,r=$n(t),i=gt(void 0);try{return e()}finally{$n(r),gt(i)}}function sM(){return gI()!==void 0||TA()!=null}function aM(t){return typeof t=="function"}var st=0,H=1,P=2,je=3,xt=4,Ft=5,Jt=6,Qc=7,Ot=8,Hi=9,Xt=10,ge=11,ps=12,x_=13,Ji=14,_t=15,Wi=16,Fi=17,zi=18,bl=19,FI=20,Hn=21,kf=22,vt=23,Ye=25,LI=1,ms=6,vn=7,Jc=8,Xc=9,ot=10,el=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(el||{});function Pt(t){return Array.isArray(t)&&typeof t[LI]=="object"}function tn(t){return Array.isArray(t)&&t[LI]===!0}function $h(t){return(t.flags&4)!==0}function Es(t){return t.componentOffset>-1}function Tl(t){return(t.flags&1)===1}function zn(t){return!!t.template}function tl(t){return(t[P]&512)!==0}var nh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function VI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Qn(){return jI}function jI(t){return t.type.prototype.ngOnChanges&&(t.setInput=lM),cM}Qn.ngInherit=!0;function cM(){let t=BI(this),e=t?.current;if(e){let n=t.previous;if(n===Bi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function lM(t,e,n,r,i){let o=this.declaredInputs[r],s=BI(t)||uM(t,{previous:Bi,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new nh(l&&l.currentValue,n,c===Bi),VI(t,e,i,n)}var UI="__ngSimpleChanges__";function BI(t){return t[UI]||null}function uM(t,e){return t[UI]=e}var P_=null;var Kt=function(t,e,n){P_?.(t,e,n)},dM="svg",fM="math";function kt(t){for(;Array.isArray(t);)t=t[st];return t}function $I(t,e){return kt(e[t])}function ct(t,e){return kt(e[t.index])}function HI(t,e){return t.data[e]}function Jn(t,e){let n=e[t];return Pt(n)?n:n[st]}function Hh(t){return(t[P]&128)===128}function hM(t){return tn(t[je])}function Gi(t,e){return e==null?null:t[e]}function WI(t){t[Fi]=0}function zI(t){t[P]&1024||(t[P]|=1024,Hh(t)&&Al(t))}function pM(t,e){for(;t>0;)e=e[Ji],t--;return e}function Sl(t){return!!(t[P]&9216||t[vt]?.dirty)}function rh(t){t[Xt].changeDetectionScheduler?.notify(8),t[P]&64&&(t[P]|=1024),Sl(t)&&Al(t)}function Al(t){t[Xt].changeDetectionScheduler?.notify(0);let e=kr(t);for(;e!==null&&!(e[P]&8192||(e[P]|=8192,!Hh(e)));)e=kr(e)}function GI(t,e){if((t[P]&256)===256)throw new S(911,!1);t[Hn]===null&&(t[Hn]=[]),t[Hn].push(e)}function mM(t,e){if(t[Hn]===null)return;let n=t[Hn].indexOf(e);n!==-1&&t[Hn].splice(n,1)}function kr(t){let e=t[je];return tn(e)?e[je]:e}var W={lFrame:tE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qI=!1;function gM(){return W.lFrame.elementDepthCount}function vM(){W.lFrame.elementDepthCount++}function yM(){W.lFrame.elementDepthCount--}function YI(){return W.bindingsEnabled}function ws(){return W.skipHydrationRootTNode!==null}function _M(t){return W.skipHydrationRootTNode===t}function IM(t){W.skipHydrationRootTNode=t}function EM(){W.skipHydrationRootTNode=null}function ce(){return W.lFrame.lView}function lt(){return W.lFrame.tView}function It(t){return W.lFrame.contextLView=t,t[Ot]}function Et(t){return W.lFrame.contextLView=null,t}function Ze(){let t=KI();for(;t!==null&&t.type===64;)t=t.parent;return t}function KI(){return W.lFrame.currentTNode}function wM(){let t=W.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ur(t,e){let n=W.lFrame;n.currentTNode=t,n.isParent=e}function Wh(){return W.lFrame.isParent}function ZI(){W.lFrame.isParent=!1}function QI(){return qI}function O_(t){qI=t}function zh(){let t=W.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function CM(t){return W.lFrame.bindingIndex=t}function Gh(){return W.lFrame.bindingIndex++}function DM(t){let e=W.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function bM(){return W.lFrame.inI18n}function TM(t,e){let n=W.lFrame;n.bindingIndex=n.bindingRootIndex=t,ih(e)}function SM(){return W.lFrame.currentDirectiveIndex}function ih(t){W.lFrame.currentDirectiveIndex=t}function AM(t){let e=W.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function JI(t){W.lFrame.currentQueryIndex=t}function MM(t){let e=t[H];return e.type===2?e.declTNode:e.type===1?t[Ft]:null}function XI(t,e,n){if(n&B.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&B.Host);)if(i=MM(o),i===null||(o=o[Ji],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=W.lFrame=eE();return r.currentTNode=e,r.lView=t,!0}function qh(t){let e=eE(),n=t[H];W.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function eE(){let t=W.lFrame,e=t===null?null:t.child;return e===null?tE(t):e}function tE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function nE(){let t=W.lFrame;return W.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var rE=nE;function Yh(){let t=nE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function NM(t){return(W.lFrame.contextLView=pM(t,W.lFrame.contextLView))[Ot]}function Xi(){return W.lFrame.selectedIndex}function Fr(t){W.lFrame.selectedIndex=t}function iE(){let t=W.lFrame;return HI(t.tView,t.selectedIndex)}function oE(){return W.lFrame.currentNamespace}var sE=!0;function Ml(){return sE}function Xn(t){sE=t}function RM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=jI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Nl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Hc(t,e,n){aE(t,e,3,n)}function Wc(t,e,n,r){(t[P]&3)===n&&aE(t,e,n,r)}function Ff(t,e){let n=t[P];(n&3)===e&&(n&=16383,n+=1,t[P]=n)}function aE(t,e,n,r){let i=r!==void 0?t[Fi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Fi]+=65536),(a<o||o==-1)&&(xM(t,n,e,c),t[Fi]=(t[Fi]&4294901760)+c+2),c++}function k_(t,e){Kt(4,t,e);let n=K(null);try{e.call(t)}finally{K(n),Kt(5,t,e)}}function xM(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[P]>>14<t[Fi]>>16&&(t[P]&3)===e&&(t[P]+=16384,k_(a,o)):k_(a,o)}var ji=-1,Lr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function PM(t){return t instanceof Lr}function OM(t){return(t.flags&8)!==0}function kM(t){return(t.flags&16)!==0}var Lf={},oh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Cl(r);let i=this.injector.get(e,Lf,r);return i!==Lf||n===Lf?i:this.parentInjector.get(e,n,r)}};function cE(t){return t!==ji}function nl(t){return t&32767}function FM(t){return t>>16}function rl(t,e){let n=FM(t),r=e;for(;n>0;)r=r[Ji],n--;return r}var sh=!0;function F_(t){let e=sh;return sh=t,e}var LM=256,lE=LM-1,uE=5,VM=0,Zt={};function jM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(us)&&(r=n[us]),r==null&&(r=n[us]=VM++);let i=r&lE,o=1<<i;e.data[t+(i>>uE)]|=o}function il(t,e){let n=dE(t,e);if(n!==-1)return n;let r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,Vf(r.data,t),Vf(e,null),Vf(r.blueprint,null));let i=Kh(t,e),o=t.injectorIndex;if(cE(i)){let s=nl(i),a=rl(i,e),c=a[H].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Vf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function dE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Kh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=gE(i),r===null)return ji;if(n++,i=i[Ji],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ji}function ah(t,e,n){jM(t,e,n)}function UM(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(DI(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function fE(t,e,n){if(n&B.Optional||t!==void 0)return t;Lh(e,"NodeInjector")}function hE(t,e,n,r){if(n&B.Optional&&r===void 0&&(r=null),!(n&(B.Self|B.Host))){let i=t[Hi],o=gt(void 0);try{return i?i.get(e,r,n&B.Optional):vI(e,r,n&B.Optional)}finally{gt(o)}}return fE(r,e,n)}function pE(t,e,n,r=B.Default,i){if(t!==null){if(e[P]&2048&&!(r&B.Self)){let s=zM(t,e,n,r,Zt);if(s!==Zt)return s}let o=mE(t,e,n,r,Zt);if(o!==Zt)return o}return hE(e,n,r,i)}function mE(t,e,n,r,i){let o=HM(n);if(typeof o=="function"){if(!XI(e,t,r))return r&B.Host?fE(i,n,r):hE(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&B.Optional))Lh(n);else return s}finally{rE()}}else if(typeof o=="number"){let s=null,a=dE(t,e),c=ji,l=r&B.Host?e[_t][Ft]:null;for((a===-1||r&B.SkipSelf)&&(c=a===-1?Kh(t,e):e[a+8],c===ji||!V_(r,!1)?a=-1:(s=e[H],a=nl(c),e=rl(c,e)));a!==-1;){let u=e[H];if(L_(o,a,u.data)){let d=BM(a,e,n,s,r,l);if(d!==Zt)return d}c=e[a+8],c!==ji&&V_(r,e[H].data[a+8]===l)&&L_(o,a,e)?(s=u,a=nl(c),e=rl(c,e)):a=-1}}return i}function BM(t,e,n,r,i,o){let s=e[H],a=s.data[t+8],c=r==null?Es(a)&&sh:r!=s&&(a.type&3)!==0,l=i&B.Host&&o===a,u=$M(a,s,n,c,l);return u!==null?qi(e,s,u,a):Zt}function $M(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&zn(h)&&h.type===n)return c}return null}function qi(t,e,n,r){let i=t[n],o=e.data;if(PM(i)){let s=i;s.resolving&&EA(IA(o[n]));let a=F_(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?gt(s.injectImpl):null,u=XI(t,r,B.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&RM(n,o[n],e)}finally{l!==null&&gt(l),F_(a),s.resolving=!1,rE()}}return i}function HM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(us)?t[us]:void 0;return typeof e=="number"?e>=0?e&lE:WM:e}function L_(t,e,n){let r=1<<t;return!!(n[e+(t>>uE)]&r)}function V_(t,e){return!(t&B.Self)&&!(t&B.Host&&e)}var xr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return pE(this._tNode,this._lView,e,Cl(r),n)}};function WM(){return new xr(Ze(),ce())}function er(t){return _s(()=>{let e=t.prototype.constructor,n=e[qc]||ch(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[qc]||ch(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ch(t){return dI(t)?()=>{let e=ch(Ge(t));return e&&e()}:Ui(t)}function zM(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[P]&2048&&!(s[P]&512);){let a=mE(o,s,n,r|B.Self,Zt);if(a!==Zt)return a;let c=o.parent;if(!c){let l=s[FI];if(l){let u=l.get(n,Zt,r);if(u!==Zt)return u}c=gE(s),s=s[Ji]}o=c}return i}function gE(t){let e=t[H],n=e.type;return n===2?e.declTNode:n===1?t[Ft]:null}function Zh(t){return UM(Ze(),t)}function j_(t,e=null,n=null,r){let i=vE(t,e,n,r);return i.resolveInjectorInitializers(),i}function vE(t,e=null,n=null,r,i=new Set){let o=[n||it,KA(t)];return r=r||(typeof t=="object"?void 0:qe(t)),new hs(o,e||Bh(),r||null,i)}var Ue=class t{static{this.THROW_IF_NOT_FOUND=ds}static{this.NULL=new Zc}static create(e,n){if(Array.isArray(e))return j_({name:""},n,e,"");{let r=e.name??"";return j_({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=A({token:t,providedIn:"any",factory:()=>O(EI)})}static{this.__NG_ELEMENT_ID__=-1}};var GM=new T("");GM.__NG_ELEMENT_ID__=t=>{let e=Ze();if(e===null)throw new S(204,!1);if(e.type&2)return e.value;if(t&B.Optional)return null;throw new S(204,!1)};var qM="ngOriginalError";function jf(t){return t[qM]}var yE=!0,_E=(()=>{class t{static{this.__NG_ELEMENT_ID__=YM}static{this.__NG_ENV_ID__=n=>n}}return t})(),lh=class extends _E{constructor(e){super(),this._lView=e}onDestroy(e){return GI(this._lView,e),()=>mM(this._lView,e)}};function YM(){return new lh(ce())}var Br=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=A({token:t,providedIn:"root",factory:()=>new t})}}return t})();var uh=class extends Me{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,sM()&&(this.destroyRef=_(_E,{optional:!0})??void 0,this.pendingTasks=_(Br,{optional:!0})??void 0)}emit(e){let n=K(null);try{super.next(e)}finally{K(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof me&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ce=uh;function ol(...t){}function IE(t){let e,n;function r(){t=ol;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function U_(t){return queueMicrotask(()=>t()),()=>{t=ol}}var Qh="isAngularZone",sl=Qh+"_ID",KM=0,ne=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ce(!1),this.onMicrotaskEmpty=new Ce(!1),this.onStable=new Ce(!1),this.onError=new Ce(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=yE}=e;if(typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,JM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Qh)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new S(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ZM,ol,ol);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ZM={};function Jh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function QM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){IE(()=>{t.callbackScheduled=!1,dh(t),t.isCheckStableRunning=!0,Jh(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),dh(t)}function JM(t){let e=()=>{QM(t)},n=KM++;t._inner=t._inner.fork({name:"angular",properties:{[Qh]:!0,[sl]:n,[sl+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(XM(c))return r.invokeTask(o,s,a,c);try{return B_(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),$_(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return B_(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!eN(c)&&e(),$_(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,dh(t),Jh(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function dh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function B_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $_(t){t._nesting--,Jh(t)}var fh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ce,this.onMicrotaskEmpty=new Ce,this.onStable=new Ce,this.onError=new Ce}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function XM(t){return EE(t,"__ignore_ng_zone__")}function eN(t){return EE(t,"__scheduler_tick__")}function EE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var yn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&jf(e);for(;n&&jf(n);)n=jf(n);return n||null}},tN=new T("",{providedIn:"root",factory:()=>{let t=_(ne),e=_(yn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function nN(){return Rl(Ze(),ce())}function Rl(t,e){return new Lt(ct(t,e))}var Lt=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=nN}}return t})();var rN="ngSkipHydration",iN="ngskiphydration";function wE(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===iN)return!0}return!1}function CE(t){return t.hasAttribute(rN)}function al(t){return(t.flags&128)===128}function oN(t){if(al(t))return!0;let e=t.parent;for(;e;){if(al(t)||wE(e))return!0;e=e.parent}return!1}var DE=new Map,sN=0;function aN(){return sN++}function cN(t){DE.set(t[bl],t)}function hh(t){DE.delete(t[bl])}var H_="__ngContext__";function Gn(t,e){Pt(e)?(t[H_]=e[bl],cN(e)):t[H_]=e}function bE(t){return SE(t[ps])}function TE(t){return SE(t[xt])}function SE(t){for(;t!==null&&!tn(t);)t=t[xt];return t}var ph;function AE(t){ph=t}function xl(){if(ph!==void 0)return ph;if(typeof document<"u")return document;throw new S(210,!1)}var Pl=new T("",{providedIn:"root",factory:()=>lN}),lN="ng",Xh=new T(""),wt=new T("",{providedIn:"platform",factory:()=>"unknown"});var ep=new T("",{providedIn:"root",factory:()=>xl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function uN(){let t=new eo;return _(wt)==="browser"&&(t.store=dN(xl(),_(Pl))),t}var eo=(()=>{class t{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=A({token:t,providedIn:"root",factory:uN})}get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();function dN(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var ME="h",NE="b",mh=function(t){return t.FirstChild="f",t.NextSibling="n",t}(mh||{}),fN="e",hN="t",tp="c",RE="x",cl="r",pN="i",mN="n",xE="d";var gN="__nghData__",PE=gN,Uf="ngh",vN="nghm",OE=()=>null;function yN(t,e,n=!1){let r=t.getAttribute(Uf);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,c={};if(r!==""){let u=e.get(eo,null,{optional:!0});u!==null&&(c=u.get(PE,[])[Number(r)])}let l={data:c,firstChild:t.firstChild??null};return n&&(l.firstChild=t,Ol(l,0,t.nextSibling)),a?t.setAttribute(Uf,a):t.removeAttribute(Uf),l}function _N(){OE=yN}function np(t,e,n=!1){return OE(t,e,n)}function IN(t){let e=t._lView;return e[H].type===2?null:(tl(e)&&(e=e[Ye]),e)}function EN(t){return t.textContent?.replace(/\s/gm,"")}function wN(t){let e=xl(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=EN(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Ol(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function gh(t,e){return t.segmentHeads?.[e]??null}function CN(t,e){let n=t.data,r=n[fN]?.[e]??null;return r===null&&n[tp]?.[e]&&(r=rp(t,e)),r}function kE(t,e){return t.data[tp]?.[e]??null}function rp(t,e){let n=kE(t,e)??[],r=0;for(let i of n)r+=i[cl]*(i[RE]??1);return r}function DN(t){if(typeof t.disconnectedNodes>"u"){let e=t.data[xE];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}function Cs(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[xE];t.disconnectedNodes=n?new Set(n):null}return!!DN(t)?.has(e)}var kc=new T(""),FE=!1,LE=new T("",{providedIn:"root",factory:()=>FE});var Fc;function bN(){if(Fc===void 0&&(Fc=null,Yf.trustedTypes))try{Fc=Yf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Fc}function W_(t){return bN()?.createScriptURL(t)||t}var ll=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lI})`}};function Ds(t){return t instanceof ll?t.changingThisBreaksApplicationSecurity:t}function ip(t,e){let n=TN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${lI})`)}return n===e}function TN(t){return t instanceof ll&&t.getTypeName()||null}var SN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VE(t){return t=String(t),t.match(SN)?t:"unsafe:"+t}var kl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(kl||{});function AN(t){let e=UE();return e?e.sanitize(kl.URL,t)||"":ip(t,"URL")?Ds(t):VE(wl(t))}function MN(t){let e=UE();if(e)return W_(e.sanitize(kl.RESOURCE_URL,t)||"");if(ip(t,"ResourceURL"))return W_(Ds(t));throw new S(904,!1)}function NN(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?MN:AN}function jE(t,e,n){return NN(e,n)(t)}function UE(){let t=ce();return t&&t[Xt].sanitizer}var RN=/^>|^->|<!--|-->|--!>|<!-$/g,xN=/(<|>)/g,PN="\u200B$1\u200B";function ON(t){return t.replace(RN,e=>e.replace(xN,PN))}function kN(t){return t.ownerDocument.body}function BE(t){return t instanceof Function?t():t}function Lc(t){return(t??_(Ue)).get(wt)==="browser"}var _n=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(_n||{}),FN;function op(t,e){return FN(t,e)}function Li(t,e,n,r,i){if(r!=null){let o,s=!1;tn(r)?o=r:Pt(r)&&(s=!0,r=r[st]);let a=kt(r);t===0&&n!==null?i==null?qE(e,n,a):ul(e,n,a,i||null,!0):t===1&&n!==null?ul(e,n,a,i||null,!0):t===2?cp(e,a,s):t===3&&e.destroyNode(a),o!=null&&QN(e,t,o,n,i)}}function $E(t,e){return t.createText(e)}function LN(t,e,n){t.setValue(e,n)}function HE(t,e){return t.createComment(ON(e))}function sp(t,e,n){return t.createElement(e,n)}function VN(t,e){WE(t,e),e[st]=null,e[Ft]=null}function jN(t,e,n,r,i,o){r[st]=i,r[Ft]=e,Ll(t,r,n,1,i,o)}function WE(t,e){e[Xt].changeDetectionScheduler?.notify(9),Ll(t,e,e[ge],2,null,null)}function UN(t){let e=t[ps];if(!e)return Bf(t[H],t);for(;e;){let n=null;if(Pt(e))n=e[ps];else{let r=e[ot];r&&(n=r)}if(!n){for(;e&&!e[xt]&&e!==t;)Pt(e)&&Bf(e[H],e),e=e[je];e===null&&(e=t),Pt(e)&&Bf(e[H],e),n=e&&e[xt]}e=n}}function BN(t,e,n,r){let i=ot+r,o=n.length;r>0&&(n[i-1][xt]=e),r<o-ot?(e[xt]=n[i],II(n,ot+r,e)):(n.push(e),e[xt]=null),e[je]=n;let s=e[Wi];s!==null&&n!==s&&zE(s,e);let a=e[zi];a!==null&&a.insertView(t),rh(e),e[P]|=128}function zE(t,e){let n=t[Xc],r=e[je];if(Pt(r))t[P]|=el.HasTransplantedViews;else{let i=r[je][_t];e[_t]!==i&&(t[P]|=el.HasTransplantedViews)}n===null?t[Xc]=[e]:n.push(e)}function ap(t,e){let n=t[Xc],r=n.indexOf(e);n.splice(r,1)}function vh(t,e){if(t.length<=ot)return;let n=ot+e,r=t[n];if(r){let i=r[Wi];i!==null&&i!==t&&ap(i,r),e>0&&(t[n-1][xt]=r[xt]);let o=Kc(t,ot+e);VN(r[H],r);let s=o[zi];s!==null&&s.detachView(o[H]),r[je]=null,r[xt]=null,r[P]&=-129}return r}function GE(t,e){if(!(e[P]&256)){let n=e[ge];n.destroyNode&&Ll(t,e,n,3,null,null),UN(e)}}function Bf(t,e){if(e[P]&256)return;let n=K(null);try{e[P]&=-129,e[P]|=256,e[vt]&&lf(e[vt]),HN(t,e),$N(t,e),e[H].type===1&&e[ge].destroy();let r=e[Wi];if(r!==null&&tn(e[je])){r!==e[je]&&ap(r,e);let i=e[zi];i!==null&&i.detachView(t)}hh(e)}finally{K(n)}}function $N(t,e){let n=t.cleanup,r=e[Qc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Qc]=null);let i=e[Hn];if(i!==null){e[Hn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function HN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Lr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Kt(4,a,c);try{c.call(a)}finally{Kt(5,a,c)}}else{Kt(4,i,o);try{o.call(i)}finally{Kt(5,i,o)}}}}}function WN(t,e,n){return zN(t,e.parent,n)}function zN(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[st];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Qt.None||o===Qt.Emulated)return null}return ct(r,n)}}function ul(t,e,n,r,i){t.insertBefore(e,n,r,i)}function qE(t,e,n){t.appendChild(e,n)}function z_(t,e,n,r,i){r!==null?ul(t,e,n,r,i):qE(t,e,n)}function YE(t,e){return t.parentNode(e)}function GN(t,e){return t.nextSibling(e)}function qN(t,e,n){return KN(t,e,n)}function YN(t,e,n){return t.type&40?ct(t,n):null}var KN=YN,G_;function Fl(t,e,n,r){let i=WN(t,r,e),o=e[ge],s=r.parent||e[Ft],a=qN(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)z_(o,i,n[c],a,!1);else z_(o,i,n,a,!1);G_!==void 0&&G_(o,r,e,n,i)}function cs(t,e){if(e!==null){let n=e.type;if(n&3)return ct(e,t);if(n&4)return yh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return cs(t,r);{let i=t[e.index];return tn(i)?yh(-1,i):kt(i)}}else{if(n&128)return cs(t,e.next);if(n&32)return op(e,t)()||kt(t[e.index]);{let r=KE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=kr(t[_t]);return cs(i,r)}else return cs(t,e.next)}}}return null}function KE(t,e){if(e!==null){let r=t[_t][Ft],i=e.projection;return r.projection[i]}return null}function yh(t,e){let n=ot+t+1;if(n<e.length){let r=e[n],i=r[H].firstChild;if(i!==null)return cs(r,i)}return e[vn]}function cp(t,e,n){t.removeChild(null,e,n)}function ZE(t){t.textContent=""}function lp(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Gn(kt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)lp(t,e,n.child,r,i,o,!1),Li(e,t,i,a,o);else if(c&32){let l=op(n,r),u;for(;u=l();)Li(e,t,i,u,o);Li(e,t,i,a,o)}else c&16?ZN(t,e,r,n,i,o):Li(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ll(t,e,n,r,i,o){lp(n,r,t.firstChild,e,i,o,!1)}function ZN(t,e,n,r,i,o){let s=n[_t],c=s[Ft].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Li(e,t,i,u,o)}else{let l=c,u=s[je];al(r)&&(l.flags|=128),lp(t,e,l,u,i,o,!0)}}function QN(t,e,n,r,i){let o=n[vn],s=kt(n);o!==s&&Li(e,t,r,o,i);for(let a=ot;a<n.length;a++){let c=n[a];Ll(c[H],c,t,e,r,o)}}function JN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:_n.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_n.Important),t.setStyle(n,r,i,o))}}function XN(t,e,n){t.setAttribute(e,"style",n)}function QE(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function JE(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Jf(t,e,r),i!==null&&QE(t,e,i),o!==null&&XN(t,e,o)}var $r={};function w(t=1){XE(lt(),ce(),Xi()+t,!1)}function XE(t,e,n,r){if(!r)if((e[P]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Hc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Wc(e,o,0,n)}Fr(n)}function C(t,e=B.Default){let n=ce();if(n===null)return O(t,e);let r=Ze();return pE(r,n,Ge(t),e)}function ew(t,e,n,r,i,o){let s=K(null);try{let a=null;i&Wn.SignalBased&&(a=e[r][Ln]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Wn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):VI(e,a,r,o)}finally{K(s)}}function eR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Fr(~i);else{let o=i,s=n[++r],a=n[++r];TM(s,o);let c=e[o];a(2,c)}}}finally{Fr(-1)}}function Vl(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[st]=i,d[P]=r|4|128|8|64,(l!==null||t&&t[P]&2048)&&(d[P]|=2048),WI(d),d[je]=d[Ji]=t,d[Ot]=n,d[Xt]=s||t&&t[Xt],d[ge]=a||t&&t[ge],d[Hi]=c||t&&t[Hi]||null,d[Ft]=o,d[bl]=aN(),d[Jt]=u,d[FI]=l,d[_t]=e.type==2?t[_t]:d,d}function bs(t,e,n,r,i){let o=t.data[e];if(o===null)o=tR(t,e,n,r,i),bM()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=wM();o.injectorIndex=s===null?-1:s.injectorIndex}return Ur(o,!0),o}function tR(t,e,n,r,i){let o=KI(),s=Wh(),a=s?o:o&&o.parent,c=t.data[e]=aR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function tw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function nw(t,e,n,r,i){let o=Xi(),s=r&2;try{Fr(-1),s&&e.length>Ye&&XE(t,e,Ye,!1),Kt(s?2:0,i),n(r,i)}finally{Fr(o),Kt(s?3:1,i)}}function up(t,e,n){if($h(e)){let r=K(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{K(r)}}}function dp(t,e,n){YI()&&(pR(t,e,n,ct(n,e)),(n.flags&64)===64&&sw(t,e,n))}function fp(t,e,n=ct){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function rw(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=hp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function hp(t,e,n,r,i,o,s,a,c,l,u){let d=Ye+r,f=d+i,h=nR(d,f),p=typeof l=="function"?l():l;return h[H]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function nR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:$r);return n}function rR(t,e,n,r){let o=r.get(LE,FE)||n===Qt.ShadowDom,s=t.selectRootElement(e,o);return iR(s),s}function iR(t){iw(t)}var iw=()=>null;function oR(t){CE(t)?ZE(t):wN(t)}function sR(){iw=oR}function aR(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return ws()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function q_(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Wn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?Y_(r,n,l,a,c):Y_(r,n,l,a)}return r}function Y_(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function cR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=q_(0,d.inputs,u,c,h),l=q_(1,d.outputs,u,l,p);let D=c!==null&&s!==null&&!jh(e)?bR(c,u,s):null;a.push(D)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function lR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function uR(t,e,n,r,i,o,s,a){let c=ct(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(mp(t,n,u,r,i),Es(e)&&dR(n,e.index)):e.type&3?(r=lR(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function dR(t,e){let n=Jn(e,t);n[P]&16||(n[P]|=64)}function pp(t,e,n,r){if(YI()){let i=r===null?null:{"":-1},o=gR(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&ow(t,e,n,s,i,a),i&&vR(n,r,i)}n.mergedAttrs=fs(n.mergedAttrs,n.attrs)}function ow(t,e,n,r,i,o){for(let l=0;l<r.length;l++)ah(il(n,e),t,r[l].type);_R(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=tw(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=fs(n.mergedAttrs,u.hostAttrs),IR(t,n,e,c,u),yR(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}cR(t,n,o)}function fR(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;hR(s)!=a&&s.push(a),s.push(n,r,o)}}function hR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function pR(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Es(n)&&ER(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||il(n,e),Gn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=qi(e,t,a,n);if(Gn(l,e),s!==null&&DR(e,a-i,l,c,n,s),zn(c)){let u=Jn(n.index,e);u[Ot]=qi(e,t,a,n)}}}function sw(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=SM();try{Fr(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];ih(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&mR(c,l)}}finally{Fr(-1),ih(s)}}function mR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function gR(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(UA(e,s.selectors,!1))if(r||(r=[]),zn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;_h(t,e,c)}else r.unshift(s),_h(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _h(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function vR(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new S(-301,!1);r.push(e[i],o)}}}function yR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;zn(e)&&(n[""]=t)}}function _R(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function IR(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ui(i.type,!0)),s=new Lr(o,zn(i),C);t.blueprint[r]=s,n[r]=s,fR(t,e,r,tw(t,n,i.hostVars,$r),i)}function ER(t,e,n){let r=ct(e,t),i=rw(n),o=t[Xt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=jl(t,Vl(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function wR(t,e,n,r,i,o){let s=ct(t,e);CR(e[ge],s,o,t.value,n,r,i)}function CR(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?wl(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function DR(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];ew(r,n,c,l,u,d)}}function bR(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function aw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cw(t,e){let n=t.contentQueries;if(n!==null){let r=K(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];JI(o),a.contentQueries(2,e[s],s)}}}finally{K(r)}}}function jl(t,e){return t[ps]?t[x_][xt]=e:t[ps]=e,t[x_]=e,e}function Ih(t,e,n){JI(0);let r=K(null);try{e(t,n)}finally{K(r)}}function TR(t){return t[Qc]??=[]}function SR(t){return t.cleanup??=[]}function lw(t,e){let n=t[Hi],r=n?n.get(yn,null):null;r&&r.handleError(e)}function mp(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];ew(u,l,r,a,c,i)}}function AR(t,e,n){let r=$I(e,t);LN(t[ge],r,n)}function MR(t,e){let n=Jn(e,t),r=n[H];NR(r,n);let i=n[st];i!==null&&n[Jt]===null&&(n[Jt]=np(i,n[Hi])),gp(r,n,n[Ot])}function NR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function gp(t,e,n){qh(e);try{let r=t.viewQuery;r!==null&&Ih(1,r,n);let i=t.template;i!==null&&nw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[zi]?.finishViewCreation(t),t.staticContentQueries&&cw(t,e),t.staticViewQueries&&Ih(2,t.viewQuery,n);let o=t.components;o!==null&&RR(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[P]&=-5,Yh()}}function RR(t,e){for(let n=0;n<e.length;n++)MR(t,e[n])}function xR(t,e,n,r){let i=K(null);try{let o=e.tView,a=t[P]&4096?4096:16,c=Vl(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Wi]=l;let u=t[zi];return u!==null&&(c[zi]=u.createEmbeddedView(o)),gp(o,c,n),c}finally{K(i)}}function K_(t,e){return!e||e.firstChild===null||al(t)}function PR(t,e,n,r=!0){let i=e[H];if(BN(i,e,t,n),r){let s=yh(n,t),a=e[ge],c=YE(a,t[vn]);c!==null&&jN(i,t[Ft],a,e,c,s)}let o=e[Jt];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function dl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(kt(o)),tn(o)&&OR(o,r);let s=n.type;if(s&8)dl(t,e,n.child,r);else if(s&32){let a=op(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=KE(e,n);if(Array.isArray(a))r.push(...a);else{let c=kr(e[_t]);dl(c[H],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function OR(t,e){for(let n=ot;n<t.length;n++){let r=t[n],i=r[H].firstChild;i!==null&&dl(r[H],r,i,e)}t[vn]!==t[st]&&e.push(t[vn])}var uw=[];function kR(t){return t[vt]??FR(t)}function FR(t){let e=uw.pop()??Object.create(VR);return e.lView=t,e}function LR(t){t.lView[vt]!==t&&(t.lView=null,uw.push(t))}var VR=q(E({},rs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Al(t.lView)},consumerOnSignalRead(){this.lView[vt]=this}});function jR(t){let e=t[vt]??Object.create(UR);return e.lView=t,e}var UR=q(E({},rs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=kr(t.lView);for(;e&&!dw(e[H]);)e=kr(e);e&&zI(e)},consumerOnSignalRead(){this.lView[vt]=this}});function dw(t){return t.type!==2}var BR=100;function fw(t,e=!0,n=0){let r=t[Xt],i=r.rendererFactory,o=!1;o||i.begin?.();try{$R(t,n)}catch(s){throw e&&lw(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function $R(t,e){let n=QI();try{O_(!0),Eh(t,e);let r=0;for(;Sl(t);){if(r===BR)throw new S(103,!1);r++,Eh(t,1)}}finally{O_(n)}}function HR(t,e,n,r){let i=e[P];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Xt].inlineEffectRunner?.flush(),qh(e);let a=!0,c=null,l=null;o||(dw(t)?(l=kR(e),c=ic(l)):Fy()===null?(a=!1,l=jR(e),c=ic(l)):e[vt]&&(lf(e[vt]),e[vt]=null));try{WI(e),CM(t.bindingStartIndex),n!==null&&nw(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&Hc(e,h,null)}else{let h=t.preOrderHooks;h!==null&&Wc(e,h,0,null),Ff(e,0)}if(s||WR(e),hw(e,0),t.contentQueries!==null&&cw(t,e),!o)if(u){let h=t.contentCheckHooks;h!==null&&Hc(e,h)}else{let h=t.contentHooks;h!==null&&Wc(e,h,1),Ff(e,1)}eR(t,e);let d=t.components;d!==null&&mw(e,d,0);let f=t.viewQuery;if(f!==null&&Ih(2,f,r),!o)if(u){let h=t.viewCheckHooks;h!==null&&Hc(e,h)}else{let h=t.viewHooks;h!==null&&Wc(e,h,2),Ff(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[kf]){for(let h of e[kf])h();e[kf]=null}o||(e[P]&=-73)}catch(u){throw o||Al(e),u}finally{l!==null&&(af(l,c),a&&LR(l)),Yh()}}function hw(t,e){for(let n=bE(t);n!==null;n=TE(n))for(let r=ot;r<n.length;r++){let i=n[r];pw(i,e)}}function WR(t){for(let e=bE(t);e!==null;e=TE(e)){if(!(e[P]&el.HasTransplantedViews))continue;let n=e[Xc];for(let r=0;r<n.length;r++){let i=n[r];zI(i)}}}function zR(t,e,n){let r=Jn(e,t);pw(r,n)}function pw(t,e){Hh(t)&&Eh(t,e)}function Eh(t,e){let r=t[H],i=t[P],o=t[vt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&cf(o)),s||=!1,o&&(o.dirty=!1),t[P]&=-9217,s)HR(r,t,r.template,t[Ot]);else if(i&8192){hw(t,1);let a=r.components;a!==null&&mw(t,a,1)}}function mw(t,e,n){for(let r=0;r<e.length;r++)zR(t,e[r],n)}function vp(t,e){let n=QI()?64:1088;for(t[Xt].changeDetectionScheduler?.notify(e);t;){t[P]|=n;let r=kr(t);if(tl(t)&&!r)return t;t=r}return null}var Vr=class{get rootNodes(){let e=this._lView,n=e[H];return dl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ot]}set context(e){this._lView[Ot]=e}get destroyed(){return(this._lView[P]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[je];if(tn(e)){let n=e[Jc],r=n?n.indexOf(this):-1;r>-1&&(vh(e,r),Kc(n,r))}this._attachedToViewContainer=!1}GE(this._lView[H],this._lView)}onDestroy(e){GI(this._lView,e)}markForCheck(){vp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[P]&=-129}reattach(){rh(this._lView),this._lView[P]|=128}detectChanges(){this._lView[P]|=1024,fw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=tl(this._lView),n=this._lView[Wi];n!==null&&!e&&ap(n,this._lView),WE(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e;let n=tl(this._lView),r=this._lView[Wi];r!==null&&!n&&zE(r,this._lView),rh(this._lView)}},Ts=(()=>{class t{static{this.__NG_ELEMENT_ID__=YR}}return t})(),GR=Ts,qR=class extends GR{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=xR(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Vr(i)}};function YR(){return KR(Ze(),ce())}function KR(t,e){return t.type&4?new qR(e,t,Rl(t,e)):null}var ZR=new RegExp(`^(\\d+)*(${NE}|${ME})*(.*)`);function QR(t){let e=t.match(ZR),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function JR(t){return!t.prev&&t.parent?.type===8}function $f(t){return t.index-Ye}function XR(t,e){let n=t.i18nNodes;if(n)return n.get(e)}function Ul(t,e,n,r){let i=$f(r),o=XR(t,i);if(o===void 0){let s=t.data[mN];if(s?.[i])o=tx(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(JR(r)){let l=$f(r.parent);o=gh(t,l)}else{let l=ct(c,n);if(a)o=l.firstChild;else{let u=$f(c),d=gh(t,u);if(c.type===2&&d){let h=rp(t,u)+1;o=Bl(h,d)}else o=l.nextSibling}}}}return o}function Bl(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function ex(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case mh.FirstChild:n=n.firstChild;break;case mh.NextSibling:n=n.nextSibling;break}}return n}function tx(t,e){let[n,...r]=QR(t),i;if(n===ME)i=e[_t][st];else if(n===NE)i=kN(e[_t][st]);else{let o=Number(n);i=kt(e[o+Ye])}return ex(i,r)}var nx=!1;function rx(t){nx=t}function ix(t){let e=t[Jt];if(e){let{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){let i=t[ge];for(let o of r.values())ox(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function ox(t,e,n){for(let r of n.node.cases[n.case]){let i=e.get(r.index-Ye);i&&cp(t,i,!1)}}function gw(t){let e=t[ms]??[],r=t[je][ge];for(let i of e)sx(i,r);t[ms]=it}function sx(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[cl];for(;n<i;){let o=r.nextSibling;cp(e,r,!1),r=o,n++}}}function vw(t){gw(t);let e=t[st];Pt(e)&&fl(e);for(let n=ot;n<t.length;n++)fl(t[n])}function fl(t){ix(t);let e=t[H];for(let n=Ye;n<e.bindingStartIndex;n++)if(tn(t[n])){let r=t[n];vw(r)}else Pt(t[n])&&fl(t[n])}function ax(t){let e=t._views;for(let n of e){let r=IN(n);r!==null&&r[st]!==null&&(Pt(r)?fl(r):vw(r))}}function cx(t,e){let n=[];for(let r of e)for(let i=0;i<(r[RE]??1);i++){let o={data:r,firstChild:null};r[cl]>0&&(o.firstChild=t,t=Bl(r[cl],t)),n.push(o)}return[t,n]}var yw=()=>null;function lx(t,e){let n=t[ms];return!e||n===null||n.length===0?null:n[0].data[pN]===e?n.shift():(gw(t),null)}function ux(){yw=lx}function Z_(t,e){return yw(t,e)}var Yi=class{},$l=new T("",{providedIn:"root",factory:()=>!1});var _w=new T(""),Iw=new T(""),wh=class{},hl=class{};function dx(t){let e=Error(`No component factory found for ${qe(t)}.`);return e[fx]=t,e}var fx="ngComponent";var Ch=class{resolveComponentFactory(e){throw dx(e)}},Ki=class{static{this.NULL=new Ch}},Zi=class{},nn=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>hx()}}return t})();function hx(){let t=ce(),e=Ze(),n=Jn(e.index,t);return(Pt(n)?n:t)[ge]}var px=(()=>{class t{static{this.\u0275prov=A({token:t,providedIn:"root",factory:()=>null})}}return t})();function pl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=w_(i,a);else if(o==2){let c=a,l=e[++s];r=w_(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ml=class extends Ki{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Or(e);return new gs(n,this.ngModule)}};function Q_(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Wn.None;e?n.push({propName:s,templateName:r,isSignal:(a&Wn.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function mx(t){let e=t.toLowerCase();return e==="svg"?dM:e==="math"?fM:null}var gs=class extends hl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Q_(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Q_(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=WA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=K(null);try{i=i||this.ngModule;let s=i instanceof yt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new oh(e,s):e,c=a.get(Zi,null);if(c===null)throw new S(407,!1);let l=a.get(px,null),u=a.get(Yi,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?rR(f,r,this.componentDef.encapsulation,a):sp(f,h,mx(h)),D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let M=null;p!==null&&(M=np(p,a,!0));let k=hp(0,null,null,1,0,null,null,null,null,null,null),ue=Vl(null,k,null,D,null,null,d,f,a,null,M);qh(ue);let de,we,At=null;try{let Oe=this.componentDef,mn,es=null;Oe.findHostDirectiveDefs?(mn=[],es=new Map,Oe.findHostDirectiveDefs(Oe,mn,es),mn.push(Oe)):mn=[Oe];let ts=gx(ue,p);At=vx(ts,p,Oe,mn,ue,d,f),we=HI(k,Ye),p&&Ix(f,Oe,p,r),n!==void 0&&Ex(we,this.ngContentSelectors,n),de=_x(At,Oe,mn,es,ue,[wx]),gp(k,ue,null)}catch(Oe){throw At!==null&&hh(At),hh(ue),Oe}finally{Yh()}return new Dh(this.componentType,de,Rl(we,ue),ue,we)}finally{K(o)}}},Dh=class extends wh{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Vr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;mp(o[H],o,i,e,n),this.previousInputValues.set(e,n);let s=Jn(this._tNode.index,o);vp(s,1)}}get injector(){return new xr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function gx(t,e){let n=t[H],r=Ye;return t[r]=e,bs(n,r,2,"#host",null)}function vx(t,e,n,r,i,o,s){let a=i[H];yx(r,t,e,s);let c=null;e!==null&&(c=np(e,i[Hi]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Vl(i,rw(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&_h(a,t,r.length-1),jl(i,d),i[t.index]=d}function yx(t,e,n,r){for(let i of t)e.mergedAttrs=fs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(pl(e,e.mergedAttrs,!0),n!==null&&JE(r,n,e))}function _x(t,e,n,r,i,o){let s=Ze(),a=i[H],c=ct(s,i);ow(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=qi(i,a,d,s);Gn(f,i)}sw(a,i,s),c&&Gn(c,i);let l=qi(i,a,s.directiveStart+s.componentOffset,s);if(t[Ot]=i[Ot]=l,o!==null)for(let u of o)u(l,e);return up(a,s,i),l}function Ix(t,e,n,r){if(r)Jf(t,n,["ng-version","18.2.10"]);else{let{attrs:i,classes:o}=zA(e.selectors[0]);i&&Jf(t,n,i),o&&o.length>0&&QE(t,n,o.join(" "))}}function Ex(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function wx(){let t=Ze();Nl(ce()[H],t)}var Hr=(()=>{class t{static{this.__NG_ELEMENT_ID__=Cx}}return t})();function Cx(){let t=Ze();return bx(t,ce())}var Dx=Hr,Ew=class extends Dx{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Rl(this._hostTNode,this._hostLView)}get injector(){return new xr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kh(this._hostTNode,this._hostLView);if(cE(e)){let n=rl(e,this._hostLView),r=nl(e),i=n[H].data[r+8];return new xr(i,n)}else return new xr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=J_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Z_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,K_(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!aM(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new gs(Or(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let D=(s?l:this.parentInjector).get(yt,null);D&&(o=D)}let u=Or(c.componentType??{}),d=Z_(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,K_(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[je],l=new Ew(c,c[Ft],c[je]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return PR(s,i,o,r),e.attachToViewContainerRef(),II(Hf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=J_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=vh(this._lContainer,n);r&&(Kc(Hf(this._lContainer),n),GE(r[H],r))}detach(e){let n=this._adjustIndex(e,-1),r=vh(this._lContainer,n);return r&&Kc(Hf(this._lContainer),n)!=null?new Vr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function J_(t){return t[Jc]}function Hf(t){return t[Jc]||(t[Jc]=[])}function bx(t,e){let n,r=e[t.index];return tn(r)?n=r:(n=aw(r,e,null,t),e[t.index]=n,jl(e,n)),ww(n,e,t,r),new Ew(n,t,e)}function Tx(t,e){let n=t[ge],r=n.createComment(""),i=ct(e,t),o=YE(n,i);return ul(n,o,r,GN(n,i),!1),r}var ww=Cw,yp=()=>!1;function Sx(t,e,n){return yp(t,e,n)}function Cw(t,e,n,r){if(t[vn])return;let i;n.type&8?i=kt(r):i=Tx(e,n),t[vn]=i}function Ax(t,e,n){if(t[vn]&&t[ms])return!0;let r=n[Jt],i=e.index-Ye;if(!r||oN(e)||Cs(r,i))return!1;let s=gh(r,i),a=r.data[tp]?.[i],[c,l]=cx(s,a);return t[vn]=c,t[ms]=l,!0}function Mx(t,e,n,r){yp(t,n,e)||Cw(t,e,n,r)}function Nx(){ww=Mx,yp=Ax}var X_=new Set;function tr(t){X_.has(t)||(X_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Ss(t,e){tr("NgSignals");let n=qy(t),r=n[Ln];return e?.equal&&(r.equal=e.equal),n.set=i=>uf(r,i),n.update=i=>Yy(r,i),n.asReadonly=Rx.bind(n),n}function Rx(){let t=this[Ln];if(t.readonlyFn===void 0){let e=()=>this();e[Ln]=t,t.readonlyFn=e}return t.readonlyFn}function xx(t){return Object.getPrototypeOf(t.prototype).constructor}function Vt(t){let e=xx(t.type),n=!0,r=[t];for(;e;){let i;if(zn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Vc(t.inputs),s.inputTransforms=Vc(t.inputTransforms),s.declaredInputs=Vc(t.declaredInputs),s.outputs=Vc(t.outputs);let a=i.hostBindings;a&&Lx(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&kx(t,c),l&&Fx(t,l),Px(t,i),fA(t.outputs,i.outputs),zn(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Vt&&(n=!1)}}e=Object.getPrototypeOf(e)}Ox(r)}function Px(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Ox(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fs(i.hostAttrs,n=fs(n,i.hostAttrs))}}function Vc(t){return t===Bi?{}:t===it?[]:t}function kx(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Fx(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function Lx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function _p(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var qn=class{},vs=class{};var bh=class extends qn{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ml(this);let o=MI(e);this._bootstrapComponents=BE(o.bootstrap),this._r3Injector=vE(e,n,[{provide:qn,useValue:this},{provide:Ki,useValue:this.componentFactoryResolver},...r],qe(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Th=class extends vs{constructor(e){super(),this.moduleType=e}create(e){return new bh(this.moduleType,e,[])}};var gl=class extends qn{constructor(e){super(),this.componentFactoryResolver=new ml(this),this.instance=null;let n=new hs([...e.providers,{provide:qn,useValue:this},{provide:Ki,useValue:this.componentFactoryResolver}],e.parent||Bh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ip(t,e,n=null){return new gl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Dw(t){return jx(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Vx(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function jx(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Ep(t,e,n){return t[e]=n}function Yn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function bw(t,e,n,r){let i=Yn(t,e,n);return Yn(t,e+1,r)||i}function Ux(t,e,n,r,i){let o=bw(t,e,n,r);return Yn(t,e+2,i)||o}function As(t){return(t.flags&32)===32}function Bx(t,e,n,r,i,o,s,a,c){let l=e.consts,u=bs(e,t,4,s||null,a||null);pp(e,n,u,Gi(l,c)),Nl(e,u);let d=u.tView=hp(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function $x(t,e,n,r,i,o,s,a,c,l){let u=n+Ye,d=e.firstCreatePass?Bx(u,e,t,r,i,o,s,a,c):e.data[u];Ur(d,!1);let f=Tw(e,t,d,n);Ml()&&Fl(e,t,f,d),Gn(f,t);let h=aw(f,t,f,d);return t[u]=h,jl(t,h),Sx(h,d,t),Tl(d)&&dp(e,t,d),c!=null&&fp(t,d,l),d}function Q(t,e,n,r,i,o,s,a){let c=ce(),l=lt(),u=Gi(l.consts,o);return $x(c,l,t,e,n,r,i,u,s,a),Q}var Tw=Sw;function Sw(t,e,n,r){return Xn(!0),e[ge].createComment("")}function Hx(t,e,n,r){let i=e[Jt],o=!i||ws()||As(n)||Cs(i,r);if(Xn(o),o)return Sw(t,e,n,r);let s=i.data[hN]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=Ul(i,t,e,n);Ol(i,r,a);let c=rp(i,r);return Bl(c,a)}function Wx(){Tw=Hx}var ls=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ls||{}),zx=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=A({token:t,providedIn:"root",factory:()=>new t})}}return t})(),eI=class t{constructor(){this.ngZone=_(ne),this.scheduler=_(Yi),this.errorHandler=_(yn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ls.EarlyRead,ls.Write,ls.MixedReadWrite,ls.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=A({token:t,providedIn:"root",factory:()=>new t})}};function Wr(t,e,n,r){let i=ce(),o=Gh();if(Yn(i,o,e)){let s=lt(),a=iE();wR(a,i,t,e,n,r)}return Wr}function Gx(t,e,n,r){return Yn(t,Gh(),n)?e+wl(n)+r:$r}function jc(t,e){return t<<17|e<<2}function jr(t){return t>>17&32767}function qx(t){return(t&2)==2}function Yx(t,e){return t&131071|e<<17}function Sh(t){return t|2}function Qi(t){return(t&131068)>>2}function Wf(t,e){return t&-131069|e<<2}function Kx(t){return(t&1)===1}function Ah(t){return t|1}function Zx(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=jr(s),c=Qi(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Is(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=jr(t[a+1]);t[r+1]=jc(f,a),f!==0&&(t[f+1]=Wf(t[f+1],r)),t[a+1]=Yx(t[a+1],r)}else t[r+1]=jc(a,0),a!==0&&(t[a+1]=Wf(t[a+1],r)),a=r;else t[r+1]=jc(c,0),a===0?a=r:t[c+1]=Wf(t[c+1],r),c=r;l&&(t[r+1]=Sh(t[r+1])),tI(t,u,r,!0),tI(t,u,r,!1),Qx(e,u,t,r,o),s=jc(a,c),o?e.classBindings=s:e.styleBindings=s}function Qx(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Is(o,e)>=0&&(n[r+1]=Ah(n[r+1]))}function tI(t,e,n,r){let i=t[n+1],o=e===null,s=r?jr(i):Qi(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];Jx(c,e)&&(a=!0,t[s+1]=r?Ah(l):Sh(l)),s=r?jr(l):Qi(l)}a&&(t[n+1]=r?Sh(i):Ah(i))}function Jx(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Is(t,e)>=0:!1}function b(t,e,n){let r=ce(),i=Gh();if(Yn(r,i,e)){let o=lt(),s=iE();uR(o,s,r,t,e,r[ge],n,!1)}return b}function nI(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";mp(t,n,o[s],s,r)}function Hl(t,e){return Xx(t,e,null,!0),Hl}function Xx(t,e,n,r){let i=ce(),o=lt(),s=DM(2);if(o.firstUpdatePass&&tP(o,t,s,r),e!==$r&&Yn(i,s,e)){let a=o.data[Xi()];sP(o,a,i,i[ge],t,i[s+1]=aP(e,n),r,s)}}function eP(t,e){return e>=t.expandoStartIndex}function tP(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Xi()],s=eP(t,n);cP(o,r)&&e===null&&!s&&(e=!1),e=nP(i,o,e,r),Zx(i,o,e,n,s,r)}}function nP(t,e,n,r){let i=AM(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=zf(null,t,e,n,r),n=ys(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=zf(i,t,e,n,r),o===null){let c=rP(t,e,r);c!==void 0&&Array.isArray(c)&&(c=zf(null,t,e,c[1],r),c=ys(c,e.attrs,r),iP(t,e,r,c))}else o=oP(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function rP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Qi(r)!==0)return t[jr(r)]}function iP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[jr(i)]=r}function oP(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ys(r,s,n)}return ys(r,e.attrs,n)}function zf(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ys(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ys(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),xA(t,s,n?!0:e[++o]))}return t===void 0?null:t}function sP(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=Kx(l)?rI(c,e,n,i,Qi(l),s):void 0;if(!vl(u)){vl(o)||qx(l)&&(o=rI(c,null,n,i,a,s));let d=$I(Xi(),n);JN(r,s,d,i,o)}}function rI(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===$r&&(f=d?it:void 0);let h=d?Pf(f,r):u===r?f:void 0;if(l&&!vl(h)&&(h=Pf(c,r)),vl(h)&&(a=h,s))return a;let p=t[i+1];i=s?jr(p):Qi(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Pf(c,r))}return a}function vl(t){return t!==void 0}function aP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=qe(Ds(t)))),t}function cP(t,e){return(t.flags&(e?8:16))!==0}function lP(t,e,n,r,i,o){let s=e.consts,a=Gi(s,i),c=bs(e,t,2,r,a);return pp(e,n,c,Gi(s,o)),c.attrs!==null&&pl(c,c.attrs,!1),c.mergedAttrs!==null&&pl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function v(t,e,n,r){let i=ce(),o=lt(),s=Ye+t,a=i[ge],c=o.firstCreatePass?lP(s,o,i,e,n,r):o.data[s],l=Aw(o,i,c,a,e,t);i[s]=l;let u=Tl(c);return Ur(c,!0),JE(a,l,c),!As(c)&&Ml()&&Fl(o,i,l,c),gM()===0&&Gn(l,i),vM(),u&&(dp(o,i,c),up(o,c,i)),r!==null&&fp(i,c),v}function g(){let t=Ze();Wh()?ZI():(t=t.parent,Ur(t,!1));let e=t;_M(e)&&EM(),yM();let n=lt();return n.firstCreatePass&&(Nl(n,t),$h(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&OM(e)&&nI(n,e,ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&kM(e)&&nI(n,e,ce(),e.stylesWithoutHost,!1),g}function J(t,e,n,r){return v(t,e,n,r),g(),J}var Aw=(t,e,n,r,i,o)=>(Xn(!0),sp(r,i,oE()));function uP(t,e,n,r,i,o){let s=e[Jt],a=!s||ws()||As(n)||Cs(s,o);if(Xn(a),a)return sp(r,i,oE());let c=Ul(s,t,e,n);return kE(s,o)&&Ol(s,o,c.nextSibling),s&&(wE(n)||CE(c))&&Es(n)&&(IM(n),ZE(c)),c}function dP(){Aw=uP}function fP(t,e,n,r,i){let o=e.consts,s=Gi(o,r),a=bs(e,t,8,"ng-container",s);s!==null&&pl(a,s,!0);let c=Gi(o,i);return pp(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function zr(t,e,n){let r=ce(),i=lt(),o=t+Ye,s=i.firstCreatePass?fP(o,i,r,e,n):i.data[o];Ur(s,!0);let a=Mw(i,r,s,t);return r[o]=a,Ml()&&Fl(i,r,a,s),Gn(a,r),Tl(s)&&(dp(i,r,s),up(i,s,r)),n!=null&&fp(r,s),zr}function Gr(){let t=Ze(),e=lt();return Wh()?ZI():(t=t.parent,Ur(t,!1)),e.firstCreatePass&&(Nl(e,t),$h(t)&&e.queries.elementEnd(t)),Gr}var Mw=(t,e,n,r)=>(Xn(!0),HE(e[ge],""));function hP(t,e,n,r){let i,o=e[Jt],s=!o||ws()||Cs(o,r)||As(n);if(Xn(s),s)return HE(e[ge],"");let a=Ul(o,t,e,n),c=CN(o,r);return Ol(o,r,a),i=Bl(c,a),i}function pP(){Mw=hP}function jt(){return ce()}var yl="en-US";var mP=yl;function gP(t){typeof t=="string"&&(mP=t.toLowerCase().replace(/_/g,"-"))}var vP=(t,e,n)=>{};function se(t,e,n,r){let i=ce(),o=lt(),s=Ze();return _P(o,i,i[ge],s,t,e,r),se}function yP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Qc],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function _P(t,e,n,r,i,o,s){let a=Tl(r),l=t.firstCreatePass&&SR(t),u=e[Ot],d=TR(e),f=!0;if(r.type&3||s){let D=ct(r,e),M=s?s(D):D,k=d.length,ue=s?we=>s(kt(we[r.index])):r.index,de=null;if(!s&&a&&(de=yP(t,e,i,r.index)),de!==null){let we=de.__ngLastListenerFn__||de;we.__ngNextListenerFn__=o,de.__ngLastListenerFn__=o,f=!1}else{o=oI(r,e,u,o),vP(D,i,o);let we=n.listen(M,i,o);d.push(o,we),l&&l.push(i,ue,k,k+1)}}else o=oI(r,e,u,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let D=p.length;if(D)for(let M=0;M<D;M+=2){let k=p[M],ue=p[M+1],At=e[k][ue].subscribe(o),Oe=d.length;d.push(o,At),l&&l.push(i,r.index,Oe,-(Oe+1))}}}function iI(t,e,n,r){let i=K(null);try{return Kt(6,e,n),n(r)!==!1}catch(o){return lw(t,o),!1}finally{Kt(7,e,n),K(i)}}function oI(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Jn(t.index,e):e;vp(s,5);let a=iI(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=iI(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function pe(t=1){return NM(t)}function y(t,e=""){let n=ce(),r=lt(),i=t+Ye,o=r.firstCreatePass?bs(r,i,1,e,null):r.data[i],s=Nw(r,n,o,e,t);n[i]=s,Ml()&&Fl(r,n,s,o),Ur(o,!1)}var Nw=(t,e,n,r,i)=>(Xn(!0),$E(e[ge],r));function IP(t,e,n,r,i){let o=e[Jt],s=!o||ws()||As(n)||Cs(o,i);return Xn(s),s?$E(e[ge],r):Ul(o,t,e,n)}function EP(){Nw=IP}function Ut(t,e,n){let r=ce(),i=Gx(r,t,e,n);return i!==$r&&AR(r,Xi(),i),Ut}function wP(t,e,n){let r=lt();if(r.firstCreatePass){let i=zn(t);Mh(n,r.data,r.blueprint,i,!0),Mh(e,r.data,r.blueprint,i,!1)}}function Mh(t,e,n,r,i){if(t=Ge(t),Array.isArray(t))for(let o=0;o<t.length;o++)Mh(t[o],e,n,r,i);else{let o=lt(),s=ce(),a=Ze(),c=$i(t)?t:Ge(t.provide),l=kI(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if($i(t)||!t.multi){let h=new Lr(l,i,C),p=qf(c,e,i?u:u+f,d);p===-1?(ah(il(a,s),o,c),Gf(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=qf(c,e,u+f,d),p=qf(c,e,u,u+f),D=h>=0&&n[h],M=p>=0&&n[p];if(i&&!M||!i&&!D){ah(il(a,s),o,c);let k=bP(i?DP:CP,n.length,i,r,l);!i&&M&&(n[p].providerFactory=k),Gf(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=Rw(n[i?p:h],l,!i&&r);Gf(o,t,h>-1?h:p,k)}!i&&r&&M&&n[p].componentProviders++}}}function Gf(t,e,n,r){let i=$i(e),o=XA(e);if(i||o){let c=(o?Ge(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Rw(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function qf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function CP(t,e,n,r){return Nh(this.multi,[])}function DP(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=qi(n,n[H],this.providerFactory.index,r);o=a.slice(0,s),Nh(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Nh(i,o);return o}function Nh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function bP(t,e,n,r,i){let o=new Lr(t,n,C);return o.multi=[],o.index=e,o.componentProviders=0,Rw(o,i,r&&!n),o}function qr(t,e=[]){return n=>{n.providersResolver=(r,i)=>wP(r,i?i(t):t,e)}}var TP=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=xI(!1,n.type),i=r.length>0?Ip([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=A({token:t,providedIn:"environment",factory:()=>new t(O(yt))})}}return t})();function ee(t){tr("NgStandalone"),t.getStandaloneInjector=e=>e.get(TP).getOrCreateStandaloneInjector(t)}function wp(t,e,n,r){return SP(ce(),zh(),t,e,n,r)}function Bt(t,e,n,r,i){return AP(ce(),zh(),t,e,n,r,i)}function xw(t,e,n,r,i,o){return MP(ce(),zh(),t,e,n,r,i,o)}function Cp(t,e){let n=t[e];return n===$r?void 0:n}function SP(t,e,n,r,i,o){let s=e+n;return Yn(t,s,i)?Ep(t,s+1,o?r.call(o,i):r(i)):Cp(t,s+1)}function AP(t,e,n,r,i,o,s){let a=e+n;return bw(t,a,i,o)?Ep(t,a+2,s?r.call(s,i,o):r(i,o)):Cp(t,a+2)}function MP(t,e,n,r,i,o,s,a){let c=e+n;return Ux(t,c,i,o,s)?Ep(t,c+3,a?r.call(a,i,o,s):r(i,o,s)):Cp(t,c+3)}var In=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Pw=new In("18.2.10");var Wl=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var Ow=new T("");function Yr(t){return!!t&&typeof t.then=="function"}function kw(t){return!!t&&typeof t.subscribe=="function"}var Fw=new T(""),Lw=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=_(Fw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Yr(o))n.push(o);else if(kw(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),to=new T("");function NP(){Gy(()=>{throw new S(600,!1)})}function RP(t){return t.isBoundToModule}var xP=10;function PP(t,e,n){try{let r=n();return Yr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var rn=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_(tN),this.afterRenderManager=_(zx),this.zonelessEnabled=_($l),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Me,this.afterTick=new Me,this.componentTypes=[],this.components=[],this.isStable=_(Br).hasPendingTasks.pipe(x(n=>!n)),this._injector=_(yt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof hl;if(!this._injector.get(Lw).done){let f=!i&&AI(n),h=!1;throw new S(405,h)}let s;i?s=n:s=this._injector.get(Ki).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=RP(s)?void 0:this._injector.get(qn),c=r||s.selector,l=s.create(Ue.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Ow,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),zc(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new S(101,!1);let n=K(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,K(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Zi,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<xP;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)OP(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Sl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;zc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(to,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>zc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new S(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function zc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Uc;function zl(t){Uc??=new WeakMap;let e=Uc.get(t);if(e)return e;let n=t.isStable.pipe(Nt(r=>r)).toPromise().then(()=>{});return Uc.set(t,n),t.onDestroy(()=>Uc?.delete(t)),n}function OP(t,e,n,r){if(!n&&!Sl(t))return;fw(t,e,n&&!r?0:1)}var Rh=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Dp=(()=>{class t{compileModuleSync(n){return new Th(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=MI(n),o=BE(i.declarations).reduce((s,a)=>{let c=Or(a);return c&&s.push(new gs(c)),s},[]);return new Rh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var kP=(()=>{class t{constructor(){this.zone=_(ne),this.changeDetectionScheduler=_(Yi),this.applicationRef=_(rn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),FP=new T("",{factory:()=>!1});function Vw({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ne(q(E({},Uw()),{scheduleInRootZone:n})),[{provide:ne,useFactory:t},{provide:Pr,multi:!0,useFactory:()=>{let r=_(kP,{optional:!0});return()=>r.initialize()}},{provide:Pr,multi:!0,useFactory:()=>{let r=_(LP);return()=>{r.initialize()}}},e===!0?{provide:_w,useValue:!0}:[],{provide:Iw,useValue:n??yE}]}function jw(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Vw({ngZoneFactory:()=>{let i=Uw(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&tr("NgZone_CoalesceEvent"),new ne(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return at([{provide:FP,useValue:!0},{provide:$l,useValue:!1},r])}function Uw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var LP=(()=>{class t{constructor(){this.subscription=new me,this.initialized=!1,this.zone=_(ne),this.pendingTasks=_(Br)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ne.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ne.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var VP=(()=>{class t{constructor(){this.appRef=_(rn),this.taskService=_(Br),this.ngZone=_(ne),this.zonelessEnabled=_($l),this.disableScheduling=_(_w,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new me,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(_(Iw,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof fh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?U_:IE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,U_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function jP(){return typeof $localize<"u"&&$localize.locale||yl}var bp=new T("",{providedIn:"root",factory:()=>_(bp,B.Optional|B.SkipSelf)||jP()});var xh=new T("");function Bc(t){return!t.moduleRef}function UP(t){let e=Bc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ne);return n.run(()=>{Bc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(yn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Bc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(xh);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(xh);s.add(o),t.moduleRef.onDestroy(()=>{zc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return PP(r,n,()=>{let o=e.get(Lw);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(bp,yl);if(gP(s||yl),Bc(t)){let a=e.get(rn);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return BP(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function BP(t,e){let n=t.injector.get(rn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new S(-403,!1);e.push(t)}var Gc=null;function $P(t=[],e){return Ue.create({name:e,providers:[{provide:Dl,useValue:"platform"},{provide:xh,useValue:new Set([()=>Gc=null])},...t]})}function HP(t=[]){if(Gc)return Gc;let e=$P(t);return Gc=e,NP(),WP(e),e}function WP(t){t.get(Xh,null)?.forEach(n=>n())}var no=(()=>{class t{static{this.__NG_ELEMENT_ID__=zP}}return t})();function zP(t){return GP(Ze(),ce(),(t&16)===16)}function GP(t,e,n){if(Es(t)&&!n){let r=Jn(t.index,e);return new Vr(r,r)}else if(t.type&175){let r=e[_t];return new Vr(r,e)}return null}var Ph=class{constructor(){}supports(e){return Dw(e)}create(e){return new Oh(e)}},qP=(t,e)=>e,Oh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||qP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<sI(r,i,o)?n:r,a=sI(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Dw(e))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Vx(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new kh(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new _l),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _l),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},kh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Fh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},_l=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Fh,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function sI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function aI(){return new Tp([new Ph])}var Tp=(()=>{class t{static{this.\u0275prov=A({token:t,providedIn:"root",factory:aI})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||aI()),deps:[[t,new _I,new Ke]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new S(901,!1)}}return t})();function Bw(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=HP(r),o=[Vw({}),{provide:Yi,useExisting:VP},...n||[]],s=new gl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return UP({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var cI=!1;function YP(){cI||(cI=!0,_N(),dP(),EP(),pP(),Wx(),Nx(),ux(),sR())}function KP(t,e){return zl(t)}function $w(){return at([{provide:kc,useFactory:()=>{let t=!0;return Lc()&&(t=!!_(eo,{optional:!0})?.get(PE,null)),t&&tr("NgHydration"),t}},{provide:Pr,useValue:()=>{rx(!1),Lc()&&_(kc)&&(ZP(),YP())},multi:!0},{provide:LE,useFactory:()=>Lc()&&_(kc)},{provide:to,useFactory:()=>{if(Lc()&&_(kc)){let t=_(rn),e=_(Ue);return()=>{KP(t,e).then(()=>{ax(t)})}}return()=>{}},multi:!0}])}function ZP(){let t=xl(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===vN){e=n;break}if(!e)throw new S(-507,!1)}function ro(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Ms(t,e){tr("NgSignals");let n=Hy(t);return e?.equal&&(n[Ln].equal=e.equal),n}function wn(t){let e=K(null);try{return t()}finally{K(e)}}var Yw=null;function Cn(){return Yw}function Kw(t){Yw??=t}var Gl=class{};var ut=new T(""),Zw=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:()=>_(QP),providedIn:"platform"})}}return t})();var QP=(()=>{class t extends Zw{constructor(){super(),this._doc=_(ut),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cn().getBaseHref(this._doc)}onPopState(n){let r=Cn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Cn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Qw(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Hw(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Kr(t){return t&&t[0]!=="?"?"?"+t:t}var io=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:()=>_(Jw),providedIn:"root"})}}return t})(),JP=new T(""),Jw=(()=>{class t extends io{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??_(ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Qw(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Kr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Kr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Kr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(O(Zw),O(JP,8))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ns=(()=>{class t{constructor(n){this._subject=new Ce,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=tO(Hw(Ww(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Kr(r))}normalize(n){return t.stripTrailingSlash(eO(this._basePath,Ww(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Kr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Kr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Kr}static{this.joinWithSlash=Qw}static{this.stripTrailingSlash=Hw}static{this.\u0275fac=function(r){return new(r||t)(O(io))}}static{this.\u0275prov=A({token:t,factory:()=>XP(),providedIn:"root"})}}return t})();function XP(){return new Ns(O(io))}function eO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Ww(t){return t.replace(/\/index.html$/,"")}function tO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Rp(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Sp=/\s+/,zw=[],nr=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=zw,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(Sp):zw}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Sp):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Sp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(C(Lt),C(nn))}}static{this.\u0275dir=he({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var Ap=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xw=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ap(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Gw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Gw(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(C(Hr),C(Ts),C(Tp))}}static{this.\u0275dir=he({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function Gw(t,e){t.context.$implicit=e.item}var on=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Mp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){qw("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){qw("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(C(Hr),C(Ts))}}static{this.\u0275dir=he({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Mp=class{constructor(){this.$implicit=null,this.ngIf=null}};function qw(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${qe(e)}'.`)}var Np=class{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},xp=(()=>{class t{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(n){this._ngSwitch=n,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(n){this._defaultViews.push(n)}_matchCase(n){let r=n===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(n){if(this._defaultViews.length>0&&n!==this._defaultUsed){this._defaultUsed=n;for(let r of this._defaultViews)r.enforceState(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=he({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return t})(),eC=(()=>{class t{constructor(n,r,i){this.ngSwitch=i,i._addCase(),this._view=new Np(n,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(r){return new(r||t)(C(Hr),C(Ts),C(xp,9))}}static{this.\u0275dir=he({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return t})();var Te=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Zn({type:t})}static{this.\u0275inj=Kn({})}}return t})(),tC="browser",nO="server";function Rs(t){return t===nO}var ql=class{};var Kl=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var lC=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(lC||{}),Pp=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Kl,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Zl=class t extends Pp{constructor(e={}){super(e),this.type=lC.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var rO=new T("");var iO=new T(""),nC="b",rC="h",iC="s",oC="st",sC="u",aC="rt",Yl=new T(""),oO=["GET","HEAD"];function sO(t,e){let h=_(Yl),{isCacheActive:n}=h,r=Oy(h,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!oO.includes(o)||!r.includeRequestsWithAuthHeaders&&aO(t)||r.filter?.(t)===!1)return e(t);let s=_(eo),a=_(iO,{optional:!0}),c=Rs(_(wt));if(a&&!c)throw new S(2803,!1);let l=c&&a?dO(t.url,a):t.url,u=lO(t,l),d=s.get(u,null),f=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(f=i.includeHeaders),d){let{[nC]:p,[aC]:D,[rC]:M,[iC]:k,[oC]:ue,[sC]:de}=d,we=p;switch(D){case"arraybuffer":we=new TextEncoder().encode(p).buffer;break;case"blob":we=new Blob([p]);break}let At=new Kl(M);return N(new Zl({body:we,headers:At,status:k,statusText:ue,url:de}))}return e(t).pipe(Ee(p=>{p instanceof Zl&&c&&s.set(u,{[nC]:p.body,[rC]:cO(p.headers,f),[iC]:p.status,[oC]:p.statusText,[sC]:l,[aC]:t.responseType})}))}function aO(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}function cO(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function cC(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function lO(t,e){let{params:n,method:r,responseType:i}=t,o=cC(n),s=t.serializeBody();s instanceof URLSearchParams?s=cC(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=uO(a);return c}function uO(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function uC(t){return[{provide:Yl,useFactory:()=>(tr("NgHttpTransferCache"),E({isCacheActive:!0},t))},{provide:rO,useValue:sO,multi:!0,deps:[eo,Yl]},{provide:to,multi:!0,useFactory:()=>{let e=_(rn),n=_(Yl);return()=>{zl(e).then(()=>{n.isCacheActive=!1})}}}]}function dO(t,e){let n=new URL(t,"resolve://").origin,r=e[n];return r?t.replace(n,r):t}var Fp=class extends Gl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Lp=class t extends Fp{static makeCurrent(){Kw(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=fO();return n==null?null:hO(n)}resetBaseElement(){xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Rp(document.cookie,e)}},xs=null;function fO(){return xs=xs||document.querySelector("base"),xs?xs.getAttribute("href"):null}function hO(t){return new URL(t,document.baseURI).pathname}var pO=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac})}}return t})(),Vp=new T(""),pC=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(O(Vp),O(ne))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac})}}return t})(),Ql=class{constructor(e){this._doc=e}},Op="ng-app-id",mC=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rs(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Op}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Op),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Op,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(O(ut),O(Pl),O(ep,8),O(wt))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac})}}return t})(),kp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Bp=/%COMP%/g,gC="%COMP%",mO=`_nghost-${gC}`,gO=`_ngcontent-${gC}`,vO=!0,yO=new T("",{providedIn:"root",factory:()=>vO});function _O(t){return gO.replace(Bp,t)}function IO(t){return mO.replace(Bp,t)}function vC(t,e){return e.map(n=>n.replace(Bp,t))}var dC=(()=>{class t{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Rs(a),this.defaultRenderer=new Ps(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Qt.ShadowDom&&(r=q(E({},r),{encapsulation:Qt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Jl?i.applyToHost(n):i instanceof Os&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Qt.Emulated:o=new Jl(c,l,r,this.appId,u,s,a,d);break;case Qt.ShadowDom:return new jp(c,l,n,r,s,a,this.nonce,d);default:o=new Os(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(O(pC),O(mC),O(Pl),O(yO),O(ut),O(wt),O(ne),O(ep))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac})}}return t})(),Ps=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(kp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(fC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(fC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new S(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=kp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=kp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(_n.DashCase|_n.Important)?e.style.setProperty(n,r,i&_n.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_n.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Cn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function fC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var jp=class extends Ps{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=vC(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Os=class extends Ps{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?vC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Jl=class extends Os{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=_O(l),this.hostAttr=IO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},EO=(()=>{class t extends Ql{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(O(ut))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac})}}return t})(),hC=["alt","control","meta","shift"],wO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},CO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},DO=(()=>{class t extends Ql{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cn().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),hC.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=wO[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),hC.forEach(s=>{if(s!==i){let a=CO[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(O(ut))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac})}}return t})();function yC(t,e){return Bw(E({rootComponent:t},bO(e)))}function bO(t){return{appProviders:[...NO,...t?.providers??[]],platformProviders:MO}}function TO(){Lp.makeCurrent()}function SO(){return new yn}function AO(){return AE(document),document}var MO=[{provide:wt,useValue:tC},{provide:Xh,useValue:TO,multi:!0},{provide:ut,useFactory:AO,deps:[]}];var NO=[{provide:Dl,useValue:"root"},{provide:yn,useFactory:SO,deps:[]},{provide:Vp,useClass:EO,multi:!0,deps:[ut,ne,wt]},{provide:Vp,useClass:DO,multi:!0,deps:[ut]},dC,mC,pC,{provide:Zi,useExisting:dC},{provide:ql,useClass:pO,deps:[]},[]];var _C=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(O(ut))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Up=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t}(Up||{});function IC(...t){let e=[],n=new Set,r=n.has(Up.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);return at([[],$w(),n.has(Up.NoHttpTransferCache)||r?[]:uC({}),e])}var j="primary",Zs=Symbol("RouteTitle"),Gp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function uo(t){return new Gp(t)}function xO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function PO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!sn(t[n],e[n]))return!1;return!0}function sn(t,e){let n=t?qp(t):void 0,r=e?qp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!AC(t[i],e[i]))return!1;return!0}function qp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function AC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function MC(t){return t.length>0?t[t.length-1]:null}function ir(t){return Df(t)?t:Yr(t)?oe(Promise.resolve(t)):N(t)}var OO={exact:RC,subset:xC},NC={exact:kO,subset:FO,ignored:()=>!0};function EC(t,e,n){return OO[n.paths](t.root,e.root,n.matrixParams)&&NC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function kO(t,e){return sn(t,e)}function RC(t,e,n){if(!Jr(t.segments,e.segments)||!tu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!RC(t.children[r],e.children[r],n))return!1;return!0}function FO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>AC(t[n],e[n]))}function xC(t,e,n){return PC(t,e,e.segments,n)}function PC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Jr(i,n)||e.hasChildren()||!tu(i,n,r))}else if(t.segments.length===n.length){if(!Jr(t.segments,n)||!tu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!xC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Jr(t.segments,i)||!tu(t.segments,i,r)||!t.children[j]?!1:PC(t.children[j],e,o,r)}}function tu(t,e,n){return e.every((r,i)=>NC[n](t[i].parameters,r.parameters))}var bn=class{constructor(e=new te([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=uo(this.queryParams),this._queryParamMap}toString(){return jO.serialize(this)}},te=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nu(this)}},Qr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=uo(this.parameters),this._parameterMap}toString(){return kC(this)}};function LO(t,e){return Jr(t,e)&&t.every((n,r)=>sn(n.parameters,e[r].parameters))}function Jr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function VO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===j&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==j&&(n=n.concat(e(i,r)))}),n}var _m=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:()=>new Bs,providedIn:"root"})}}return t})(),Bs=class{parse(e){let n=new Kp(e);return new bn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ks(e.root,!0)}`,r=$O(e.queryParams),i=typeof e.fragment=="string"?`#${UO(e.fragment)}`:"";return`${n}${r}${i}`}},jO=new Bs;function nu(t){return t.segments.map(e=>kC(e)).join("/")}function ks(t,e){if(!t.hasChildren())return nu(t);if(e){let n=t.children[j]?ks(t.children[j],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==j&&r.push(`${i}:${ks(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=VO(t,(r,i)=>i===j?[ks(t.children[j],!1)]:[`${i}:${ks(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[j]!=null?`${nu(t)}/${n[0]}`:`${nu(t)}/(${n.join("//")})`}}function OC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xl(t){return OC(t).replace(/%3B/gi,";")}function UO(t){return encodeURI(t)}function Yp(t){return OC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ru(t){return decodeURIComponent(t)}function wC(t){return ru(t.replace(/\+/g,"%20"))}function kC(t){return`${Yp(t.path)}${BO(t.parameters)}`}function BO(t){return Object.entries(t).map(([e,n])=>`;${Yp(e)}=${Yp(n)}`).join("")}function $O(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Xl(n)}=${Xl(i)}`).join("&"):`${Xl(n)}=${Xl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var HO=/^[^\/()?;#]+/;function $p(t){let e=t.match(HO);return e?e[0]:""}var WO=/^[^\/()?;=#]+/;function zO(t){let e=t.match(WO);return e?e[0]:""}var GO=/^[^=?&#]+/;function qO(t){let e=t.match(GO);return e?e[0]:""}var YO=/^[^&#]+/;function KO(t){let e=t.match(YO);return e?e[0]:""}var Kp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new te([],{}):new te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[j]=new te(e,n)),r}parseSegment(){let e=$p(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new Qr(ru(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=zO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=$p(this.remaining);i&&(r=i,this.capture(r))}e[ru(n)]=ru(r)}parseQueryParam(e){let n=qO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=KO(this.remaining);s&&(r=s,this.capture(r))}let i=wC(n),o=wC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=$p(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new S(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=j);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[j]:new te([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}};function FC(t){return t.segments.length>0?new te([],{[j]:t}):t}function LC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=LC(i);if(r===j&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new te(t.segments,e);return ZO(n)}function ZO(t){if(t.numberOfChildren===1&&t.children[j]){let e=t.children[j];return new te(t.segments.concat(e.segments),e.children)}return t}function Xr(t){return t instanceof bn}function QO(t,e,n=null,r=null){let i=VC(t);return jC(i,e,n,r)}function VC(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new te(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=FC(r);return e??i}function jC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Hp(i,i,i,n,r);let o=JO(e);if(o.toRoot())return Hp(i,i,new te([],{}),n,r);let s=XO(o,i,t),a=s.processChildren?Vs(s.segmentGroup,s.index,o.commands):BC(s.segmentGroup,s.index,o.commands);return Hp(i,s.segmentGroup,a,n,r)}function iu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function $s(t){return typeof t=="object"&&t!=null&&t.outlets}function Hp(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=UC(t,e,n);let a=FC(LC(s));return new bn(a,o,i)}function UC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=UC(o,e,n)}),new te(t.segments,r)}var ou=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&iu(r[0]))throw new S(4003,!1);let i=r.find($s);if(i&&i!==MC(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function JO(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ou(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ou(n,e,r)}var ao=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function XO(t,e,n){if(t.isAbsolute)return new ao(e,!0,0);if(!n)return new ao(e,!1,NaN);if(n.parent===null)return new ao(n,!0,0);let r=iu(t.commands[0])?0:1,i=n.segments.length-1+r;return ek(n,i,t.numberOfDoubleDots)}function ek(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new ao(r,!1,i-o)}function tk(t){return $s(t[0])?t[0].outlets:{[j]:t}}function BC(t,e,n){if(t??=new te([],{}),t.segments.length===0&&t.hasChildren())return Vs(t,e,n);let r=nk(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new te(t.segments.slice(0,r.pathIndex),{});return o.children[j]=new te(t.segments.slice(r.pathIndex),t.children),Vs(o,0,i)}else return r.match&&i.length===0?new te(t.segments,{}):r.match&&!t.hasChildren()?Zp(t,e,n):r.match?Vs(t,0,i):Zp(t,e,n)}function Vs(t,e,n){if(n.length===0)return new te(t.segments,{});{let r=tk(n),i={};if(Object.keys(r).some(o=>o!==j)&&t.children[j]&&t.numberOfChildren===1&&t.children[j].segments.length===0){let o=Vs(t.children[j],e,n);return new te(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=BC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new te(t.segments,i)}}function nk(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if($s(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!DC(c,l,s))return o;r+=2}else{if(!DC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if($s(o)){let c=rk(o.outlets);return new te(r,c)}if(i===0&&iu(n[0])){let c=t.segments[e];r.push(new Qr(c.path,CC(n[0]))),i++;continue}let s=$s(o)?o.outlets[j]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&iu(a)?(r.push(new Qr(s,CC(a))),i+=2):(r.push(new Qr(s,{})),i++)}return new te(r,{})}function rk(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Zp(new te([],{}),0,r))}),e}function CC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function DC(t,e,n){return t==n.path&&sn(e,n.parameters)}var js="imperative",Le=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Le||{}),Ct=class{constructor(e,n){this.id=e,this.url=n}},Hs=class extends Ct{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Le.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},rr=class extends Ct{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Le.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ft=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ft||{}),Qp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Qp||{}),Dn=class extends Ct{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Le.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ei=class extends Ct{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Le.NavigationSkipped}},Ws=class extends Ct{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Le.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},su=class extends Ct{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jp=class extends Ct{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xp=class extends Ct{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Le.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},em=class extends Ct{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tm=class extends Ct{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nm=class{constructor(e){this.route=e,this.type=Le.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rm=class{constructor(e){this.route=e,this.type=Le.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},im=class{constructor(e){this.snapshot=e,this.type=Le.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},om=class{constructor(e){this.snapshot=e,this.type=Le.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sm=class{constructor(e){this.snapshot=e,this.type=Le.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},am=class{constructor(e){this.snapshot=e,this.type=Le.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zs=class{},fo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function ik(t,e){return t.providers&&!t._injector&&(t._injector=Ip(t.providers,e,`Route: ${t.path}`)),t._injector??e}function $t(t){return t.outlet||j}function ok(t,e){let n=t.filter(r=>$t(r)===e);return n.push(...t.filter(r=>$t(r)!==e)),n}function Qs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var cm=class{get injector(){return Qs(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new hu(this.rootInjector),this.attachRef=null}},hu=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new cm(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(O(yt))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),au=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=lm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=lm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=um(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return um(e,this._root).map(n=>n.value)}};function lm(t,e){if(t===e.value)return e;for(let n of e.children){let r=lm(t,n);if(r)return r}return null}function um(t,e){if(t===e.value)return[e];for(let n of e.children){let r=um(t,n);if(r.length)return r.unshift(e),r}return[]}var dt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function so(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var cu=class extends au{constructor(e,n){super(e),this.snapshot=n,Im(this,e)}toString(){return this.snapshot.toString()}};function $C(t){let e=sk(t),n=new ke([new Qr("",{})]),r=new ke({}),i=new ke({}),o=new ke({}),s=new ke(""),a=new Tn(n,r,o,s,i,j,t,e.root);return a.snapshot=e.root,new cu(new dt(a,[]),e)}function sk(t){let e={},n={},r={},i="",o=new co([],e,r,i,n,j,t,null,{});return new uu("",new dt(o,[]))}var Tn=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(x(l=>l[Zs]))??N(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(x(e=>uo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(x(e=>uo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function lu(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:E(E({},e.params),t.params),data:E(E({},e.data),t.data),resolve:E(E(E(E({},t.data),e.data),i?.data),t._resolvedData)}:r={params:E({},t.params),data:E({},t.data),resolve:E(E({},t.data),t._resolvedData??{})},i&&WC(i)&&(r.resolve[Zs]=i.title),r}var co=class{get title(){return this.data?.[Zs]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=uo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=uo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},uu=class extends au{constructor(e,n){super(n),this.url=e,Im(this,n)}toString(){return HC(this._root)}};function Im(t,e){e.value._routerState=t,e.children.forEach(n=>Im(t,n))}function HC(t){let e=t.children.length>0?` { ${t.children.map(HC).join(", ")} } `:"";return`${t.value}${e}`}function Wp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,sn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),sn(e.params,n.params)||t.paramsSubject.next(n.params),PO(e.url,n.url)||t.urlSubject.next(n.url),sn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function dm(t,e){let n=sn(t.params,e.params)&&LO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||dm(t.parent,e.parent))}function WC(t){return typeof t.title=="string"||t.title===null}var Js=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=j,this.activateEvents=new Ce,this.deactivateEvents=new Ce,this.attachEvents=new Ce,this.detachEvents=new Ce,this.parentContexts=_(hu),this.location=_(Hr),this.changeDetector=_(no),this.inputBinder=_(Em,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new fm(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=he({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Qn]})}}return t})(),fm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Tn?this.route:e===hu?this.childContexts:this.parent.get(e,n)}},Em=new T("");function ak(t,e,n){let r=Gs(t,e._root,n?n._root:void 0);return new cu(r,e)}function Gs(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=ck(t,e,n);return new dt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Gs(t,a)),s}}let r=lk(e.value),i=e.children.map(o=>Gs(t,o));return new dt(r,i)}}function ck(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Gs(t,r,i);return Gs(t,r)})}function lk(t){return new Tn(new ke(t.url),new ke(t.params),new ke(t.queryParams),new ke(t.fragment),new ke(t.data),t.outlet,t.component,t)}var qs=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},zC="ngNavigationCancelingError";function du(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Xr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=GC(!1,ft.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function GC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[zC]=!0,n.cancellationCode=e,n}function uk(t){return qC(t)&&Xr(t.url)}function qC(t){return!!t&&t[zC]}var dk=(t,e,n,r)=>x(i=>(new hm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),hm=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Wp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=so(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=so(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=so(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=so(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new am(o.value.snapshot))}),e.children.length&&this.forwardEvent(new om(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Wp(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Wp(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},fu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},lo=class{constructor(e,n){this.component=e,this.route=n}};function fk(t,e,n){let r=t._root,i=e?e._root:null;return Fs(r,i,n,[r.value])}function hk(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function po(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!fI(t)?t:e.get(t):r}function Fs(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=so(e);return t.children.forEach(s=>{pk(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Us(a,n.getContext(s),i)),i}function pk(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=mk(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new fu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Fs(t,e,a?a.children:null,r,i):Fs(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new lo(a.outlet.component,s))}else s&&Us(e,a,i),i.canActivateChecks.push(new fu(r)),o.component?Fs(t,null,a?a.children:null,r,i):Fs(t,null,n,r,i);return i}function mk(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Jr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Jr(t.url,e.url)||!sn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dm(t,e)||!sn(t.queryParams,e.queryParams);case"paramsChange":default:return!dm(t,e)}}function Us(t,e,n){let r=so(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Us(s,e.children.getContext(o),n):Us(s,null,n):Us(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new lo(e.outlet.component,i)):n.canDeactivateChecks.push(new lo(null,i)):n.canDeactivateChecks.push(new lo(null,i))}function Xs(t){return typeof t=="function"}function gk(t){return typeof t=="boolean"}function vk(t){return t&&Xs(t.canLoad)}function yk(t){return t&&Xs(t.canActivate)}function _k(t){return t&&Xs(t.canActivateChild)}function Ik(t){return t&&Xs(t.canDeactivate)}function Ek(t){return t&&Xs(t.canMatch)}function YC(t){return t instanceof gn||t?.name==="EmptyError"}var eu=Symbol("INITIAL_VALUE");function ho(){return Fe(t=>Rc(t.map(e=>e.pipe(mt(1),Rf(eu)))).pipe(x(e=>{for(let n of e)if(n!==!0){if(n===eu)return eu;if(n===!1||wk(n))return n}return!0}),pt(e=>e!==eu),mt(1)))}function wk(t){return Xr(t)||t instanceof qs}function Ck(t,e){return Ie(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?N(q(E({},n),{guardsResult:!0})):Dk(s,r,i,t).pipe(Ie(a=>a&&gk(a)?bk(r,o,t,e):N(a)),x(a=>q(E({},n),{guardsResult:a})))})}function Dk(t,e,n,r){return oe(t).pipe(Ie(i=>Nk(i.component,i.route,n,e,r)),Nt(i=>i!==!0,!0))}function bk(t,e,n,r){return oe(e).pipe(Rr(i=>Un(Sk(i.route.parent,r),Tk(i.route,r),Mk(t,i.path,n),Ak(t,i.route,n))),Nt(i=>i!==!0,!0))}function Tk(t,e){return t!==null&&e&&e(new sm(t)),N(!0)}function Sk(t,e){return t!==null&&e&&e(new im(t)),N(!0)}function Ak(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(o=>xc(()=>{let s=Qs(e)??n,a=po(o,s),c=yk(a)?a.canActivate(e,t):en(s,()=>a(e,t));return ir(c).pipe(Nt())}));return N(i).pipe(ho())}function Mk(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>hk(s)).filter(s=>s!==null).map(s=>xc(()=>{let a=s.guards.map(c=>{let l=Qs(s.node)??n,u=po(c,l),d=_k(u)?u.canActivateChild(r,t):en(l,()=>u(r,t));return ir(d).pipe(Nt())});return N(a).pipe(ho())}));return N(o).pipe(ho())}function Nk(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return N(!0);let s=o.map(a=>{let c=Qs(e)??i,l=po(a,c),u=Ik(l)?l.canDeactivate(t,e,n,r):en(c,()=>l(t,e,n,r));return ir(u).pipe(Nt())});return N(s).pipe(ho())}function Rk(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return N(!0);let o=i.map(s=>{let a=po(s,t),c=vk(a)?a.canLoad(e,n):en(t,()=>a(e,n));return ir(c)});return N(o).pipe(ho(),KC(r))}function KC(t){return gf(Ee(e=>{if(typeof e!="boolean")throw du(t,e)}),x(e=>e===!0))}function xk(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return N(!0);let o=i.map(s=>{let a=po(s,t),c=Ek(a)?a.canMatch(e,n):en(t,()=>a(e,n));return ir(c)});return N(o).pipe(ho(),KC(r))}var Ys=class{constructor(e){this.segmentGroup=e||null}},Ks=class extends Error{constructor(e){super(),this.urlTree=e}};function oo(t){return xi(new Ys(t))}function Pk(t){return xi(new S(4e3,!1))}function Ok(t){return xi(GC(!1,ft.GuardRejected))}var pm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[j])return Pk(`${e.redirectTo}`);i=i.children[j]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:D}=i,M=en(o,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:D}));if(M instanceof bn)throw new Ks(M);n=M}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Ks(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new bn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new te(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new S(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},mm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kk(t,e,n,r,i){let o=ZC(t,e,n);return o.matched?(r=ik(e,r),xk(r,e,n,i).pipe(x(s=>s===!0?o:E({},mm)))):N(o)}function ZC(t,e,n){if(e.path==="**")return Fk(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?E({},mm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xO)(n,t,e);if(!i)return E({},mm);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?E(E({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Fk(t){return{matched:!0,parameters:t.length>0?MC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function bC(t,e,n,r){return n.length>0&&jk(t,n,r)?{segmentGroup:new te(e,Vk(r,new te(n,t.children))),slicedSegments:[]}:n.length===0&&Uk(t,n,r)?{segmentGroup:new te(t.segments,Lk(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new te(t.segments,t.children),slicedSegments:n}}function Lk(t,e,n,r){let i={};for(let o of n)if(pu(t,e,o)&&!r[$t(o)]){let s=new te([],{});i[$t(o)]=s}return E(E({},r),i)}function Vk(t,e){let n={};n[j]=e;for(let r of t)if(r.path===""&&$t(r)!==j){let i=new te([],{});n[$t(r)]=i}return n}function jk(t,e,n){return n.some(r=>pu(t,e,r)&&$t(r)!==j)}function Uk(t,e,n){return n.some(r=>pu(t,e,r))}function pu(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Bk(t,e,n){return e.length===0&&!t.children[n]}var gm=class{};function $k(t,e,n,r,i,o,s="emptyOnly"){return new vm(t,e,n,r,i,s,o).recognize()}var Hk=31,vm=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new pm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new S(4002,`'${e.segmentGroup}'`)}recognize(){let e=bC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(x(({children:n,rootSnapshot:r})=>{let i=new dt(r,n),o=new uu("",i),s=QO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new co([],Object.freeze({}),Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),j,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,j,n).pipe(x(r=>({children:r,rootSnapshot:n})),Xe(r=>{if(r instanceof Ks)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ys?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(x(s=>s instanceof dt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return oe(o).pipe(Rr(s=>{let a=r.children[s],c=ok(n,s);return this.processSegmentGroup(e,c,a,s,i)}),as((s,a)=>(s.push(...a),s)),Bn(null),Nf(),Ie(s=>{if(s===null)return oo(r);let a=QC(s);return Wk(a),N(a)}))}processSegment(e,n,r,i,o,s,a){return oe(n).pipe(Rr(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Xe(l=>{if(l instanceof Ys)return N(null);throw l}))),Nt(c=>!!c),Xe(c=>{if(YC(c))return Bk(r,i,o)?N(new gm):oo(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return $t(r)!==s&&(s===j||!pu(i,o,r))?oo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):oo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=ZC(n,i,o);if(!c)return oo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Hk&&(this.allowRedirects=!1));let h=new co(o,l,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,TC(i),$t(i),i.component??i._loadedComponent??null,i,SC(i)),p=lu(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let D=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(Ie(M=>this.processSegment(e,r,n,M.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=kk(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Fe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Fe(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new co(f,d,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,TC(r),$t(r),r.component??r._loadedComponent??null,r,SC(r)),D=lu(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(D.params),p.data=Object.freeze(D.data);let{segmentGroup:M,slicedSegments:k}=bC(n,f,h,l);if(k.length===0&&M.hasChildren())return this.processChildren(u,l,M,p).pipe(x(de=>new dt(p,de)));if(l.length===0&&k.length===0)return N(new dt(p,[]));let ue=$t(r)===o;return this.processSegment(u,l,M,k,ue?j:o,!0,p).pipe(x(de=>new dt(p,de instanceof dt?[de]:[])))}))):oo(n)))}getChildConfig(e,n,r){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):Rk(e,n,r,this.urlSerializer).pipe(Ie(i=>i?this.configLoader.loadChildren(e,n).pipe(Ee(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Ok(n))):N({routes:[],injector:e})}};function Wk(t){t.sort((e,n)=>e.value.outlet===j?-1:n.value.outlet===j?1:e.value.outlet.localeCompare(n.value.outlet))}function zk(t){let e=t.value.routeConfig;return e&&e.path===""}function QC(t){let e=[],n=new Set;for(let r of t){if(!zk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=QC(r.children);e.push(new dt(r.value,i))}return e.filter(r=>!n.has(r))}function TC(t){return t.data||{}}function SC(t){return t.resolve||{}}function Gk(t,e,n,r,i,o){return Ie(s=>$k(t,e,n,r,s.extractedUrl,i,o).pipe(x(({state:a,tree:c})=>q(E({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function qk(t,e){return Ie(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of JC(c))s.add(l);let a=0;return oe(s).pipe(Rr(c=>o.has(c)?Yk(c,r,t,e):(c.data=lu(c,c.parent,t).resolve,N(void 0))),Ee(()=>a++),Oi(1),Ie(c=>a===s.size?N(n):ze))})}function JC(t){let e=t.children.map(n=>JC(n)).flat();return[t,...e]}function Yk(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!WC(i)&&(o[Zs]=i.title),Kk(o,t,e,r).pipe(x(s=>(t._resolvedData=s,t.data=lu(t,t.parent,n).resolve,null)))}function Kk(t,e,n,r){let i=qp(t);if(i.length===0)return N({});let o={};return oe(i).pipe(Ie(s=>Zk(t[s],e,n,r).pipe(Nt(),Ee(a=>{if(a instanceof qs)throw du(new Bs,a);o[s]=a}))),Oi(1),ss(o),Xe(s=>YC(s)?ze:xi(s)))}function Zk(t,e,n,r){let i=Qs(e)??r,o=po(t,i),s=o.resolve?o.resolve(e,n):en(i,()=>o(e,n));return ir(s)}function zp(t){return Fe(e=>{let n=t(e);return n?oe(n).pipe(x(()=>e)):N(e)})}var XC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===j);return r}getResolvedTitleForRoute(n){return n.data[Zs]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:()=>_(Qk),providedIn:"root"})}}return t})(),Qk=(()=>{class t extends XC{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(O(_C))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),wm=new T("",{providedIn:"root",factory:()=>({})}),Jk=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=X({type:t,selectors:[["ng-component"]],standalone:!0,features:[ee],decls:1,vars:0,template:function(r,i){r&1&&J(0,"router-outlet")},dependencies:[Js],encapsulation:2})}}return t})();function Cm(t){let e=t.children&&t.children.map(Cm),n=e?q(E({},t),{children:e}):E({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==j&&(n.component=Jk),n}var Dm=new T(""),Xk=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_(Dp)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return N(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=ir(n.loadComponent()).pipe(x(eD),Ee(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Pi(()=>{this.componentLoaders.delete(n)})),i=new Si(r,()=>new Me).pipe(Ti());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return N({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=e1(r,this.compiler,n,this.onLoadEndListener).pipe(Pi(()=>{this.childrenLoaders.delete(r)})),s=new Si(o,()=>new Me).pipe(Ti());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function e1(t,e,n,r){return ir(t.loadChildren()).pipe(x(eD),Ie(i=>i instanceof vs||Array.isArray(i)?N(i):oe(e.compileModuleAsync(i))),x(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Dm,[],{optional:!0,self:!0}).flat()),{routes:s.map(Cm),injector:o}}))}function t1(t){return t&&typeof t=="object"&&"default"in t}function eD(t){return t1(t)?t.default:t}var bm=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:()=>_(n1),providedIn:"root"})}}return t})(),n1=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),r1=new T("");var i1=new T(""),o1=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Me,this.transitionAbortSubject=new Me,this.configLoader=_(Xk),this.environmentInjector=_(yt),this.urlSerializer=_(_m),this.rootContexts=_(hu),this.location=_(Ns),this.inputBindingEnabled=_(Em,{optional:!0})!==null,this.titleStrategy=_(XC),this.options=_(wm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_(bm),this.createViewTransition=_(r1,{optional:!0}),this.navigationErrorHandler=_(i1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let n=i=>this.events.next(new nm(i)),r=i=>this.events.next(new rm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(q(E(E({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:js,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(o=>o.id!==0),x(o=>q(E({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Fe(o=>{let s=!1,a=!1;return N(o).pipe(Fe(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ft.SupersededByNewNavigation),ze;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?q(E({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new ei(c.id,this.urlSerializer.serialize(c.rawUrl),d,Qp.IgnoredSameUrlNavigation)),c.resolve(!1),ze}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return N(c).pipe(Fe(d=>{let f=this.transitions?.getValue();return this.events.next(new Hs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?ze:Promise.resolve(d)}),Gk(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ee(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=q(E({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new su(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:D}=c,M=new Hs(d,this.urlSerializer.serialize(f),h,p);this.events.next(M);let k=$C(this.rootComponentType).snapshot;return this.currentTransition=o=q(E({},c),{targetSnapshot:k,urlAfterRedirects:f,extras:q(E({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,N(o)}else{let d="";return this.events.next(new ei(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Qp.IgnoredByUrlHandlingStrategy)),c.resolve(!1),ze}}),Ee(c=>{let l=new Jp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),x(c=>(this.currentTransition=o=q(E({},c),{guards:fk(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Ck(this.environmentInjector,c=>this.events.next(c)),Ee(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw du(this.urlSerializer,c.guardsResult);let l=new Xp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),pt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ft.GuardRejected),!1)),zp(c=>{if(c.guards.canActivateChecks.length)return N(c).pipe(Ee(l=>{let u=new em(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Fe(l=>{let u=!1;return N(l).pipe(qk(this.paramsInheritanceStrategy,this.environmentInjector),Ee({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",ft.NoDataFromResolver)}}))}),Ee(l=>{let u=new tm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),zp(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ee(f=>{u.component=f}),x(()=>{})));for(let f of u.children)d.push(...l(f));return d};return Rc(l(c.targetSnapshot.root)).pipe(Bn(null),mt(1))}),zp(()=>this.afterPreactivation()),Fe(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?oe(u).pipe(x(()=>o)):N(o)}),x(c=>{let l=ak(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=q(E({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ee(()=>{this.events.next(new zs)}),dk(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),mt(1),Ee({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new rr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),xf(this.transitionAbortSubject.pipe(Ee(c=>{throw c}))),Pi(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",ft.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xe(c=>{if(a=!0,qC(c))this.events.next(new Dn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),uk(c)?this.events.next(new fo(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ws(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let u=en(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof qs){let{message:d,cancellationCode:f}=du(this.urlSerializer,u);this.events.next(new Dn(o.id,this.urlSerializer.serialize(o.extractedUrl),d,f)),this.events.next(new fo(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=n.errorHandler(c);o.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return ze}))}))}cancelNavigationTransition(n,r,i){let o=new Dn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function s1(t){return t!==js}var a1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:()=>_(c1),providedIn:"root"})}}return t})(),ym=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},c1=(()=>{class t extends ym{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})()}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),tD=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:()=>_(l1),providedIn:"root"})}}return t})(),l1=(()=>{class t extends tD{constructor(){super(...arguments),this.location=_(Ns),this.urlSerializer=_(_m),this.options=_(wm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_(bm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new bn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$C(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Hs)this.stateMemento=this.createStateMemento();else if(n instanceof ei)this.rawUrlTree=r.initialUrl;else if(n instanceof su){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof zs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Dn&&(n.code===ft.GuardRejected||n.code===ft.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ws?this.restoreHistory(r,!0):n instanceof rr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof bn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=E(E({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=E(E({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})()}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ls=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ls||{});function u1(t,e){t.events.pipe(pt(n=>n instanceof rr||n instanceof Dn||n instanceof Ws||n instanceof ei),x(n=>n instanceof rr||n instanceof ei?Ls.COMPLETE:(n instanceof Dn?n.code===ft.Redirect||n.code===ft.SupersededByNewNavigation:!1)?Ls.REDIRECTING:Ls.FAILED),pt(n=>n!==Ls.REDIRECTING),mt(1)).subscribe(()=>{e()})}function d1(t){throw t}var f1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},h1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ve=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=_(Wl),this.stateManager=_(tD),this.options=_(wm,{optional:!0})||{},this.pendingTasks=_(Br),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_(o1),this.urlSerializer=_(_m),this.location=_(Ns),this.urlHandlingStrategy=_(bm),this._events=new Me,this.errorHandler=this.options.errorHandler||d1,this.navigated=!1,this.routeReuseStrategy=_(a1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_(Dm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_(Em,{optional:!0}),this.eventsSubscription=new me,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dn&&r.code!==ft.Redirect&&r.code!==ft.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof rr)this.navigated=!0;else if(r instanceof fo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=E({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||s1(i.source)},s);this.scheduleNavigation(a,js,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}m1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),js,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=E({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Cm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=E(E({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=VC(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return jC(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Xr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,js,null,r)}navigate(n,r={skipLocationChange:!1}){return p1(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=E({},f1):r===!1?i=E({},h1):i=r,Xr(n))return EC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return EC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return u1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function p1(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new S(4008,!1)}function m1(t){return!(t instanceof zs)&&!(t instanceof fo)}var or=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Me,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof rr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Xr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:jE(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Xr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(C(Ve),C(Tn),Zh("tabindex"),C(nn),C(Lt),C(io))}}static{this.\u0275dir=he({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&se("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Wr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ro],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ro],replaceUrl:[2,"replaceUrl","replaceUrl",ro],routerLink:"routerLink"},standalone:!0,features:[_p,Qn]})}}return t})();var g1=new T("");function nD(t,...e){return at([{provide:Dm,multi:!0,useValue:t},[],{provide:Tn,useFactory:v1,deps:[Ve]},{provide:to,multi:!0,useFactory:y1},e.map(n=>n.\u0275providers)])}function v1(t){return t.routerState.root}function y1(){let t=_(Ue);return e=>{let n=t.get(rn);if(e!==n.components[0])return;let r=t.get(Ve),i=t.get(_1);t.get(I1)===1&&r.initialNavigation(),t.get(E1,null,B.Optional)?.setUpPreloading(),t.get(g1,null,B.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var _1=new T("",{factory:()=>new Me}),I1=new T("",{providedIn:"root",factory:()=>1});var E1=new T("");var mu=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=X({type:t,selectors:[["app-stats"]],standalone:!0,features:[ee],decls:2,vars:0,template:function(n,r){n&1&&(v(0,"p"),y(1,"stats works!"),g())}})};var Sm={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var I=function(t,e){if(!t)throw ti(e)},ti=function(t){return new Error("Firebase Database ("+Sm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var iD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},w1=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},vu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new Am;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Am=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Nm=function(t){let e=iD(t);return vu.encodeByteArray(e,!0)},ea=function(t){return Nm(t).replace(/\./g,"")},ta=function(t){try{return vu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oD(t){return sD(void 0,t)}function sD(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!C1(n)||(t[n]=sD(t[n],e[n]));return t}function C1(t){return t!=="__proto__"}function D1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var b1=()=>D1().__FIREBASE_DEFAULTS__,T1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ta(t[1]);return e&&JSON.parse(e)},Rm=()=>{try{return b1()||T1()||S1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xm=t=>{var e,n;return(n=(e=Rm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aD=t=>{let e=xm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pm=()=>{var t;return(t=Rm())===null||t===void 0?void 0:t.config},Om=t=>{var e;return(e=Rm())===null||e===void 0?void 0:e[`_${t}`]};var sr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function cD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ea(JSON.stringify(n)),ea(JSON.stringify(s)),""].join(".")}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function na(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function lD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yu(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dD(){let t=Be();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function an(){return Sm.NODE_CLIENT===!0||Sm.NODE_ADMIN===!0}function fD(){try{return typeof indexedDB=="object"}catch{return!1}}function hD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var A1="FirebaseError",Ht=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=A1,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sn.prototype.create)}},Sn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?M1(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ht(i,a,r)}};function M1(t,e){return t.replace(N1,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var N1=/\{\$([^}]+)}/g;function go(t){return JSON.parse(t)}function De(t){return JSON.stringify(t)}var pD=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=go(ta(o[0])||""),n=go(ta(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var mD=function(t){let e=pD(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},gD=function(t){let e=pD(t).claims;return typeof e=="object"&&e.admin===!0};function cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ni(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ra(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ia(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function vo(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(rD(o)&&rD(s)){if(!vo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function rD(t){return t!==null&&typeof t=="object"}function ar(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function _o(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var gu=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function vD(t,e){let n=new Mm(t,e);return n.subscribe.bind(n)}var Mm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");R1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Tm),i.error===void 0&&(i.error=Tm),i.complete===void 0&&(i.complete=Tm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function R1(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tm(){}function _u(t,e){return`${t} failed: ${e} argument `}var yD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,I(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oa=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var m6=4*60*60*1e3;function Ne(t){return t&&t._delegate?t._delegate:t}var Dt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ri="[DEFAULT]";var Iu=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new sr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P1(e))try{this.getOrInitializeService({instanceIdentifier:ri})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ri){return this.instances.has(e)}getOptions(e=ri){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:x1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ri){return this.component?this.component.multipleInstances?e:ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function x1(t){return t===ri?void 0:t}function P1(t){return t.instantiationMode==="EAGER"}var sa=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Iu(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var O1=[],re=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(re||{}),k1={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},F1=re.INFO,L1={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},V1=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=L1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},cr=class{constructor(e){this.name=e,this._logLevel=F1,this._logHandler=V1,this._userLogHandler=null,O1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}};var j1=(t,e)=>e.some(n=>t instanceof n),_D,ID;function U1(){return _D||(_D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B1(){return ID||(ID=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ED=new WeakMap,Fm=new WeakMap,wD=new WeakMap,km=new WeakMap,Vm=new WeakMap;function $1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(ln(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&ED.set(n,t)}).catch(()=>{}),Vm.set(e,t),e}function H1(t){if(Fm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Fm.set(t,e)}var Lm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CD(t){Lm=t(Lm)}function W1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Eu(this),e,...n);return wD.set(r,e.sort?e.sort():[e]),ln(r)}:B1().includes(t)?function(...e){return t.apply(Eu(this),e),ln(ED.get(this))}:function(...e){return ln(t.apply(Eu(this),e))}}function z1(t){return typeof t=="function"?W1(t):(t instanceof IDBTransaction&&H1(t),j1(t,U1())?new Proxy(t,Lm):t)}function ln(t){if(t instanceof IDBRequest)return $1(t);if(km.has(t))return km.get(t);let e=z1(t);return e!==t&&(km.set(t,e),Vm.set(e,t)),e}var Eu=t=>Vm.get(t);function bD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=ln(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ln(s.result),c.oldVersion,c.newVersion,ln(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var G1=["get","getKey","getAll","getAllKeys","count"],q1=["put","add","delete","clear"],jm=new Map;function DD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jm.get(e))return jm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=q1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||G1.includes(n)))return;let o=function(s,...a){return m(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return jm.set(e,o),o}CD(t=>q(E({},t),{get:(e,n,r)=>DD(e,n)||t.get(e,n,r),has:(e,n)=>!!DD(e,n)||t.has(e,n)}));var Bm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Y1(t){let e=t.getComponent();return e?.type==="VERSION"}var $m="@firebase/app",TD="0.10.13";var An=new cr("@firebase/app"),K1="@firebase/app-compat",Z1="@firebase/analytics-compat",Q1="@firebase/analytics",J1="@firebase/app-check-compat",X1="@firebase/app-check",eF="@firebase/auth",tF="@firebase/auth-compat",nF="@firebase/database",rF="@firebase/data-connect",iF="@firebase/database-compat",oF="@firebase/functions",sF="@firebase/functions-compat",aF="@firebase/installations",cF="@firebase/installations-compat",lF="@firebase/messaging",uF="@firebase/messaging-compat",dF="@firebase/performance",fF="@firebase/performance-compat",hF="@firebase/remote-config",pF="@firebase/remote-config-compat",mF="@firebase/storage",gF="@firebase/storage-compat",vF="@firebase/firestore",yF="@firebase/vertexai-preview",_F="@firebase/firestore-compat",IF="firebase",EF="10.14.1";var Hm="[DEFAULT]",wF={[$m]:"fire-core",[K1]:"fire-core-compat",[Q1]:"fire-analytics",[Z1]:"fire-analytics-compat",[X1]:"fire-app-check",[J1]:"fire-app-check-compat",[eF]:"fire-auth",[tF]:"fire-auth-compat",[nF]:"fire-rtdb",[rF]:"fire-data-connect",[iF]:"fire-rtdb-compat",[oF]:"fire-fn",[sF]:"fire-fn-compat",[aF]:"fire-iid",[cF]:"fire-iid-compat",[lF]:"fire-fcm",[uF]:"fire-fcm-compat",[dF]:"fire-perf",[fF]:"fire-perf-compat",[hF]:"fire-rc",[pF]:"fire-rc-compat",[mF]:"fire-gcs",[gF]:"fire-gcs-compat",[vF]:"fire-fst",[_F]:"fire-fst-compat",[yF]:"fire-vertex","fire-js":"fire-js",[IF]:"fire-js-all"};var aa=new Map,CF=new Map,Wm=new Map;function SD(t,e){try{t.container.addComponent(e)}catch(n){An.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ur(t){let e=t.name;if(Wm.has(e))return An.debug(`There were multiple attempts to register component ${e}.`),!1;Wm.set(e,t);for(let n of aa.values())SD(n,t);for(let n of CF.values())SD(n,t);return!0}function la(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bt(t){return t.settings!==void 0}var DF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new Sn("app","Firebase",DF);var zm=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}};var dr=EF;function Ym(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Hm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw lr.create("bad-app-name",{appName:String(i)});if(n||(n=Pm()),!n)throw lr.create("no-options");let o=aa.get(i);if(o){if(vo(n,o.options)&&vo(r,o.config))return o;throw lr.create("duplicate-app",{appName:i})}let s=new sa(i);for(let c of Wm.values())s.addComponent(c);let a=new zm(n,r,s);return aa.set(i,a),a}function Io(t=Hm){let e=aa.get(t);if(!e&&t===Hm&&Pm())return Ym();if(!e)throw lr.create("no-app",{appName:t});return e}function wu(){return Array.from(aa.values())}function Se(t,e,n){var r;let i=(r=wF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),An.warn(a.join(" "));return}ur(new Dt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var bF="firebase-heartbeat-database",TF=1,ca="firebase-heartbeat-store",Um=null;function RD(){return Um||(Um=bD(bF,TF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw lr.create("idb-open",{originalErrorMessage:t.message})})),Um}function SF(t){return m(this,null,function*(){try{let n=(yield RD()).transaction(ca),r=yield n.objectStore(ca).get(xD(t));return yield n.done,r}catch(e){if(e instanceof Ht)An.warn(e.message);else{let n=lr.create("idb-get",{originalErrorMessage:e?.message});An.warn(n.message)}}})}function AD(t,e){return m(this,null,function*(){try{let r=(yield RD()).transaction(ca,"readwrite");yield r.objectStore(ca).put(e,xD(t)),yield r.done}catch(n){if(n instanceof Ht)An.warn(n.message);else{let r=lr.create("idb-set",{originalErrorMessage:n?.message});An.warn(r.message)}}})}function xD(t){return`${t.name}!${t.options.appId}`}var AF=1024,MF=30*24*60*60*1e3,Gm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new qm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=MD();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=MF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){An.warn(r)}})}getHeartbeatsHeader(){return m(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=MD(),{heartbeatsToSend:r,unsentEntries:i}=NF(this._heartbeatsCache.heartbeats),o=ea(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return An.warn(n),""}})}};function MD(){return new Date().toISOString().substring(0,10)}function NF(t,e=AF){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ND(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ND(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var qm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return fD()?hD().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield SF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function ND(t){return ea(JSON.stringify({version:2,heartbeats:t})).length}function RF(t){ur(new Dt("platform-logger",e=>new Bm(e),"PRIVATE")),ur(new Dt("heartbeat",e=>new Gm(e),"PRIVATE")),Se($m,TD,t),Se($m,TD,"esm2017"),Se("fire-js","")}RF("");var xF="firebase",PF="10.14.1";Se(xF,PF,"app");var oi=new In("ANGULARFIRE2_VERSION");function Du(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ua=(t,e)=>{let n=e?[e]:wu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},wo=class{constructor(){return ua(OF)}},OF="app-check";function Eo(){}var Cu=class{zone;delegate;constructor(e,n=wf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Km=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eo,{},Eo,Eo)),n.pipe(Ee({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Co=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Cu(Zone.current)),this.insideAngular=n.run(()=>new Cu(Zone.current,Ri)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(O(ne))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bu(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function kF(t){return bu().ngZone.runOutsideAngular(()=>t())}function ii(t){return bu().ngZone.run(()=>t())}function FF(t){return LF(bu())(t)}function LF(t){return function(n){return n=n.lift(new Km(t.ngZone)),n.pipe(jn(t.outsideAngular),Vn(t.insideAngular))}}var VF=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ii(()=>t.apply(void 0,r))},Re=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=ii(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eo,{},Eo,Eo))),r[o]=VF(r[o],n));let i=kF(()=>t.apply(this,r));if(!e)if(i instanceof L){let o=bu();return i.pipe(jn(o.outsideAngular),Vn(o.insideAngular))}else return ii(()=>i);return i instanceof L?i.pipe(FF):i instanceof Promise?ii(()=>new Promise((o,s)=>i.then(a=>ii(()=>o(a)),a=>ii(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ii(()=>i)};var Mn=class{constructor(e){return e}},si=class{constructor(){return wu()}};function jF(t){return t&&t.length===1?t[0]:new Mn(Io())}var Zm=new T("angularfire2._apps"),UF={provide:Mn,useFactory:jF,deps:[[new Ke,Zm]]},BF={provide:si,deps:[[new Ke,Zm]]};function $F(t){return(e,n)=>{let r=n.get(wt);Se("angularfire",oi.full,"core"),Se("angularfire",oi.full,"app"),Se("angular",Pw.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Mn(i)}}function PD(t,...e){return at([UF,BF,{provide:Zm,useFactory:$F(t),multi:!0,deps:[ne,Ue,Co,...e]}])}var OD=Re(Ym,!0);function QD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var JD=QD,XD=new Sn("auth","Firebase",QD());var Ru=new cr("@firebase/auth");function HF(t,...e){Ru.logLevel<=re.WARN&&Ru.warn(`Auth (${dr}): ${t}`,...e)}function Su(t,...e){Ru.logLevel<=re.ERROR&&Ru.error(`Auth (${dr}): ${t}`,...e)}function Tt(t,...e){throw vg(t,...e)}function Wt(t,...e){return vg(t,...e)}function gg(t,e,n){let r=Object.assign(Object.assign({},JD()),{[e]:n});return new Sn("auth","Firebase",r).create(e,{appName:t.name})}function xn(t){return gg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WF(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tt(t,"argument-error"),gg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XD.create(t,...e)}function R(t,e,...n){if(!t)throw vg(e,...n)}function Nn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Su(e),new Error(e)}function Pn(t,e){t||Nn(e)}function Xm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zF(){return kD()==="http:"||kD()==="https:"}function kD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function GF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zF()||uD()||"connection"in navigator)?navigator.onLine:!0}function qF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ai=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pn(n>e,"Short delay should be less than long delay!"),this.isMobile=na()||yu()}get(){return GF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function yg(t,e){Pn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var xu=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var YF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var KF=new ai(3e4,6e4);function hr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function pr(o,s,a,c){return m(this,arguments,function*(t,e,n,r,i={}){return eb(t,i,()=>m(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=ar(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);let h=Object.assign({method:e,headers:f},l);return lD()||(h.referrerPolicy="no-referrer"),xu.fetch()(tb(t,t.config.apiHost,n,d),h)}))})}function eb(t,e,n){return m(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},YF),e);try{let i=new eg(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Tu(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tu(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Tu(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Tu(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw gg(t,u,l);Tt(t,u)}}catch(i){if(i instanceof Ht)throw i;Tt(t,"network-request-failed",{message:String(i)})}})}function ya(o,s,a,c){return m(this,arguments,function*(t,e,n,r,i={}){let l=yield pr(t,e,n,r,i);return"mfaPendingCredential"in l&&Tt(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function tb(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?yg(t.config,i):`${t.config.apiScheme}://${i}`}function ZF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var eg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wt(this.auth,"network-request-failed")),KF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Tu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Wt(t,e,r);return i.customData._tokenResponse=n,i}function FD(t){return t!==void 0&&t.enterprise!==void 0}var tg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function QF(t,e){return m(this,null,function*(){return pr(t,"GET","/v2/recaptchaConfig",hr(t,e))})}function JF(t,e){return m(this,null,function*(){return pr(t,"POST","/v1/accounts:delete",e)})}function nb(t,e){return m(this,null,function*(){return pr(t,"POST","/v1/accounts:lookup",e)})}function da(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function _g(t,e=!1){return m(this,null,function*(){let n=Ne(t),r=yield n.getIdToken(e),i=Ig(r);R(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:da(Qm(i.auth_time)),issuedAtTime:da(Qm(i.iat)),expirationTime:da(Qm(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Qm(t){return Number(t)*1e3}function Ig(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Su("JWT malformed, contained fewer than 3 sections"),null;try{let i=ta(n);return i?JSON.parse(i):(Su("Failed to decode base64 JWT payload"),null)}catch(i){return Su("Caught error parsing JWT payload as JSON",i?.toString()),null}}function LD(t){let e=Ig(t);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ha(t,e,n=!1){return m(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ht&&XF(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function XF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ng=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>m(this,null,function*(){yield this.iteration()}),n)}iteration(){return m(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var pa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=da(this.lastLoginAt),this.creationTime=da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Pu(t){return m(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ha(t,nb(n,{idToken:r}));R(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?rb(o.providerUserInfo):[],a=eL(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new pa(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Eg(t){return m(this,null,function*(){let e=Ne(t);yield Pu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function eL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rb(t){return t.map(e=>{var{providerId:n}=e,r=vc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function tL(t,e){return m(this,null,function*(){let n=yield eb(t,{},()=>m(this,null,function*(){let r=ar({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=tb(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xu.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function nL(t,e){return m(this,null,function*(){return pr(t,"POST","/v2/accounts:revokeToken",hr(t,e))})}var fa=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){R(e.length!==0,"internal-error");let n=LD(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return m(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(R(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return m(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield tL(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(R(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(R(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(R(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Nn("not implemented")}};function fr(t,e){R(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var bo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=vc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ng(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new pa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return m(this,null,function*(){let n=yield ha(this,this.stsTokenManager.getToken(this.auth,e));return R(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return _g(this,e)}reload(){return Eg(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return m(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Pu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return m(this,null,function*(){if(bt(this.auth.app))return Promise.reject(xn(this.auth));let e=yield this.getIdToken();return yield ha(this,JF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,D=(a=n.tenantId)!==null&&a!==void 0?a:void 0,M=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,ue=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:de,emailVerified:we,isAnonymous:At,providerData:Oe,stsTokenManager:mn}=n;R(de&&mn,e,"internal-error");let es=fa.fromJSON(this.name,mn);R(typeof de=="string",e,"internal-error"),fr(d,e.name),fr(f,e.name),R(typeof we=="boolean",e,"internal-error"),R(typeof At=="boolean",e,"internal-error"),fr(h,e.name),fr(p,e.name),fr(D,e.name),fr(M,e.name),fr(k,e.name),fr(ue,e.name);let ts=new t({uid:de,auth:e,email:f,emailVerified:we,displayName:d,isAnonymous:At,photoURL:p,phoneNumber:h,tenantId:D,stsTokenManager:es,createdAt:k,lastLoginAt:ue});return Oe&&Array.isArray(Oe)&&(ts.providerData=Oe.map(RS=>Object.assign({},RS))),M&&(ts._redirectEventId=M),ts}static _fromIdTokenResponse(e,n,r=!1){return m(this,null,function*(){let i=new fa;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Pu(o),o})}static _fromGetAccountInfoResponse(e,n,r){return m(this,null,function*(){let i=n.users[0];R(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?rb(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new fa;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new pa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var VD=new Map;function Rn(t){Pn(t instanceof Function,"Expected a class definition");let e=VD.get(t);return e?(Pn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,VD.set(t,e),e)}var rL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(this,null,function*(){return!0})}_set(n,r){return m(this,null,function*(){this.storage[n]=r})}_get(n){return m(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return m(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),rg=rL;function Au(t,e,n){return`firebase:${t}:${e}:${n}`}var Ou=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Au(this.userKey,i.apiKey,o),this.fullPersistenceKey=Au("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return m(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?bo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return m(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(this,null,function*(){if(!n.length)return new t(Rn(rg),e,r);let i=(yield Promise.all(n.map(l=>m(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Rn(rg),s=Au(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d=bo._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>m(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function jD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ab(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ib(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lb(e))return"Blackberry";if(ub(e))return"Webos";if(ob(e))return"Safari";if((e.includes("chrome/")||sb(e))&&!e.includes("edge/"))return"Chrome";if(cb(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function ib(t=Be()){return/firefox\//i.test(t)}function ob(t=Be()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sb(t=Be()){return/crios\//i.test(t)}function ab(t=Be()){return/iemobile/i.test(t)}function cb(t=Be()){return/android/i.test(t)}function lb(t=Be()){return/blackberry/i.test(t)}function ub(t=Be()){return/webos/i.test(t)}function wg(t=Be()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iL(t=Be()){var e;return wg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oL(){return dD()&&document.documentMode===10}function db(t=Be()){return wg(t)||cb(t)||ub(t)||lb(t)||/windows phone/i.test(t)||ab(t)}function fb(t,e=[]){let n;switch(t){case"Browser":n=jD(Be());break;case"Worker":n=`${jD(Be())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${dr}/${r}`}var ig=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return m(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function sL(n){return m(this,arguments,function*(t,e={}){return pr(t,"GET","/v2/passwordPolicy",hr(t,e))})}var aL=6,og=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:aL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var sg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ku(this),this.idTokenSubscription=new ku(this),this.beforeStateQueue=new ig(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rn(n)),this._initializationPromise=this.queue(()=>m(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ou.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return m(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return m(this,null,function*(){try{let n=yield nb(this,{idToken:e}),r=yield bo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return m(this,null,function*(){var n;if(bt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return R(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return m(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return m(this,null,function*(){try{yield Pu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=qF()}_delete(){return m(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return m(this,null,function*(){if(bt(this.app))return Promise.reject(xn(this));let n=e?Ne(e):null;return n&&R(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return m(this,null,function*(){if(!this._deleted)return e&&R(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>m(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return m(this,null,function*(){return bt(this.app)?Promise.reject(xn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bt(this.app)?Promise.reject(xn(this)):this.queue(()=>m(this,null,function*(){yield this.assertedPersistence.setPersistence(Rn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return m(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return m(this,null,function*(){let e=yield sL(this),n=new og(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return m(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield nL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return m(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return m(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Rn(e)||this._popupRedirectResolver;R(n,this,"argument-error"),this.redirectPersistenceManager=yield Ou.create(this,[Rn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return m(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>m(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return m(this,null,function*(){if(e===this.currentUser)return this.queue(()=>m(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return m(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return m(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return m(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&HF(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function mr(t){return Ne(t)}var ku=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=vD(n=>this.observer=n)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Wu={loadJS(){return m(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cL(t){Wu=t}function hb(t){return Wu.loadJS(t)}function lL(){return Wu.recaptchaEnterpriseScript}function uL(){return Wu.gapiScript}function pb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var dL="recaptcha-enterprise",fL="NO_RECAPTCHA",ag=class{constructor(e){this.type=dL,this.auth=mr(e)}verify(e="verify",n=!1){return m(this,null,function*(){function r(o){return m(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>m(this,null,function*(){QF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new tg(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;FD(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(fL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&FD(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=lL();c.length!==0&&(c+=a),hb(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function UD(t,e,n,r=!1){return m(this,null,function*(){let i=new ag(t),o;try{o=yield i.verify(n)}catch{o=yield i.verify(n,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function cg(t,e,n,r){return m(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield UD(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>m(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield UD(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}function Cg(t,e){let n=la(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(vo(o,e??{}))return i;Tt(i,"already-initialized")}return n.initialize({options:e})}function hL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Rn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Dg(t,e,n){let r=mr(t);R(r._canInitEmulator,r,"emulator-config-failed"),R(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=mb(e),{host:s,port:a}=pL(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||mL()}function mb(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pL(t){let e=mb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:BD(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:BD(s)}}}function BD(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function mL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var To=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nn("not implemented")}_getIdTokenResponse(e){return Nn("not implemented")}_linkToIdToken(e,n){return Nn("not implemented")}_getReauthenticationResolver(e){return Nn("not implemented")}};function gL(t,e){return m(this,null,function*(){return pr(t,"POST","/v1/accounts:signUp",e)})}function vL(t,e){return m(this,null,function*(){return ya(t,"POST","/v1/accounts:signInWithPassword",hr(t,e))})}function yL(t,e){return m(this,null,function*(){return ya(t,"POST","/v1/accounts:signInWithEmailLink",hr(t,e))})}function _L(t,e){return m(this,null,function*(){return ya(t,"POST","/v1/accounts:signInWithEmailLink",hr(t,e))})}var ma=class t extends To{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return m(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cg(e,n,"signInWithPassword",vL);case"emailLink":return yL(e,{email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}})}_linkToIdToken(e,n){return m(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cg(e,r,"signUpPassword",gL);case"emailLink":return _L(e,{idToken:n,email:this._email,oobCode:this._password});default:Tt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Do(t,e){return m(this,null,function*(){return ya(t,"POST","/v1/accounts:signInWithIdp",hr(t,e))})}var IL="http://localhost",Fu=class t extends To{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=vc(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return Do(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Do(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Do(e,n)}buildRequest(){let e={requestUri:IL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ar(n)}return e}};function EL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wL(t){let e=yo(_o(t)).link,n=e?yo(_o(e)).deep_link_id:null,r=yo(_o(t)).deep_link_id;return(r?yo(_o(r)).link:null)||r||n||e||t}var Lu=class t{constructor(e){var n,r,i,o,s,a;let c=yo(_o(e)),l=(n=c.apiKey)!==null&&n!==void 0?n:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=EL((i=c.mode)!==null&&i!==void 0?i:null);R(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=wL(e);try{return new t(n)}catch{return null}}};var gb=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return ma._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Lu.parseLink(r);return R(i,"argument-error"),ma._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),ga=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Vu=class extends ga{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var bg=(()=>{class t extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Fu._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function CL(t,e){return m(this,null,function*(){return ya(t,"POST","/v1/accounts:signUp",hr(t,e))})}var So=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(this,null,function*(){let o=yield bo._fromIdTokenResponse(e,r,i),s=$D(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return m(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=$D(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function $D(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var lg=class t extends Ht{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function vb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lg._fromErrorAndOperation(t,o,e,r):o})}function DL(t,e,n=!1){return m(this,null,function*(){let r=yield ha(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return So._forOperation(t,"link",r)})}function bL(t,e,n=!1){return m(this,null,function*(){let{auth:r}=t;if(bt(r.app))return Promise.reject(xn(r));let i="reauthenticate";try{let o=yield ha(t,vb(r,i,e,t),n);R(o.idToken,r,"internal-error");let s=Ig(o.idToken);R(s,r,"internal-error");let{sub:a}=s;return R(t.uid===a,r,"user-mismatch"),So._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Tt(r,"user-mismatch"),o}})}function yb(t,e,n=!1){return m(this,null,function*(){if(bt(t.app))return Promise.reject(xn(t));let r="signIn",i=yield vb(t,r,e),o=yield So._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Tg(t,e){return m(this,null,function*(){return yb(mr(t),e)})}function _b(t){return m(this,null,function*(){let e=mr(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Sg(t,e,n){return m(this,null,function*(){if(bt(t.app))return Promise.reject(xn(t));let r=mr(t),s=yield cg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CL).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&_b(t),c}),a=yield So._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Ag(t,e,n){return bt(t.app)?Promise.reject(xn(t)):Tg(Ne(t),gb.credential(e,n)).catch(r=>m(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&_b(t),r}))}function Mg(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function Ng(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function Rg(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function xg(t){return Ne(t).signOut()}var ju="__sak";var Uu=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ju,"1"),this.storage.removeItem(ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var TL=1e3,SL=10,AL=(()=>{class t extends Uu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=db(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);oL()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,SL):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},TL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return m(this,null,function*(){yield br(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return m(this,null,function*(){let r=yield br(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return m(this,null,function*(){yield br(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Ib=AL;var ML=(()=>{class t extends Uu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Pg=ML;function NL(t){return Promise.all(t.map(e=>m(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var RL=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return m(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>m(this,null,function*(){return u(r.origin,s)})),l=yield NL(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Og(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var ug=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return m(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=Og("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function un(){return window}function xL(t){un().location.href=t}function Eb(){return typeof un().WorkerGlobalScope<"u"&&typeof un().importScripts=="function"}function PL(){return m(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function OL(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kL(){return Eb()?self:null}var wb="firebaseLocalStorageDb",FL=1,Bu="firebaseLocalStorage",Cb="fbase_key",ci=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function zu(t,e){return t.transaction([Bu],e?"readwrite":"readonly").objectStore(Bu)}function LL(){let t=indexedDB.deleteDatabase(wb);return new ci(t).toPromise()}function dg(){let t=indexedDB.open(wb,FL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Bu,{keyPath:Cb})}catch(i){n(i)}}),t.addEventListener("success",()=>m(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Bu)?e(r):(r.close(),yield LL(),e(yield dg()))}))})}function HD(t,e,n){return m(this,null,function*(){let r=zu(t,!0).put({[Cb]:e,value:n});return new ci(r).toPromise()})}function VL(t,e){return m(this,null,function*(){let n=zu(t,!1).get(e),r=yield new ci(n).toPromise();return r===void 0?null:r.value})}function WD(t,e){let n=zu(t,!0).delete(e);return new ci(n).toPromise()}var jL=800,UL=3,BL=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return m(this,null,function*(){return this.db?this.db:(this.db=yield dg(),this.db)})}_withRetries(n){return m(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>UL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return m(this,null,function*(){return Eb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return m(this,null,function*(){this.receiver=RL._getInstance(kL()),this.receiver._subscribe("keyChanged",(n,r)=>m(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>m(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return m(this,null,function*(){var n,r;if(this.activeServiceWorker=yield PL(),!this.activeServiceWorker)return;this.sender=new ug(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return m(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||OL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return m(this,null,function*(){try{if(!indexedDB)return!1;let n=yield dg();return yield HD(n,ju,"1"),yield WD(n,ju),!0}catch{}return!1})}_withPendingWrite(n){return m(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(i=>HD(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return m(this,null,function*(){let r=yield this._withRetries(i=>VL(i,n));return this.localCache[n]=r,r})}_remove(n){return m(this,null,function*(){return this._withPendingWrite(()=>m(this,null,function*(){return yield this._withRetries(r=>WD(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return m(this,null,function*(){let n=yield this._withRetries(o=>{let s=zu(o,!1).getAll();return new ci(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>m(this,null,function*(){return this._poll()}),jL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Db=BL;var c5=pb("rcb"),l5=new ai(3e4,6e4);function bb(t,e){return e?Rn(e):(R(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var va=class extends To{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Do(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function $L(t){return yb(t.auth,new va(t),t.bypassAuthState)}function HL(t){let{auth:e,user:n}=t;return R(n,e,"internal-error"),bL(n,new va(t),t.bypassAuthState)}function WL(t){return m(this,null,function*(){let{auth:e,user:n}=t;return R(n,e,"internal-error"),DL(n,new va(t),t.bypassAuthState)})}var $u=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>m(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return m(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $L;case"linkViaPopup":case"linkViaRedirect":return WL;case"reauthViaPopup":case"reauthViaRedirect":return HL;default:Tt(this.auth,"internal-error")}}resolve(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var zL=new ai(2e3,1e4);function kg(t,e,n){return m(this,null,function*(){if(bt(t.app))return Promise.reject(Wt(t,"operation-not-supported-in-this-environment"));let r=mr(t);WF(t,e,ga);let i=bb(r,n);return new GL(r,"signInViaPopup",e,i).executeNotNull()})}var GL=(()=>{class t extends $u{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return m(this,null,function*(){let n=yield this.execute();return R(n,this.auth,"internal-error"),n})}onExecution(){return m(this,null,function*(){Pn(this.filter.length===1,"Popup operations only handle one event");let n=Og();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Wt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Wt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,zL.get())};n()}}t.currentPopupAction=null;return t})(),qL="pendingRedirect",Mu=new Map,fg=class t extends $u{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return m(this,null,function*(){let e=Mu.get(this.auth._key());if(!e){try{let r=(yield YL(this.resolver,this.auth))?yield br(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mu.set(this.auth._key(),e)}return this.bypassAuthState||Mu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return m(this,null,function*(){if(e.type==="signInViaRedirect")return br(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,br(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return m(this,null,function*(){})}cleanUp(){}};function YL(t,e){return m(this,null,function*(){let n=QL(e),r=ZL(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function KL(t,e){Mu.set(t._key(),e)}function ZL(t){return Rn(t._redirectPersistence)}function QL(t){return Au(qL,t.config.apiKey,t.name)}function JL(t,e,n=!1){return m(this,null,function*(){if(bt(t.app))return Promise.reject(xn(t));let r=mr(t),i=bb(r,e),s=yield new fg(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var XL=10*60*1e3,hg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Tb(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Wt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XL&&this.cachedEventUids.clear(),this.cachedEventUids.has(zD(e))}saveEventToCache(e){this.cachedEventUids.add(zD(e)),this.lastProcessedEventTime=Date.now()}};function zD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Tb({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function eV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tb(t);default:return!1}}function tV(n){return m(this,arguments,function*(t,e={}){return pr(t,"GET","/v1/projects",e)})}var nV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rV=/^https?/;function iV(t){return m(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield tV(t);for(let n of e)try{if(oV(n))return}catch{}Tt(t,"unauthorized-domain")})}function oV(t){let e=Xm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!rV.test(n))return!1;if(nV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var sV=new ai(3e4,6e4);function GD(){let t=un().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aV(t){return new Promise((e,n)=>{var r,i,o;function s(){GD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GD(),n(Wt(t,"network-request-failed"))},timeout:sV.get()})}if(!((i=(r=un().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=un().gapi)===null||o===void 0)&&o.load)s();else{let a=pb("iframefcb");return un()[a]=()=>{gapi.load?s():n(Wt(t,"network-request-failed"))},hb(`${uL()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Nu=null,e})}var Nu=null;function cV(t){return Nu=Nu||aV(t),Nu}var lV=new ai(5e3,15e3),uV="__/auth/iframe",dV="emulator/auth/iframe",fV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pV(t){let e=t.config;R(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?yg(e,dV):`https://${t.config.authDomain}/${uV}`,r={apiKey:e.apiKey,appName:t.name,v:dr},i=hV.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ar(r).slice(1)}`}function mV(t){return m(this,null,function*(){let e=yield cV(t),n=un().gapi;return R(n,t,"internal-error"),e.open({where:document.body,url:pV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fV,dontclear:!0},r=>new Promise((i,o)=>m(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Wt(t,"network-request-failed"),a=un().setTimeout(()=>{o(s)},lV.get());function c(){un().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var gV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vV=500,yV=600,_V="_blank",IV="http://localhost",Hu=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function EV(t,e,n,r=vV,i=yV){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},gV),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Be().toLowerCase();n&&(a=sb(l)?_V:n),ib(l)&&(e=e||IV,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(iL(l)&&a!=="_self")return wV(e||"",a),new Hu(null);let d=window.open(e||"",a,u);R(d,t,"popup-blocked");try{d.focus()}catch{}return new Hu(d)}function wV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var CV="__/auth/handler",DV="emulator/auth/handler",bV=encodeURIComponent("fac");function qD(t,e,n,r,i,o){return m(this,null,function*(){R(t.config.authDomain,t,"auth-domain-config-required"),R(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:dr,eventId:i};if(e instanceof ga){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",ra(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(o||{}))s[u]=d}if(e instanceof Vu){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield t._getAppCheckToken(),l=c?`#${bV}=${encodeURIComponent(c)}`:"";return`${TV(t)}?${ar(a).slice(1)}${l}`})}function TV({config:t}){return t.emulator?yg(t,DV):`https://${t.authDomain}/${CV}`}var Jm="webStorageSupport",pg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pg,this._completeRedirectFn=JL,this._overrideRedirectResult=KL}_openPopup(e,n,r,i){return m(this,null,function*(){var o;Pn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield qD(e,n,r,Xm(),i);return EV(e,s,Og())})}_openRedirect(e,n,r,i){return m(this,null,function*(){yield this._originValidation(e);let o=yield qD(e,n,r,Xm(),i);return xL(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Pn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return m(this,null,function*(){let n=yield mV(e),r=new hg(e);return n.register("authEvent",i=>(R(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jm,{type:Jm},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Jm];s!==void 0&&n(!!s),Tt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return db()||ob()||wg()}},Sb=pg;var YD="@firebase/auth",KD="1.7.9";var mg=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return m(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function SV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AV(t){ur(new Dt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;R(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fb(t)},l=new sg(r,i,o,c);return hL(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ur(new Dt("auth-internal",e=>{let n=mr(e.getProvider("auth").getImmediate());return(r=>new mg(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(YD,KD,SV(t)),Se(YD,KD,"esm2017")}var MV=5*60,NV=Om("authIdTokenMaxAge")||MV,ZD=null,RV=t=>e=>m(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>NV)return;let i=n?.token;ZD!==i&&(ZD=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Fg(t=Io()){let e=la(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Cg(t,{popupRedirectResolver:Sb,persistence:[Db,Ib,Pg]}),r=Om("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=RV(o.toString());Ng(n,s,()=>s(n.currentUser)),Mg(n,a=>s(a))}}let i=xm("auth");return i&&Dg(n,`http://${i}`),n}function xV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Wt("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",xV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AV("Browser");var Ab="auth",li=class{constructor(e){return e}},_a=class{constructor(){return ua(Ab)}};var Lg=new T("angularfire2.auth-instances");function Ij(t,e){let n=Du(Ab,t,e);return n&&new li(n)}function Ej(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new li(r)}}var wj={provide:_a,deps:[[new Ke,Lg]]},Cj={provide:li,useFactory:Ij,deps:[[new Ke,Lg],Mn]};function Mb(t,...e){return Se("angularfire",oi.full,"auth"),at([Cj,wj,{provide:Lg,useFactory:Ej(t),multi:!0,deps:[ne,Ue,Co,si,[new Ke,wo],...e]}])}var Nb=Re(Sg,!0);var Rb=Re(Fg,!0);var Vg=Re(Rg,!0);var xb=Re(Ag,!0);var Pb=Re(kg,!0);var Ob=Re(xg,!0);var kb="@firebase/database",Fb="1.0.8";var jv="";function bj(t){jv=t}var Gg=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),De(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:go(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var qg=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return cn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var p0=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Gg(e)}}catch{}return new qg},di=p0("localStorage"),Yg=p0("sessionStorage");var No=new cr("@firebase/database"),Tj=function(){let t=1;return function(){return t++}}(),m0=function(t){let e=yD(t),n=new gu;n.update(e);let r=n.digest();return vu.encodeByteArray(r)},ja=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ja.apply(null,r):typeof r=="object"?e+=De(r):e+=r,e+=" "}return e},hi=null,Lb=!0,Sj=function(t,e){I(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(No.logLevel=re.VERBOSE,hi=No.log.bind(No),e&&Yg.set("logging_enabled",!0)):typeof t=="function"?hi=t:(hi=null,Yg.remove("logging_enabled"))},$e=function(...t){if(Lb===!0&&(Lb=!1,hi===null&&Yg.get("logging_enabled")===!0&&Sj(!0)),hi){let e=ja.apply(null,t);hi(e)}},Ua=function(t){return function(...e){$e(t,...e)}},Kg=function(...t){let e="FIREBASE INTERNAL ERROR: "+ja(...t);No.error(e)},On=function(...t){let e=`FIREBASE FATAL ERROR: ${ja(...t)}`;throw No.error(e),new Error(e)},et=function(...t){let e="FIREBASE WARNING: "+ja(...t);No.warn(e)},Aj=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},g0=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Mj=function(t){if(an()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xo="[MIN_NAME]",pi="[MAX_NAME]",jo=function(t,e){if(t===e)return 0;if(t===xo||e===pi)return-1;if(e===xo||t===pi)return 1;{let n=Vb(t),r=Vb(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Nj=function(t,e){return t===e?0:t<e?-1:1},Ia=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+De(e))},Uv=function(t){if(typeof t!="object"||t===null)return De(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=De(e[r]),n+=":",n+=Uv(t[e[r]]);return n+="}",n},v0=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function tt(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var y0=function(t){I(!g0(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},Rj=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xj=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Pj(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var Oj=new RegExp("^-?(0*)\\d{1,10}$"),kj=-2147483648,Fj=2147483647,Vb=function(t){if(Oj.test(t)){let e=Number(t);if(e>=kj&&e<=Fj)return e}return null},Uo=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw et("Exception was thrown by user callback.",n),e},Math.floor(0))}},Lj=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ba=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Zg=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){et(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Qg=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?($e("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',et(e)}},Ta=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),qu="5",_0="v",I0="s",E0="r",w0="f",C0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,D0="ls",b0="p",Jg="ac",T0="websocket",S0="long_polling";var Yu=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=di.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&di.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function Vj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function A0(t,e,n){I(typeof e=="string","typeof type must == string"),I(typeof n=="object","typeof params must == object");let r;if(e===T0)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===S0)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Vj(t)&&(n.ns=t.namespace);let i=[];return tt(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Xg=class{constructor(){this.counters_={}}incrementCounter(e,n=1){cn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return oD(this.counters_)}};var jg={},Ug={};function Bv(t){let e=t.toString();return jg[e]||(jg[e]=new Xg),jg[e]}function jj(t,e){let n=t.toString();return Ug[n]||(Ug[n]=e()),Ug[n]}var ev=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Uo(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var jb="start",Uj="close",Bj="pLPCommand",$j="pRTLPCB",M0="id",N0="pw",R0="ser",Hj="cb",Wj="seg",zj="ts",Gj="d",qj="dframe",x0=1870,P0=30,Yj=x0-P0,Kj=25e3,Zj=3e4,tv=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ua(e),this.stats_=Bv(n),this.urlFn=c=>(this.appCheckToken&&(c[Jg]=this.appCheckToken),A0(n,S0,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ev(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Zj)),Mj(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nv((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===jb)this.id=a,this.password=c;else if(s===Uj)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[jb]="t",r[R0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Hj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[_0]=qu,this.transportSessionId&&(r[I0]=this.transportSessionId),this.lastSessionId&&(r[D0]=this.lastSessionId),this.applicationId&&(r[b0]=this.applicationId),this.appCheckToken&&(r[Jg]=this.appCheckToken),typeof location<"u"&&location.hostname&&C0.test(location.hostname)&&(r[E0]=w0);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return an()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Rj()&&!xj()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=De(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Nm(n),i=v0(r,Yj);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(an())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[qj]="t",r[M0]=e,r[N0]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=De(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},nv=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,an())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Tj(),window[Bj+this.uniqueCallbackIdentifier]=e,window[$j+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){$e("frame writing exception"),a.stack&&$e(a.stack),$e(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||$e("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[M0]=this.myID,e[N0]=this.myPW,e[R0]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+P0+r.length<=x0;){let s=this.pendingSegs.shift();r=r+"&"+Wj+i+"="+s.seg+"&"+zj+i+"="+s.ts+"&"+Gj+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Kj)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){an()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{$e("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Qj=16384,Jj=45e3,Ku=null;typeof MozWebSocket<"u"?Ku=MozWebSocket:typeof WebSocket<"u"&&(Ku=WebSocket);var Ea=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ua(this.connId),this.stats_=Bv(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[_0]=qu,!an()&&typeof location<"u"&&location.hostname&&C0.test(location.hostname)&&(a[E0]=w0),r&&(a[I0]=r),i&&(a[D0]=i),o&&(a[Jg]=o),s&&(a[b0]=s),A0(n,T0,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,di.set("previous_websocket_failure",!0);try{let i;if(an()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${qu}/${jv}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Ku(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Ku!==null&&!t.forceDisallow_}static previouslyFailed(){return di.isInMemoryStorage||di.get("previous_websocket_failure")===!0}markConnectionHealthy(){di.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=go(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(I(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=De(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=v0(r,Qj);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Jj))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Xj=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[tv,Ea]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Ea&&Ea.isAvailable(),i=r&&!Ea.previouslyFailed();if(n.webSocketOnly&&(r||et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ea];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),eU=6e4,tU=5e3,nU=10*1024,rU=100*1024,Bg="t",Ub="d",iU="s",Bb="r",oU="e",$b="o",Hb="a",Wb="n",zb="p",sU="h",rv=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ua("c:"+this.id+":"),this.transportManager_=new Xj(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ba(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Bg in e){let n=e[Bg];n===Hb?this.upgradeIfSecondaryHealthy_():n===Bb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===$b&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Ia("t",e),r=Ia("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:zb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Hb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Wb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Ia("t",e),r=Ia("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Ia(Bg,e);if(Ub in e){let r=e[Ub];if(n===sU){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Wb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===iU?this.onConnectionShutdown_(r):n===Bb?this.onReset_(r):n===oU?Kg("Server Error: "+r):n===$b?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Kg("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),qu!==r&&et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ba(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ba(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:zb,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(di.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Zu=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Qu=class{constructor(e){this.allowedEvents_=e,this.listeners_={},I(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){I(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Ju=class t extends Qu{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!na()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return I(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Gb=32,qb=768,ie=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Z(){return new ie("")}function z(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function yr(t){return t.pieces_.length-t.pieceNum_}function le(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ie(t.pieces_,e)}function O0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function aU(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function k0(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function F0(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ie(e,0)}function Ae(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ie)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ie(n,0)}function Y(t){return t.pieceNum_>=t.pieces_.length}function Qe(t,e){let n=z(t),r=z(e);if(n===null)return e;if(n===r)return Qe(le(t),le(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function $v(t,e){if(yr(t)!==yr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Gt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(yr(t)>yr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var iv=class{constructor(e,n){this.errorPrefix_=n,this.parts_=k0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=oa(this.parts_[r]);L0(this)}};function cU(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=oa(e),L0(t)}function lU(t){let e=t.parts_.pop();t.byteLength_-=oa(e),t.parts_.length>0&&(t.byteLength_-=1)}function L0(t){if(t.byteLength_>qb)throw new Error(t.errorPrefix_+"has a key path longer than "+qb+" bytes ("+t.byteLength_+").");if(t.parts_.length>Gb)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Gb+") or object contains a cycle "+ui(t))}function ui(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var ov=class t extends Qu{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return I(e==="visible","Unknown event type: "+e),[this.visible_]}};var wa=1e3,uU=60*5*1e3,Yb=30*1e3,dU=1.3,fU=3e4,hU="server_kill",Kb=3,Hv=(()=>{class t extends Zu{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Ua("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wa,this.maxReconnectDelay_=uU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!an())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ov.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Ju.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(De(s)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new sr,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&cn(n,"w")){let i=ni(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||gD(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Yb)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=mD(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+De(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Kg("Unrecognized action received from server: "+De(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wa,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=wa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>fU&&(this.reconnectDelay_=wa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*dU)}this.onConnectStatus_(!1)}establishConnection_(){return m(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){I(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?$e("getToken() completed but was canceled"):($e("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new rv(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{et(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(hU)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&et(f),l())}}})}interrupt(n){$e("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){$e("Resuming connection for reason: "+n),delete this.interruptReasons_[n],ra(this.interruptReasons_)&&(this.reconnectDelay_=wa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Uv(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new ie(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){$e("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Kb&&(this.reconnectDelay_=Yb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){$e("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Kb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";an()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+jv.replace(/\./g,"-")]=1,na()?n["framework.cordova"]=1:yu()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Ju.getInstance().currentlyOnline();return ra(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),G=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Po=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new G(xo,e),i=new G(xo,n);return this.compare(r,i)!==0}minPost(){return G.MIN}};var Gu,Xu=class extends Po{static get __EMPTY_NODE(){return Gu}static set __EMPTY_NODE(e){Gu=e}compare(e,n){return jo(e.name,n.name)}isDefinedOn(e){throw ti("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return G.MIN}maxPost(){return new G(pi,Gu)}makePost(e,n){return I(typeof e=="string","KeyIndex indexValue must always be a string."),new G(e,Gu)}toString(){return".key"}},Ro=new Xu;var Mo=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},zt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??St.EMPTY_NODE,this.right=s??St.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return St.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return St.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),sv=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new zt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},St=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,zt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Mo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Mo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Mo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Mo(this.root_,null,this.comparator_,!0,e)}};St.EMPTY_NODE=new sv;function pU(t,e){return jo(t.name,e.name)}function Wv(t,e){return jo(t,e)}var av;function mU(t){av=t}var V0=function(t){return typeof t=="number"?"number:"+y0(t):"string:"+t},j0=function(t){if(t.isLeafNode()){let e=t.val();I(typeof e=="string"||typeof e=="number"||typeof e=="object"&&cn(e,".sv"),"Priority must be a string or number.")}else I(t===av||t.isEmpty(),"priority of unexpected type.");I(t===av||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Zb,Oo=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,I(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),j0(this.priorityNode_)}static set __childrenNodeConstructor(n){Zb=n}static get __childrenNodeConstructor(){return Zb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Y(n)?this:z(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=z(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(I(i!==".priority"||yr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(le(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+V0(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=y0(this.value_):n+=this.value_,this.lazyHash_=m0(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(I(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return I(o>=0,"Unknown leaf type: "+r),I(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),U0,B0;function gU(t){U0=t}function vU(t){B0=t}var cv=class extends Po{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?jo(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return G.MIN}maxPost(){return new G(pi,new Oo("[PRIORITY-POST]",B0))}makePost(e,n){let r=U0(e);return new G(n,new Oo("[PRIORITY-POST]",r))}toString(){return".priority"}},ye=new cv;var yU=Math.log(2),lv=class{constructor(e){let n=o=>parseInt(Math.log(o)/yU,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ed=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new zt(f,d.node,zt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),D=i(h+1,l);return d=t[h],f=n?n(d):d,new zt(f,d.node,zt.BLACK,p,D)}},o=function(c){let l=null,u=null,d=t.length,f=function(p,D){let M=d-p,k=d;d-=p;let ue=i(M+1,k),de=t[M],we=n?n(de):de;h(new zt(we,de.node,D,null,ue))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let D=c.nextBitIsOne(),M=Math.pow(2,c.count-(p+1));D?f(M,zt.BLACK):(f(M,zt.BLACK),f(M,zt.RED))}return u},s=new lv(t.length),a=o(s);return new St(r||e,a)};var $g,Ao={},ko=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return I(Ao&&ye,"ChildrenNode.ts has not been loaded"),$g=$g||new t({".priority":Ao},{".priority":ye}),$g}get(e){let n=ni(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof St?n:null}hasIndex(e){return cn(this.indexSet_,e.toString())}addIndex(e,n){I(e!==Ro,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(G.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=ed(r,e.getCompare()):a=Ao;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=ia(this.indexes_,(i,o)=>{let s=ni(this.indexSet_,o);if(I(s,"Missing index implementation for "+o),i===Ao)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(G.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),ed(a,s.getCompare())}else return Ao;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new G(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=ia(this.indexes_,i=>{if(i===Ao)return i;{let o=n.get(e.name);return o?i.remove(new G(e.name,o)):i}});return new t(r,this.indexSet_)}};var Ca,V=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&j0(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ca||(Ca=new t(new St(Wv),null,ko.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ca}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ca:r}}getChild(n){let r=z(n);return r===null?this:this.getImmediateChild(r).getChild(le(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(I(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new G(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ca:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=z(n);if(i===null)return r;{I(z(n)!==".priority"||yr(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(le(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ye,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+V0(this.getPriority().val())+":"),this.forEachChild(ye,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":m0(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new G(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new G(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new G(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,G.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Ba?-1:0}withIndex(n){if(n===Ro||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Ro||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ye),o=r.getIterator(ye),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Ro?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),uv=class extends V{constructor(){super(new St(Wv),V.EMPTY_NODE,ko.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return V.EMPTY_NODE}isEmpty(){return!1}},Ba=new uv;Object.defineProperties(G,{MIN:{value:new G(xo,V.EMPTY_NODE)},MAX:{value:new G(pi,Ba)}});Xu.__EMPTY_NODE=V.EMPTY_NODE;Oo.__childrenNodeConstructor=V;mU(Ba);vU(Ba);var _U=!0;function xe(t,e=null){if(t===null)return V.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),I(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Oo(n,xe(e))}if(!(t instanceof Array)&&_U){let n=[],r=!1;if(tt(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=xe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new G(s,c)))}}),n.length===0)return V.EMPTY_NODE;let o=ed(n,pU,s=>s.name,Wv);if(r){let s=ed(n,ye.getCompare());return new V(o,xe(e),new ko({".priority":s},{".priority":ye}))}else return new V(o,xe(e),ko.Default)}else{let n=V.EMPTY_NODE;return tt(t,(r,i)=>{if(cn(t,r)&&r.substring(0,1)!=="."){let o=xe(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(xe(e))}}gU(xe);var dv=class extends Po{constructor(e){super(),this.indexPath_=e,I(!Y(e)&&z(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?jo(e.name,n.name):o}makePost(e,n){let r=xe(e),i=V.EMPTY_NODE.updateChild(this.indexPath_,r);return new G(n,i)}maxPost(){let e=V.EMPTY_NODE.updateChild(this.indexPath_,Ba);return new G(pi,e)}toString(){return k0(this.indexPath_,0).join("/")}};var fv=class extends Po{compare(e,n){let r=e.node.compareTo(n.node);return r===0?jo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(e,n){let r=xe(e);return new G(n,r)}toString(){return".value"}},IU=new fv;function $0(t){return{type:"value",snapshotNode:t}}function Fo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Na(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ra(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function EU(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var xa=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){I(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Na(n,a)):I(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Fo(n,r)):s.trackChildChange(Ra(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ye,(i,o)=>{n.hasChild(i)||r.trackChildChange(Na(i,o))}),n.isLeafNode()||n.forEachChild(ye,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Ra(i,o,s))}else r.trackChildChange(Fo(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?V.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var td=class t{constructor(e){this.indexedFilter_=new xa(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new G(n,r))||(r=V.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=V.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(V.EMPTY_NODE);let o=this;return n.forEachChild(ye,(s,a)=>{o.matches(new G(s,a))||(i=i.updateImmediateChild(s,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var hv=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new td(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new G(n,r))||(r=V.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=V.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=V.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(V.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;I(a.numChildren()===this.limit_,"");let c=new G(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Ra(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Na(n,d));let D=a.updateImmediateChild(n,V.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Fo(f.name,f.node)),D.updateImmediateChild(f.name,f.node)):D}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Na(l.name,l.node)),o.trackChildChange(Fo(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,V.EMPTY_NODE)):e}};var pv=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ye}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xo}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ye}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function wU(t){return t.loadsAllData()?new xa(t.getIndex()):t.hasLimit()?new hv(t):new td(t)}function Qb(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ye?n="$priority":t.index_===IU?n="$value":t.index_===Ro?n="$key":(I(t.index_ instanceof dv,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=De(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=De(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+De(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=De(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+De(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Jb(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ye&&(e.i=t.index_.toString()),e}var mv=class t extends Zu{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ua("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(I(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=Qb(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),ni(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Qb(e._queryParams),r=e._path.toString(),i=new sr;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ar(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=go(a.responseText)}catch{et("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&et("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var gv=class{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function nd(){return{value:null,children:new Map}}function H0(t,e,n){if(Y(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=z(e);t.children.has(r)||t.children.set(r,nd());let i=t.children.get(r);e=le(e),H0(i,e,n)}}function vv(t,e,n){t.value!==null?n(e,t.value):CU(t,(r,i)=>{let o=new ie(e.toString()+"/"+r);vv(i,o,n)})}function CU(t,e){t.children.forEach((n,r)=>{e(r,n)})}var yv=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&tt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var Xb=10*1e3,DU=30*1e3,bU=5*60*1e3,_v=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new yv(e);let r=Xb+(DU-Xb)*Math.random();ba(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;tt(e,(i,o)=>{o>0&&cn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),ba(this.reportStats_.bind(this),Math.floor(Math.random()*2*bU))}};var dn=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(dn||{});function W0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Gv(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Iv=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=dn.ACK_USER_WRITE,this.source=W0()}operationForChild(e){if(Y(this.path)){if(this.affectedTree.value!=null)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ie(e));return new t(Z(),n,this.revert)}}else return I(z(this.path)===e,"operationForChild called for unrelated child."),new t(le(this.path),this.affectedTree,this.revert)}};var rd=class t{constructor(e,n){this.source=e,this.path=n,this.type=dn.LISTEN_COMPLETE}operationForChild(e){return Y(this.path)?new t(this.source,Z()):new t(this.source,le(this.path))}};var Lo=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=dn.OVERWRITE}operationForChild(e){return Y(this.path)?new t(this.source,Z(),this.snap.getImmediateChild(e)):new t(this.source,le(this.path),this.snap)}};var id=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=dn.MERGE}operationForChild(e){if(Y(this.path)){let n=this.children.subtree(new ie(e));return n.isEmpty()?null:n.value?new Lo(this.source,Z(),n.value):new t(this.source,Z(),n)}else return I(z(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,le(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var fn=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Y(e))return this.isFullyInitialized()&&!this.filtered_;let n=z(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Ev=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function TU(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(EU(s.childName,s.snapshotNode))}),Da(t,i,"child_removed",e,r,n),Da(t,i,"child_added",e,r,n),Da(t,i,"child_moved",o,r,n),Da(t,i,"child_changed",e,r,n),Da(t,i,"value",e,r,n),i}function Da(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>AU(t,a,c)),s.forEach(a=>{let c=SU(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function SU(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function AU(t,e,n){if(e.childName==null||n.childName==null)throw ti("Should only compare child_ events.");let r=new G(e.childName,e.snapshotNode),i=new G(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function vd(t,e){return{eventCache:t,serverCache:e}}function Sa(t,e,n,r){return vd(new fn(e,n,r),t.serverCache)}function z0(t,e,n,r){return vd(t.eventCache,new fn(e,n,r))}function od(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function mi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Hg,MU=()=>(Hg||(Hg=new St(Nj)),Hg),nt=class t{constructor(e,n=MU()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return tt(e,(r,i)=>{n=n.set(new ie(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Z(),value:this.value};if(Y(e))return null;{let r=z(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(le(e),n);return o!=null?{path:Ae(new ie(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Y(e))return this;{let n=z(e),r=this.children.get(n);return r!==null?r.subtree(le(e)):new t(null)}}set(e,n){if(Y(e))return new t(n,this.children);{let r=z(e),o=(this.children.get(r)||new t(null)).set(le(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(Y(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=z(e),r=this.children.get(n);if(r){let i=r.remove(le(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(Y(e))return this.value;{let n=z(e),r=this.children.get(n);return r?r.get(le(e)):null}}setTree(e,n){if(Y(e))return n;{let r=z(e),o=(this.children.get(r)||new t(null)).setTree(le(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(Z(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Ae(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Z(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Y(e))return null;{let o=z(e),s=this.children.get(o);return s?s.findOnPath_(le(e),Ae(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Z(),n)}foreachOnPath_(e,n,r){if(Y(e))return this;{this.value&&r(n,this.value);let i=z(e),o=this.children.get(i);return o?o.foreachOnPath_(le(e),Ae(n,i),r):new t(null)}}foreach(e){this.foreach_(Z(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ae(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var qt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new nt(null))}};function Aa(t,e,n){if(Y(e))return new qt(new nt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Qe(i,e);return o=o.updateChild(s,n),new qt(t.writeTree_.set(i,o))}else{let i=new nt(n),o=t.writeTree_.setTree(e,i);return new qt(o)}}}function e0(t,e,n){let r=t;return tt(n,(i,o)=>{r=Aa(r,Ae(e,i),o)}),r}function t0(t,e){if(Y(e))return qt.empty();{let n=t.writeTree_.setTree(e,new nt(null));return new qt(n)}}function wv(t,e){return vi(t,e)!=null}function vi(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Qe(n.path,e)):null}function n0(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ye,(r,i)=>{e.push(new G(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new G(r,i.value))}),e}function gr(t,e){if(Y(e))return t;{let n=vi(t,e);return n!=null?new qt(new nt(n)):new qt(t.writeTree_.subtree(e))}}function Cv(t){return t.writeTree_.isEmpty()}function Vo(t,e){return G0(Z(),t.writeTree_,e)}function G0(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(I(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=G0(Ae(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ae(t,".priority"),r)),n}}function yd(t,e){return Z0(e,t)}function NU(t,e,n,r,i){I(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Aa(t.visibleWrites,e,n)),t.lastWriteId=r}function RU(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function xU(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);I(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&PU(a,r.path)?i=!1:Gt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return OU(t),!0;if(r.snap)t.visibleWrites=t0(t.visibleWrites,r.path);else{let a=r.children;tt(a,c=>{t.visibleWrites=t0(t.visibleWrites,Ae(r.path,c))})}return!0}else return!1}function PU(t,e){if(t.snap)return Gt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Gt(Ae(t.path,n),e))return!0;return!1}function OU(t){t.visibleWrites=q0(t.allWrites,kU,Z()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function kU(t){return t.visible}function q0(t,e,n){let r=qt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)Gt(n,s)?(a=Qe(n,s),r=Aa(r,a,o.snap)):Gt(s,n)&&(a=Qe(s,n),r=Aa(r,Z(),o.snap.getChild(a)));else if(o.children){if(Gt(n,s))a=Qe(n,s),r=e0(r,a,o.children);else if(Gt(s,n))if(a=Qe(s,n),Y(a))r=e0(r,Z(),o.children);else{let c=ni(o.children,z(a));if(c){let l=c.getChild(le(a));r=Aa(r,Z(),l)}}}else throw ti("WriteRecord should have .snap or .children")}}return r}function Y0(t,e,n,r,i){if(!r&&!i){let o=vi(t.visibleWrites,e);if(o!=null)return o;{let s=gr(t.visibleWrites,e);if(Cv(s))return n;if(n==null&&!wv(s,Z()))return null;{let a=n||V.EMPTY_NODE;return Vo(s,a)}}}else{let o=gr(t.visibleWrites,e);if(!i&&Cv(o))return n;if(!i&&n==null&&!wv(o,Z()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Gt(l.path,e)||Gt(e,l.path))},a=q0(t.allWrites,s,e),c=n||V.EMPTY_NODE;return Vo(a,c)}}}function FU(t,e,n){let r=V.EMPTY_NODE,i=vi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ye,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=gr(t.visibleWrites,e);return n.forEachChild(ye,(s,a)=>{let c=Vo(gr(o,new ie(s)),a);r=r.updateImmediateChild(s,c)}),n0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=gr(t.visibleWrites,e);return n0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function LU(t,e,n,r,i){I(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Ae(e,n);if(wv(t.visibleWrites,o))return null;{let s=gr(t.visibleWrites,o);return Cv(s)?i.getChild(n):Vo(s,i.getChild(n))}}function VU(t,e,n,r){let i=Ae(e,n),o=vi(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=gr(t.visibleWrites,i);return Vo(s,r.getNode().getImmediateChild(n))}else return null}function jU(t,e){return vi(t.visibleWrites,e)}function UU(t,e,n,r,i,o,s){let a,c=gr(t.visibleWrites,e),l=vi(c,Z());if(l!=null)a=l;else if(n!=null)a=Vo(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function BU(){return{visibleWrites:qt.empty(),allWrites:[],lastWriteId:-1}}function sd(t,e,n,r){return Y0(t.writeTree,t.treePath,e,n,r)}function qv(t,e){return FU(t.writeTree,t.treePath,e)}function r0(t,e,n,r){return LU(t.writeTree,t.treePath,e,n,r)}function ad(t,e){return jU(t.writeTree,Ae(t.treePath,e))}function $U(t,e,n,r,i,o){return UU(t.writeTree,t.treePath,e,n,r,i,o)}function Yv(t,e,n){return VU(t.writeTree,t.treePath,e,n)}function K0(t,e){return Z0(Ae(t.treePath,e),t.writeTree)}function Z0(t,e){return{treePath:t,writeTree:e}}var Dv=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;I(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),I(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Ra(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Na(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,Fo(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ra(r,e.snapshotNode,i.oldSnap));else throw ti("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var bv=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Q0=new bv,Pa=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new fn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yv(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:mi(this.viewCache_),o=$U(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function HU(t){return{filter:t}}function WU(t,e){I(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),I(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function zU(t,e,n,r,i){let o=new Dv,s,a;if(n.type===dn.OVERWRITE){let l=n;l.source.fromUser?s=Tv(t,e,l.path,l.snap,r,i,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Y(l.path),s=cd(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===dn.MERGE){let l=n;l.source.fromUser?s=qU(t,e,l.path,l.children,r,i,o):(I(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Sv(t,e,l.path,l.children,r,i,a,o))}else if(n.type===dn.ACK_USER_WRITE){let l=n;l.revert?s=ZU(t,e,l.path,r,i,o):s=YU(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===dn.LISTEN_COMPLETE)s=KU(t,e,n.path,r,o);else throw ti("Unknown operation type: "+n.type);let c=o.getChanges();return GU(e,s,c),{viewCache:s,changes:c}}function GU(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=od(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push($0(od(e)))}}function J0(t,e,n,r,i,o){let s=e.eventCache;if(ad(r,n)!=null)return e;{let a,c;if(Y(n))if(I(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=mi(e),u=l instanceof V?l:V.EMPTY_NODE,d=qv(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=sd(r,mi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=z(n);if(l===".priority"){I(yr(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=r0(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=le(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=r0(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=Yv(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Sa(e,a,s.isFullyInitialized()||Y(n),t.filter.filtersNodes())}}function cd(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(Y(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=z(n);if(!c.isCompleteForPath(n)&&yr(n)>1)return e;let p=le(n),M=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),M):l=u.updateChild(c.getNode(),h,M,p,Q0,null)}let d=z0(e,l,c.isFullyInitialized()||Y(n),u.filtersNodes()),f=new Pa(i,d,o);return J0(t,d,n,i,f,a)}function Tv(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new Pa(i,e,o);if(Y(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Sa(e,l,!0,t.filter.filtersNodes());else{let d=z(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Sa(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=le(n),h=a.getNode().getImmediateChild(d),p;if(Y(f))p=r;else{let D=u.getCompleteChild(d);D!=null?O0(f)===".priority"&&D.getChild(F0(f)).isEmpty()?p=D:p=D.updateChild(f,r):p=V.EMPTY_NODE}if(h.equals(p))c=e;else{let D=t.filter.updateChild(a.getNode(),d,p,f,u,s);c=Sa(e,D,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function i0(t,e){return t.eventCache.isCompleteForChild(e)}function qU(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=Ae(n,c);i0(e,z(u))&&(a=Tv(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=Ae(n,c);i0(e,z(u))||(a=Tv(t,a,u,l,i,o,s))}),a}function o0(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Sv(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Y(n)?l=r:l=new nt(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=o0(t,h,f);c=cd(t,c,new ie(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),D=o0(t,p,f);c=cd(t,c,new ie(d),D,i,o,s,a)}}),c}function YU(t,e,n,r,i,o,s){if(ad(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Y(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return cd(t,e,n,c.getNode().getChild(n),i,o,a,s);if(Y(n)){let l=new nt(null);return c.getNode().forEachChild(Ro,(u,d)=>{l=l.set(new ie(u),d)}),Sv(t,e,n,l,i,o,a,s)}else return e}else{let l=new nt(null);return r.foreach((u,d)=>{let f=Ae(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Sv(t,e,n,l,i,o,a,s)}}function KU(t,e,n,r,i){let o=e.serverCache,s=z0(e,o.getNode(),o.isFullyInitialized()||Y(n),o.isFiltered());return J0(t,s,n,r,Q0,i)}function ZU(t,e,n,r,i,o){let s;if(ad(r,n)!=null)return e;{let a=new Pa(r,e,i),c=e.eventCache.getNode(),l;if(Y(n)||z(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=sd(r,mi(e));else{let d=e.serverCache.getNode();I(d instanceof V,"serverChildren would be complete if leaf node"),u=qv(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=z(n),d=Yv(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,le(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,V.EMPTY_NODE,le(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=sd(r,mi(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||ad(r,Z())!=null,Sa(e,l,s,t.filter.filtersNodes())}}var Av=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new xa(r.getIndex()),o=wU(r);this.processor_=HU(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(V.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(V.EMPTY_NODE,a.getNode(),null),u=new fn(c,s.isFullyInitialized(),i.filtersNodes()),d=new fn(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=vd(d,u),this.eventGenerator_=new Ev(this.query_)}get query(){return this.query_}};function QU(t){return t.viewCache_.serverCache.getNode()}function JU(t){return od(t.viewCache_)}function XU(t,e){let n=mi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Y(e)&&!n.getImmediateChild(z(e)).isEmpty())?n.getChild(e):null}function s0(t){return t.eventRegistrations_.length===0}function eB(t,e){t.eventRegistrations_.push(e)}function a0(t,e,n){let r=[];if(n){I(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function c0(t,e,n,r){e.type===dn.MERGE&&e.source.queryId!==null&&(I(mi(t.viewCache_),"We should always have a full cache before handling merges"),I(od(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=zU(t.processor_,i,e,n,r);return WU(t.processor_,o.viewCache),I(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,X0(t,o.changes,o.viewCache.eventCache.getNode(),null)}function tB(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ye,(o,s)=>{r.push(Fo(o,s))}),n.isFullyInitialized()&&r.push($0(n.getNode())),X0(t,r,n.getNode(),e)}function X0(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return TU(t.eventGenerator_,e,n,i)}var ld,ud=class{constructor(){this.views=new Map}};function nB(t){I(!ld,"__referenceConstructor has already been defined"),ld=t}function rB(){return I(ld,"Reference.ts has not been loaded"),ld}function iB(t){return t.views.size===0}function Kv(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return I(o!=null,"SyncTree gave us an op for an invalid query."),c0(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(c0(s,e,n,r));return o}}function eT(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=sd(n,i?r:null),c=!1;a?c=!0:r instanceof V?(a=qv(n,r),c=!1):(a=V.EMPTY_NODE,c=!1);let l=vd(new fn(a,c,!1),new fn(r,i,!1));return new Av(e,l)}return s}function oB(t,e,n,r,i,o){let s=eT(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),eB(s,n),tB(s,n)}function sB(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=_r(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(a0(l,n,r)),s0(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(a0(c,n,r)),s0(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!_r(t)&&o.push(new(rB())(e._repo,e._path)),{removed:o,events:s}}function tT(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function vr(t,e){let n=null;for(let r of t.views.values())n=n||XU(r,e);return n}function nT(t,e){if(e._queryParams.loadsAllData())return _d(t);{let r=e._queryIdentifier;return t.views.get(r)}}function rT(t,e){return nT(t,e)!=null}function _r(t){return _d(t)!=null}function _d(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var dd;function aB(t){I(!dd,"__referenceConstructor has already been defined"),dd=t}function cB(){return I(dd,"Reference.ts has not been loaded"),dd}var lB=1,fd=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new nt(null),this.pendingWriteTree_=BU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function iT(t,e,n,r,i){return NU(t.pendingWriteTree_,e,n,r,i),i?Ha(t,new Lo(W0(),e,n)):[]}function fi(t,e,n=!1){let r=RU(t.pendingWriteTree_,e);if(xU(t.pendingWriteTree_,e)){let o=new nt(null);return r.snap!=null?o=o.set(Z(),!0):tt(r.children,s=>{o=o.set(new ie(s),!0)}),Ha(t,new Iv(r.path,o,n))}else return[]}function $a(t,e,n){return Ha(t,new Lo(zv(),e,n))}function uB(t,e,n){let r=nt.fromObject(n);return Ha(t,new id(zv(),e,r))}function dB(t,e){return Ha(t,new rd(zv(),e))}function fB(t,e,n){let r=Qv(t,n);if(r){let i=Jv(r),o=i.path,s=i.queryId,a=Qe(o,e),c=new rd(Gv(s),a);return Xv(t,o,c)}else return[]}function hd(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||rT(s,e))){let c=sB(s,e,n,r);iB(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>_r(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=mB(f);for(let p=0;p<h.length;++p){let D=h[p],M=D.query,k=cT(t,D);t.listenProvider_.startListening(Ma(M),Oa(t,M),k.hashFn,k.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Ma(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(Id(f));t.listenProvider_.stopListening(Ma(f),h)}))}gB(t,l)}return a}function oT(t,e,n,r){let i=Qv(t,r);if(i!=null){let o=Jv(i),s=o.path,a=o.queryId,c=Qe(s,e),l=new Lo(Gv(a),c,n);return Xv(t,s,l)}else return[]}function hB(t,e,n,r){let i=Qv(t,r);if(i){let o=Jv(i),s=o.path,a=o.queryId,c=Qe(s,e),l=nt.fromObject(n),u=new id(Gv(a),c,l);return Xv(t,s,u)}else return[]}function Mv(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Qe(f,i);o=o||vr(h,p),s=s||_r(h)});let a=t.syncPointTree_.get(i);a?(s=s||_r(a),o=o||vr(a,Z())):(a=new ud,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=V.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let D=vr(p,Z());D&&(o=o.updateImmediateChild(h,D))}));let l=rT(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Id(e);I(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=vB();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=yd(t.pendingWriteTree_,i),d=oB(a,e,n,u,o,c);if(!l&&!s&&!r){let f=nT(a,e);d=d.concat(yB(t,e,f))}return d}function Zv(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Qe(s,e),l=vr(a,c);if(l)return l});return Y0(i,e,o,n,!0)}function pB(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Qe(l,n);r=r||vr(u,d)});let i=t.syncPointTree_.get(n);i?r=r||vr(i,Z()):(i=new ud,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new fn(r,!0,!1):null,a=yd(t.pendingWriteTree_,e._path),c=eT(i,e,a,o?s.getNode():V.EMPTY_NODE,o);return JU(c)}function Ha(t,e){return sT(e,t.syncPointTree_,null,yd(t.pendingWriteTree_,Z()))}function sT(t,e,n,r){if(Y(t.path))return aT(t,e,n,r);{let i=e.get(Z());n==null&&i!=null&&(n=vr(i,Z()));let o=[],s=z(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=K0(r,s);o=o.concat(sT(a,c,l,u))}return i&&(o=o.concat(Kv(i,t,r,n))),o}}function aT(t,e,n,r){let i=e.get(Z());n==null&&i!=null&&(n=vr(i,Z()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=K0(r,s),u=t.operationForChild(s);u&&(o=o.concat(aT(u,a,c,l)))}),i&&(o=o.concat(Kv(i,t,r,n))),o}function cT(t,e){let n=e.query,r=Oa(t,n);return{hashFn:()=>(QU(e)||V.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?fB(t,n._path,r):dB(t,n._path);{let o=Pj(i,n);return hd(t,n,null,o)}}}}function Oa(t,e){let n=Id(e);return t.queryToTagMap.get(n)}function Id(t){return t._path.toString()+"$"+t._queryIdentifier}function Qv(t,e){return t.tagToQueryMap.get(e)}function Jv(t){let e=t.indexOf("$");return I(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ie(t.substr(0,e))}}function Xv(t,e,n){let r=t.syncPointTree_.get(e);I(r,"Missing sync point for query tag that we're tracking");let i=yd(t.pendingWriteTree_,e);return Kv(r,n,i,null)}function mB(t){return t.fold((e,n,r)=>{if(n&&_r(n))return[_d(n)];{let i=[];return n&&(i=tT(n)),tt(r,(o,s)=>{i=i.concat(s)}),i}})}function Ma(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(cB())(t._repo,t._path):t}function gB(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Id(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function vB(){return lB++}function yB(t,e,n){let r=e._path,i=Oa(t,e),o=cT(t,n),s=t.listenProvider_.startListening(Ma(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)I(!_r(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!Y(l)&&u&&_r(u))return[_d(u).query];{let f=[];return u&&(f=f.concat(tT(u).map(h=>h.query))),tt(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Ma(u),Oa(t,u))}}return s}var Nv=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Rv=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Ae(this.path_,e);return new t(this.syncTree_,n)}node(){return Zv(this.syncTree_,this.path_)}},_B=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},l0=function(t,e,n){if(!t||typeof t!="object")return t;if(I(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return IB(t[".sv"],e,n);if(typeof t[".sv"]=="object")return EB(t[".sv"],e);I(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},IB=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:I(!1,"Unexpected server value: "+t)}},EB=function(t,e,n){t.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&I(!1,"Unexpected increment value: "+r);let i=e.node();if(I(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},wB=function(t,e,n,r){return ey(e,new Rv(n,t),r)},lT=function(t,e,n){return ey(t,new Nv(e),n)};function ey(t,e,n){let r=t.getPriority().val(),i=l0(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=l0(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new Oo(a,xe(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Oo(i))),s.forEachChild(ye,(a,c)=>{let l=ey(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var ka=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function ty(t,e){let n=e instanceof ie?e:new ie(e),r=t,i=z(n);for(;i!==null;){let o=ni(r.node.children,i)||{children:{},childCount:0};r=new ka(i,r,o),n=le(n),i=z(n)}return r}function Bo(t){return t.node.value}function uT(t,e){t.node.value=e,xv(t)}function dT(t){return t.node.childCount>0}function CB(t){return Bo(t)===void 0&&!dT(t)}function Ed(t,e){tt(t.node.children,(n,r)=>{e(new ka(n,t,r))})}function fT(t,e,n,r){n&&!r&&e(t),Ed(t,i=>{fT(i,e,!0,r)}),n&&r&&e(t)}function DB(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Wa(t){return new ie(t.parent===null?t.name:Wa(t.parent)+"/"+t.name)}function xv(t){t.parent!==null&&bB(t.parent,t.name,t)}function bB(t,e,n){let r=CB(n),i=cn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,xv(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,xv(t))}var TB=/[\[\].#$\/\u0000-\u001F\u007F]/,SB=/[\[\].#$\u0000-\u001F\u007F]/,Wg=10*1024*1024,hT=function(t){return typeof t=="string"&&t.length!==0&&!TB.test(t)},pT=function(t){return typeof t=="string"&&t.length!==0&&!SB.test(t)},AB=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),pT(t)};var mT=function(t,e,n,r){r&&e===void 0||ny(_u(t,"value"),e,n)},ny=function(t,e,n){let r=n instanceof ie?new iv(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ui(r));if(typeof e=="function")throw new Error(t+"contains a function "+ui(r)+" with contents = "+e.toString());if(g0(e))throw new Error(t+"contains "+e.toString()+" "+ui(r));if(typeof e=="string"&&e.length>Wg/3&&oa(e)>Wg)throw new Error(t+"contains a string greater than "+Wg+" utf8 bytes "+ui(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(tt(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!hT(s)))throw new Error(t+" contains an invalid key ("+s+") "+ui(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cU(r,s),ny(t,a,r),lU(r)}),i&&o)throw new Error(t+' contains ".value" child '+ui(r)+" in addition to actual children.")}};var gT=function(t,e,n,r){if(!(r&&n===void 0)&&!pT(n))throw new Error(_u(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},MB=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gT(t,e,n,r)},ry=function(t,e){if(z(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},NB=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!hT(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!AB(n))throw new Error(_u(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Pv=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function iy(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!$v(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function vT(t,e,n){iy(t,n),yT(t,r=>$v(r,e))}function hn(t,e,n){iy(t,n),yT(t,r=>Gt(r,e)||Gt(e,r))}function yT(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(RB(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function RB(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();hi&&$e("event: "+n.toString()),Uo(r)}}}var xB="repo_interrupt",PB=25,Ov=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pv,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nd(),this.transactionQueueTree_=new ka,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function OB(t,e,n){if(t.stats_=Bv(t.repoInfo_),t.forceRestClient_||Lj())t.server_=new mv(t.repoInfo_,(r,i,o,s)=>{u0(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>d0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{De(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Hv(t.repoInfo_,e,(r,i,o,s)=>{u0(t,r,i,o,s)},r=>{d0(t,r)},r=>{kB(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=jj(t.repoInfo_,()=>new _v(t.stats_,t.server_)),t.infoData_=new gv,t.infoSyncTree_=new fd({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=$a(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),sy(t,"connected",!1),t.serverSyncTree_=new fd({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);hn(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function _T(t){let n=t.infoData_.getNode(new ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function oy(t){return _B({timestamp:_T(t)})}function u0(t,e,n,r,i){t.dataUpdateCount++;let o=new ie(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=ia(n,l=>xe(l));s=hB(t.serverSyncTree_,o,c,i)}else{let c=xe(n);s=oT(t.serverSyncTree_,o,c,i)}else if(r){let c=ia(n,l=>xe(l));s=uB(t.serverSyncTree_,o,c)}else{let c=xe(n);s=$a(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Cd(t,o)),hn(t.eventQueue_,a,s)}function d0(t,e){sy(t,"connected",e),e===!1&&VB(t)}function kB(t,e){tt(e,(n,r)=>{sy(t,n,r)})}function sy(t,e,n){let r=new ie("/.info/"+e),i=xe(n);t.infoData_.updateSnapshot(r,i);let o=$a(t.infoSyncTree_,r,i);hn(t.eventQueue_,r,o)}function IT(t){return t.nextWriteId_++}function FB(t,e,n){let r=pB(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=xe(i).withIndex(e._queryParams.getIndex());Mv(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=$a(t.serverSyncTree_,e._path,o);else{let a=Oa(t.serverSyncTree_,e);s=oT(t.serverSyncTree_,e._path,o,a)}return hn(t.eventQueue_,e._path,s),hd(t.serverSyncTree_,e,n,null,!0),o},i=>(wd(t,"get for query "+De(e)+" failed: "+i),Promise.reject(new Error(i))))}function LB(t,e,n,r,i){wd(t,"set",{path:e.toString(),value:n,priority:r});let o=oy(t),s=xe(n,r),a=Zv(t.serverSyncTree_,e),c=lT(s,a,o),l=IT(t),u=iT(t.serverSyncTree_,e,c,l,!0);iy(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||et("set at "+e+" failed: "+f);let D=fi(t.serverSyncTree_,l,!p);hn(t.eventQueue_,e,D),BB(t,i,f,h)});let d=bT(t,e);Cd(t,d),hn(t.eventQueue_,d,[])}function VB(t){wd(t,"onDisconnectEvents");let e=oy(t),n=nd();vv(t.onDisconnect_,Z(),(i,o)=>{let s=wB(i,o,t.serverSyncTree_,e);H0(n,i,s)});let r=[];vv(n,Z(),(i,o)=>{r=r.concat($a(t.serverSyncTree_,i,o));let s=bT(t,i);Cd(t,s)}),t.onDisconnect_=nd(),hn(t.eventQueue_,Z(),r)}function jB(t,e,n){let r;z(e._path)===".info"?r=Mv(t.infoSyncTree_,e,n):r=Mv(t.serverSyncTree_,e,n),vT(t.eventQueue_,e._path,r)}function kv(t,e,n){let r;z(e._path)===".info"?r=hd(t.infoSyncTree_,e,n):r=hd(t.serverSyncTree_,e,n),vT(t.eventQueue_,e._path,r)}function UB(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xB)}function wd(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),$e(n,...e)}function BB(t,e,n,r){e&&Uo(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function ET(t,e,n){return Zv(t.serverSyncTree_,e,n)||V.EMPTY_NODE}function ay(t,e=t.transactionQueueTree_){if(e||Dd(t,e),Bo(e)){let n=CT(t,e);I(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&$B(t,Wa(e),n)}else dT(e)&&Ed(e,n=>{ay(t,n)})}function $B(t,e,n){let r=n.map(l=>l.currentWriteId),i=ET(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];I(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Qe(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{wd(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(fi(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Dd(t,ty(t.transactionQueueTree_,e)),ay(t,t.transactionQueueTree_),hn(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Uo(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{et("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Cd(t,e)}},s)}function Cd(t,e){let n=wT(t,e),r=Wa(n),i=CT(t,n);return HB(t,i,r),r}function HB(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Qe(n,c.path),u=!1,d;if(I(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(fi(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=PB)u=!0,d="maxretry",i=i.concat(fi(t.serverSyncTree_,c.currentWriteId,!0));else{let f=ET(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){ny("transaction failed: Data returned ",h,c.path);let p=xe(h);typeof h=="object"&&h!=null&&cn(h,".priority")||(p=p.updatePriority(f.getPriority()));let M=c.currentWriteId,k=oy(t),ue=lT(p,f,k);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=ue,c.currentWriteId=IT(t),s.splice(s.indexOf(M),1),i=i.concat(iT(t.serverSyncTree_,c.path,ue,c.currentWriteId,c.applyLocally)),i=i.concat(fi(t.serverSyncTree_,M,!0))}else u=!0,d="nodata",i=i.concat(fi(t.serverSyncTree_,c.currentWriteId,!0))}hn(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Dd(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Uo(r[a]);ay(t,t.transactionQueueTree_)}function wT(t,e){let n,r=t.transactionQueueTree_;for(n=z(e);n!==null&&Bo(r)===void 0;)r=ty(r,n),e=le(e),n=z(e);return r}function CT(t,e){let n=[];return DT(t,e,n),n.sort((r,i)=>r.order-i.order),n}function DT(t,e,n){let r=Bo(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ed(e,i=>{DT(t,i,n)})}function Dd(t,e){let n=Bo(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,uT(e,n.length>0?n:void 0)}Ed(e,r=>{Dd(t,r)})}function bT(t,e){let n=Wa(wT(t,e)),r=ty(t.transactionQueueTree_,e);return DB(r,i=>{zg(t,i)}),zg(t,r),fT(r,i=>{zg(t,i)}),n}function zg(t,e){let n=Bo(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(I(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(I(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(fi(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?uT(e,void 0):n.length=o+1,hn(t.eventQueue_,Wa(e),i);for(let s=0;s<r.length;s++)Uo(r[s])}}function WB(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function zB(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):et(`Invalid query segment '${n}' in query '${t}'`)}return e}var f0=function(t,e){let n=GB(t),r=n.namespace;n.domain==="firebase.com"&&On(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&On("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Aj();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Yu(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ie(n.pathString)}},GB=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=WB(t.substring(u,d)));let f=zB(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var h0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qB=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=h0.charAt(n%64),n=Math.floor(n/64);I(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=h0.charAt(e[i]);return I(s.length===20,"nextPushId: Length should be 20."),s}}();var pd=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+De(this.snapshot.exportVal())}},md=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Fa=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return I(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Fv=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Y(this._path)?null:O0(this._path)}get ref(){return new pn(this._repo,this._path)}get _queryIdentifier(){let e=Jb(this._queryParams),n=Uv(e);return n==="{}"?"default":n}get _queryObject(){return Jb(this._queryParams)}isEqual(e){if(e=Ne(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=$v(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+aU(this._path)}};var pn=class t extends Fv{constructor(e,n){super(e,n,new pv,!1)}get parent(){let e=F0(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},La=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new ie(e),r=gi(this.ref,e);return new t(this._node.getChild(n),r,ye)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,gi(this.ref,r),ye)))}hasChild(e){let n=new ie(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function TT(t,e){return t=Ne(t),t._checkNotDeleted("ref"),e!==void 0?gi(t._root,e):t._root}function gi(t,e){return t=Ne(t),z(t._path)===null?MB("child","path",e,!1):gT("child","path",e,!1),new pn(t._repo,Ae(t._path,e))}function ST(t,e){t=Ne(t),ry("push",t._path),mT("push",e,t._path,!0);let n=_T(t._repo),r=qB(n),i=gi(t,r),o=gi(t,r),s;return e!=null?s=bd(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function AT(t){return ry("remove",t._path),bd(t,null)}function bd(t,e){t=Ne(t),ry("set",t._path),mT("set",e,t._path,!1);let n=new sr;return LB(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Td(t){t=Ne(t);let e=new Fa(()=>{}),n=new Va(e);return FB(t._repo,t,n).then(r=>new La(r,new pn(t._repo,t._path),t._queryParams.getIndex()))}var Va=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new pd("value",this,new La(e.snapshotNode,new pn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new md(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},gd=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new md(this,e,n):null}createEvent(e,n){I(e.childName!=null,"Child events should have a childName.");let r=gi(new pn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new pd(e.type,this,new La(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function za(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{kv(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Fa(n,o||void 0),a=e==="value"?new Va(s):new gd(e,s);return jB(t._repo,t,a),()=>kv(t._repo,t,a)}function cy(t,e,n,r){return za(t,"value",e,n,r)}function ly(t,e,n,r){return za(t,"child_added",e,n,r)}function uy(t,e,n,r){return za(t,"child_changed",e,n,r)}function dy(t,e,n,r){return za(t,"child_moved",e,n,r)}function fy(t,e,n,r){return za(t,"child_removed",e,n,r)}function hy(t,e,n){let r=null,i=n?new Fa(n):null;e==="value"?r=new Va(i):e&&(r=new gd(e,i)),kv(t._repo,t,r)}nB(pn);aB(pn);var YB="FIREBASE_DATABASE_EMULATOR_HOST",Lv={},KB=!1;function ZB(t,e,n,r){t.repoInfo_=new Yu(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function QB(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||On("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$e("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=f0(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[YB]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=f0(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Ta(Ta.OWNER):new Qg(t.name,t.options,e);NB("Invalid Firebase Database URL",s),Y(s.path)||On("Database URL must point to the root of a Firebase Database (not including a child path).");let d=XB(a,t,u,new Zg(t.name,n));return new Vv(d,t)}function JB(t,e){let n=Lv[e];(!n||n[t.key]!==t)&&On(`Database ${e}(${t.repoInfo_}) has already been deleted.`),UB(t),delete n[t.key]}function XB(t,e,n,r){let i=Lv[e.name];i||(i={},Lv[e.name]=i);let o=i[t.toURLString()];return o&&On("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ov(t,KB,n,r),i[t.toURLString()]=o,o}var Vv=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(OB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pn(this._repo,Z())),this._rootInternal}_delete(){return this._rootInternal!==null&&(JB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&On("Cannot call "+e+" on a deleted database.")}};function MT(t=Io(),e){let n=la(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=aD("database");r&&NT(n,...r)}return n}function NT(t,e,n,r={}){t=Ne(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&On("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&On('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ta(Ta.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:cD(r.mockUserToken,t.app.options.projectId);o=new Ta(s)}ZB(i,e,n,o)}function e2(t){bj(dr),ur(new Dt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return QB(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Se(kb,Fb,t),Se(kb,Fb,"esm2017")}Hv.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Hv.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};e2();var yi,Pe=function(t){return t.added="child_added",t.removed="child_removed",t.changed="child_changed",t.moved="child_moved",t.value="value",t}(Pe||{}),t2=Object.freeze((yi={},yi[Pe.added]=ly,yi[Pe.removed]=fy,yi[Pe.changed]=uy,yi[Pe.moved]=dy,yi[Pe.value]=cy,yi));function my(t,e){return new L(function(n){var r=t2[e](t,function(i,o){n.next({snapshot:i,prevKey:o,event:e})},n.error.bind(n));return{unsubscribe:function(){hy(t,e,r)}}}).pipe(Af(0))}var Sd=function(){return Sd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Sd.apply(this,arguments)};function py(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function n2(t){return(t==null||t.length===0)&&(t=[Pe.added,Pe.removed,Pe.changed,Pe.moved]),t}function RT(t,e){return e===void 0&&(e={}),my(t,Pe.value).pipe(x(function(n){return gy(n,e)}))}function gy(t,e){var n;e===void 0&&(e={});var r=t.snapshot.val();return!t.snapshot.exists()||typeof r!="object"?r:Sd(Sd({},r),e.keyField?(n={},n[e.keyField]=t.snapshot.key,n):null)}function r2(t){return oe(Td(t)).pipe(x(function(e){var n=Pe.value;return{snapshot:e,prevKey:null,event:n}}))}function xT(t,e){e===void 0&&(e={});var n=n2(e.events);return r2(t).pipe(Fe(function(r){var i=[N(r)];return n.forEach(function(o){i.push(my(t,o))}),Tf.apply(void 0,i).pipe(as(o2,[]))}),Mf())}function PT(t,e){return e===void 0&&(e={}),xT(t).pipe(x(function(n){return n.map(function(r){return gy(r,e)})}))}function OT(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].snapshot.key===e)return r;return-1}function i2(t,e){if(e==null)return 0;var n=OT(t,e);return n===-1?t.length:n+1}function o2(t,e){var n=e.snapshot,r=e.prevKey,i=e.event,o=n.key,s=OT(t,o),a=i2(t,r||void 0);switch(i){case Pe.value:if(e.snapshot&&e.snapshot.exists()){var c=null;e.snapshot.forEach(function(d){var f={snapshot:d,event:Pe.value,prevKey:c};return c=d.key,t=py(py([],t,!0),[f],!1),!1})}return t;case Pe.added:if(s>-1){var l=t[s-1];(l&&l.snapshot.key||null)!==r&&(t=t.filter(function(d){return d.snapshot.key!==n.key}),t.splice(a,0,e))}else{if(r==null)return py([e],t,!0);t=t.slice(),t.splice(a,0,e)}return t;case Pe.removed:return t.filter(function(d){return d.snapshot.key!==n.key});case Pe.changed:return t.map(function(d){return d.snapshot.key===o?e:d});case Pe.moved:if(s>-1){var u=t.splice(s,1)[0];return t=t.slice(),t.splice(a,0,u),t}return t;default:return t}}var kn=class{constructor(e){return e}},kT="database",vy=class{constructor(){return ua(kT)}};var yy=new T("angularfire2.database-instances");function s2(t,e){let n=Du(kT,t,e);return n&&new kn(n)}function a2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new kn(r)}}var c2={provide:vy,deps:[[new Ke,yy]]},l2={provide:kn,useFactory:s2,deps:[[new Ke,yy],Mn]};function FT(t,...e){return Se("angularfire",oi.full,"rtdb"),at([l2,c2,{provide:yy,useFactory:a2(t),multi:!0,deps:[ne,Ue,Co,si,[new Ke,_a],[new Ke,wo],...e]}])}var LT=Re(PT,!0);var VT=Re(RT,!0);var jT=Re(Td,!0),UT=Re(MT,!0);var BT=Re(ST,!0);var Fn=Re(TT,!0);var $T=Re(AT,!0);var Ad=Re(bd,!0);var $o=class{uid;name;surname;email;role;createdAt;constructor(e,n,r,i,o,s){this.uid=e,this.name=n,this.surname=r,this.email=i,this.role=o,this.createdAt=s}},Ir=(n=>(n.ADMIN="ADMIN",n.USER="USER",n))(Ir||{});var rt=class t{constructor(e){this.database=e}COLLECTION_NAME="Persons";getPersonByUID(e){let n=Fn(this.database,`${this.COLLECTION_NAME}/${e}`);return VT(n)}savePerson(e){let n=Fn(this.database,`/${this.COLLECTION_NAME}/${e.uid}`);return Ad(n,e)}getPersonByGoogle(e){let n=`${e.displayName?.split(" ")[0]} ${e.displayName?.split(" ")[1]} `||"",r=e.displayName?.split(" ")[2];return new $o(e.uid,r||"Sin nombre",n,e.email||"sin-email@domain.com","USER",e.metadata.creationTime||new Date().toISOString())}static \u0275fac=function(n){return new(n||t)(O(kn))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})};var He=class t{constructor(e,n){this.auth=e;this.personService=n}getCurrentUser(){return this.auth.currentUser}register({email:e,password:n}){return Nb(this.auth,e,n)}login({email:e,password:n}){return xb(this.auth,e,n)}loginWithGoogle(){return Pb(this.auth,new bg)}logout(){return Ob(this.auth)}isAuthenticated(){return new L(e=>{Vg(this.auth,n=>{e.next(n)},n=>{e.error(n)})})}getUserAuthenticated(){return new L(e=>{Vg(this.auth,n=>{e.next(n)},n=>{e.error(n)})})}getUserDataAuth(){return oe(this.getUserAuthenticated()).pipe(Fe(e=>e&&e.uid?this.personService.getPersonByUID(e.uid).pipe(x(n=>n?{user:e,person:n}:{user:null,person:null}),Xe(()=>N({user:null,person:null}))):N({user:null,person:null})),Xe(()=>N({user:null,person:null})))}static \u0275fac=function(n){return new(n||t)(O(li),O(rt))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})};var Md=class t{constructor(e,n){this.personService=e;this.authService=n}person=null;ngOnInit(){this.authService.getUserAuthenticated().subscribe(e=>{e&&this.personService.getPersonByUID(e.uid).subscribe(n=>{n?this.person=n:this.person=this.personService.getPersonByGoogle(e)})})}static \u0275fac=function(n){return new(n||t)(C(rt),C(He))};static \u0275cmp=X({type:t,selectors:[["app-profile"]],standalone:!0,features:[ee],decls:28,vars:5,consts:[[1,"body"],[1,"container"],[1,"card"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"btn","btn-primary","mt-3"]],template:function(n,r){n&1&&(v(0,"div",0)(1,"div",1)(2,"h1"),y(3,"Perfil de Usuario"),g(),v(4,"div",2)(5,"ul",3)(6,"li",4)(7,"strong"),y(8,"Nombre:"),g(),y(9),g(),v(10,"li",4)(11,"strong"),y(12,"Apellido:"),g(),y(13),g(),v(14,"li",4)(15,"strong"),y(16,"Email:"),g(),y(17),g(),v(18,"li",4)(19,"strong"),y(20,"Rol:"),g(),y(21),g(),v(22,"li",4)(23,"strong"),y(24,"Fecha de creaci\xF3n:"),g(),y(25),g()()(),v(26,"button",5),y(27,"Editar Perfil"),g()()()),n&2&&(w(9),Ut(" ",r.person==null?null:r.person.name,""),w(4),Ut(" ",r.person==null?null:r.person.surname,""),w(4),Ut(" ",r.person==null?null:r.person.email,""),w(4),Ut(" ",r.person==null?null:r.person.role,""),w(4),Ut(" ",r.person==null?null:r.person.createdAt,""))},styles:[".body[_ngcontent-%COMP%]{background:linear-gradient(to right,#4facfe,#00f2fe);display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif}.container[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 6px #0000001a;width:100%;max-width:500px}h1[_ngcontent-%COMP%]{font-size:2rem;color:#333;margin-bottom:1.5rem;text-align:center}.card[_ngcontent-%COMP%]{border:none;border-radius:10px;overflow:hidden}.list-group-item[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;padding:.75rem 1rem;color:#333;background-color:#f9f9f9;border:none;border-bottom:1px solid #eaeaea}.list-group-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.btn-primary[_ngcontent-%COMP%]{width:100%;background-color:#4facfe;border:none;border-radius:.5rem;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00c6ff}"]})};var XT=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(C(nn),C(Lt))}}static{this.\u0275dir=he({type:t})}}return t})(),jd=(()=>{class t extends XT{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})()}static{this.\u0275dir=he({type:t,features:[Vt]})}}return t})(),Qa=new T(""),u2={provide:Qa,useExisting:En(()=>Dy),multi:!0},Dy=(()=>{class t extends jd{writeValue(n){this.setProperty("checked",n)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})()}static{this.\u0275dir=he({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&se("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[qr([u2]),Vt]})}}return t})(),d2={provide:Qa,useExisting:En(()=>Cr),multi:!0};function f2(){let t=Cn()?Cn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var h2=new T(""),Cr=(()=>{class t extends XT{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!f2())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(C(nn),C(Lt),C(h2,8))}}static{this.\u0275dir=he({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&se("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[qr([d2]),Vt]})}}return t})();function Er(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function eS(t){return t!=null&&typeof t.length=="number"}var tS=new T(""),nS=new T(""),p2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_e=class{static min(e){return m2(e)}static max(e){return g2(e)}static required(e){return v2(e)}static requiredTrue(e){return y2(e)}static email(e){return _2(e)}static minLength(e){return I2(e)}static maxLength(e){return E2(e)}static pattern(e){return w2(e)}static nullValidator(e){return rS(e)}static compose(e){return lS(e)}static composeAsync(e){return dS(e)}};function m2(t){return e=>{if(Er(e.value)||Er(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function g2(t){return e=>{if(Er(e.value)||Er(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function v2(t){return Er(t.value)?{required:!0}:null}function y2(t){return t.value===!0?null:{required:!0}}function _2(t){return Er(t.value)||p2.test(t.value)?null:{email:!0}}function I2(t){return e=>Er(e.value)||!eS(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function E2(t){return e=>eS(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function w2(t){if(!t)return rS;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Er(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function rS(t){return null}function iS(t){return t!=null}function oS(t){return Yr(t)?oe(t):t}function sS(t){let e={};return t.forEach(n=>{e=n!=null?E(E({},e),n):e}),Object.keys(e).length===0?null:e}function aS(t,e){return e.map(n=>n(t))}function C2(t){return!t.validate}function cS(t){return t.map(e=>C2(e)?e:n=>e.validate(n))}function lS(t){if(!t)return null;let e=t.filter(iS);return e.length==0?null:function(n){return sS(aS(n,e))}}function uS(t){return t!=null?lS(cS(t)):null}function dS(t){if(!t)return null;let e=t.filter(iS);return e.length==0?null:function(n){let r=aS(n,e).map(oS);return bf(r).pipe(x(sS))}}function fS(t){return t!=null?dS(cS(t)):null}function WT(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function hS(t){return t._rawValidators}function pS(t){return t._rawAsyncValidators}function _y(t){return t?Array.isArray(t)?t:[t]:[]}function xd(t,e){return Array.isArray(t)?t.includes(e):t===e}function zT(t,e){let n=_y(e);return _y(t).forEach(i=>{xd(n,i)||n.push(i)}),n}function GT(t,e){return _y(e).filter(n=>!xd(t,n))}var Pd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},qo=class extends Pd{get formDirective(){return null}get path(){return null}},Za=class extends Pd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Od=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},D2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pY=q(E({},D2),{"[class.ng-submitted]":"isSubmitted"}),Ko=(()=>{class t extends Od{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(C(Za,2))}}static{this.\u0275dir=he({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Hl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Vt]})}}return t})(),Zo=(()=>{class t extends Od{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(C(qo,10))}}static{this.\u0275dir=he({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Hl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Vt]})}}return t})();var Ga="VALID",Nd="INVALID",zo="PENDING",qa="DISABLED",wr=class{},kd=class extends wr{constructor(e,n){super(),this.value=e,this.source=n}},Ya=class extends wr{constructor(e,n){super(),this.pristine=e,this.source=n}},Ka=class extends wr{constructor(e,n){super(),this.touched=e,this.source=n}},Go=class extends wr{constructor(e,n){super(),this.status=e,this.source=n}},Iy=class extends wr{constructor(e){super(),this.source=e}},Ey=class extends wr{constructor(e){super(),this.source=e}};function by(t){return(Ud(t)?t.validators:t)||null}function b2(t){return Array.isArray(t)?uS(t):t||null}function Ty(t,e){return(Ud(e)?e.asyncValidators:t)||null}function T2(t){return Array.isArray(t)?fS(t):t||null}function Ud(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function mS(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,"");if(!r[n])throw new S(1001,"")}function gS(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new S(1002,"")})}var Yo=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ms(()=>this.statusReactive()),this.statusReactive=Ss(void 0),this._pristine=Ms(()=>this.pristineReactive()),this.pristineReactive=Ss(!0),this._touched=Ms(()=>this.touchedReactive()),this.touchedReactive=Ss(!1),this._events=new Me,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return wn(this.statusReactive)}set status(e){wn(()=>this.statusReactive.set(e))}get valid(){return this.status===Ga}get invalid(){return this.status===Nd}get pending(){return this.status==zo}get disabled(){return this.status===qa}get enabled(){return this.status!==qa}get pristine(){return wn(this.pristineReactive)}set pristine(e){wn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return wn(this.touchedReactive)}set touched(e){wn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(zT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(GT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(GT(e,this._rawAsyncValidators))}hasValidator(e){return xd(this._rawValidators,e)}hasAsyncValidator(e){return xd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(q(E({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ka(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ka(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(q(E({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ya(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ya(!0,r))}markAsPending(e={}){this.status=zo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Go(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(q(E({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=qa,this.errors=null,this._forEachChild(i=>{i.disable(q(E({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new kd(this.value,r)),this._events.next(new Go(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(q(E({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ga,this._forEachChild(r=>{r.enable(q(E({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(q(E({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ga||this.status===zo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new kd(this.value,n)),this._events.next(new Go(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(q(E({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qa:Ga}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=zo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=oS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Go(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ce,this.statusChanges=new Ce}_calculateStatus(){return this._allControlsDisabled()?qa:this.errors?Nd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zo)?zo:this._anyControlsHaveStatus(Nd)?Nd:Ga}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Ya(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ka(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ud(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=b2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=T2(this._rawAsyncValidators)}},Fd=class extends Yo{constructor(e,n,r){super(by(n),Ty(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){gS(this,!0,e),Object.keys(e).forEach(r=>{mS(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var wy=class extends Fd{};var Sy=new T("CallSetDisabledState",{providedIn:"root",factory:()=>Bd}),Bd="always";function S2(t,e){return[...e.path,t]}function qT(t,e,n=Bd){Ay(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),M2(t,e),R2(t,e),N2(t,e),A2(t,e)}function YT(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Vd(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ld(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function A2(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Ay(t,e){let n=hS(t);e.validator!==null?t.setValidators(WT(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=pS(t);e.asyncValidator!==null?t.setAsyncValidators(WT(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Ld(e._rawValidators,i),Ld(e._rawAsyncValidators,i)}function Vd(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=hS(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=pS(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Ld(e._rawValidators,r),Ld(e._rawAsyncValidators,r),n}function M2(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&vS(t,e)})}function N2(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&vS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function vS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function R2(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function x2(t,e){t==null,Ay(t,e)}function P2(t,e){return Vd(t,e)}function O2(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function k2(t){return Object.getPrototypeOf(t.constructor)===jd}function F2(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function L2(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Cr?n=o:k2(o)?r=o:i=o}),i||r||n||null}function V2(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function KT(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ZT(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Rd=class extends Yo{constructor(e=null,n,r){super(by(n),Ty(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ud(n)&&(n.nonNullable||n.initialValueIsDefault)&&(ZT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ZT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var j2=t=>t instanceof Rd;var Qo=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=he({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})();var yS=new T("");var U2={provide:qo,useExisting:En(()=>_i)},_i=(()=>{class t extends qo{get submitted(){return wn(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Ms(()=>this._submittedReactive()),this._submittedReactive=Ss(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ce,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Vd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return qT(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){YT(n.control||null,n,!1),V2(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),F2(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new Iy(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this._submittedReactive.set(!1),this.form._events.next(new Ey(this.form))}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(YT(r||null,n),j2(i)&&(qT(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);x2(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&P2(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ay(this.form,this),this._oldForm&&Vd(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||t)(C(tS,10),C(nS,10),C(Sy,8))}}static{this.\u0275dir=he({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&se("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[qr([U2]),Vt,Qn]})}}return t})();var B2={provide:Za,useExisting:En(()=>Ii)},Ii=(()=>{class t extends Za{set isDisabled(n){}static{this._ngModelWarningSentOnce=!1}constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Ce,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=L2(this,o)}ngOnChanges(n){this._added||this._setUpControl(),O2(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return S2(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||t)(C(qo,13),C(tS,10),C(nS,10),C(Qa,10),C(yS,8))}}static{this.\u0275dir=he({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[qr([B2]),Vt,Qn]})}}return t})(),$2={provide:Qa,useExisting:En(()=>$d),multi:!0};function _S(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function H2(t){return t.split(":")[0]}var $d=(()=>{class t extends jd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),i=_S(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=H2(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})()}static{this.\u0275dir=he({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&se("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[qr([$2]),Vt]})}}return t})(),IS=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(_S(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(C(Lt),C(nn),C($d,9))}}static{this.\u0275dir=he({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})(),W2={provide:Qa,useExisting:En(()=>ES),multi:!0};function QT(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function z2(t){return t.split(":")[0]}var ES=(()=>{class t extends jd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=z2(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})()}static{this.\u0275dir=he({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&se("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[qr([W2]),Vt]})}}return t})(),wS=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(QT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(QT(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(C(Lt),C(nn),C(ES,9))}}static{this.\u0275dir=he({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();var CS=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Zn({type:t})}static{this.\u0275inj=Kn({})}}return t})(),Cy=class extends Yo{constructor(e,n,r){super(by(n),Ty(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){gS(this,!1,e),e.forEach((r,i)=>{mS(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function JT(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Jo=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return JT(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Fd(i,o)}record(n,r=null){let i=this._reduceControls(n);return new wy(i,r)}control(n,r,i){let o={};return this.useNonNullable?(JT(r)?o=r:(o.validators=r,o.asyncValidators=i),new Rd(n,q(E({},o),{nonNullable:!0}))):new Rd(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new Cy(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof Rd)return n;if(n instanceof Yo)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var DS=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Sy,useValue:n.callSetDisabledState??Bd}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Zn({type:t})}static{this.\u0275inj=Kn({imports:[CS]})}}return t})(),Xo=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:yS,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Sy,useValue:n.callSetDisabledState??Bd}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Zn({type:t})}static{this.\u0275inj=Kn({imports:[CS]})}}return t})();var bS=t=>({"is-valid":t});function G2(t,e){t&1&&(v(0,"small",16),y(1,"Las credenciales son incorrectas"),g())}var Hd=class t{constructor(e,n,r){this.serviveAuth=n;this.router=r;this.formLogin=e.group({email:["",[_e.required,_e.email]],password:["",[_e.required,_e.minLength(6)]]})}formLogin;isInvalid=!1;OnSubmit(){this.formLogin.valid?(console.log("El login es valido"),this.serviveAuth.login(this.formLogin.value).then(e=>{this.router.navigate(["/"]).catch(n=>{console.log(n)})}).catch(()=>this.isInvalid=!0)):console.log("El login es invalido")}loginGoogle(){this.serviveAuth.loginWithGoogle().then(e=>{console.log("No esta bien configurao"),this.router.navigate(["/"]).catch(n=>{console.log(n)})}).catch(e=>console.log(e))}static \u0275fac=function(n){return new(n||t)(C(Jo),C(He),C(Ve))};static \u0275cmp=X({type:t,selectors:[["app-login"]],standalone:!0,features:[ee],decls:27,vars:8,consts:[[1,"body"],[1,"container","justify-content-center"],[1,"row"],[1,"col-md-12","d-flex","justify-content-center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","exampleInputEmail1"],["formControlName","email","type","text","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","gmail",1,"form-control",3,"ngClass"],["for","exampleInputPassword1"],["formControlName","password","type","password","id","exampleInputPassword1","placeholder","Password",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary","mb-1","mt-1"],["type","submit",1,"btn","btn-primary","d-none",3,"click"],[1,"bi","bi-google","m-1"],[1,"mt-3","d-flex","justify-content-center"],["routerLink","/singin"],[1,"text-danger"]],template:function(n,r){if(n&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),y(5,"Login"),g()(),v(6,"div",3)(7,"form",4),se("ngSubmit",function(){return r.OnSubmit()}),v(8,"div",5)(9,"label",6),y(10,"Email"),g(),J(11,"input",7),g(),v(12,"div",5)(13,"label",8),y(14,"Password"),g(),J(15,"input",9),Q(16,G2,2,0,"small",10),g(),v(17,"button",11),y(18,"Enviar"),g(),v(19,"button",12),se("click",function(){return r.loginGoogle()}),J(20,"i",13),y(21,"Login "),g()()(),v(22,"p",14),y(23,"\xBFNo tienes cuenta?"),v(24,"span")(25,"a",15),y(26,"Registrate aqu\xED"),g()()()()()()),n&2){let i,o;w(7),b("formGroup",r.formLogin),w(4),b("ngClass",wp(4,bS,(i=r.formLogin.get("email"))==null?null:i.valid)),w(4),b("ngClass",wp(6,bS,(o=r.formLogin.get("password"))==null?null:o.valid)),w(),b("ngIf",r.isInvalid)}},dependencies:[Te,nr,on,Xo,Qo,Cr,Ko,Zo,_i,Ii,or],styles:[".body[_ngcontent-%COMP%]{background:linear-gradient(to right,#4facfe,#00f2fe);height:100vh;display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif}.container[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 6px #0000001a}h1[_ngcontent-%COMP%]{font-size:2rem;color:#333;margin-bottom:1rem;text-align:center}.btn-primary[_ngcontent-%COMP%]{width:100%;background-color:#4facfe;border:none;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00c6ff}.form-control[_ngcontent-%COMP%]{border-radius:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600}"]})};function TS(){return t=>{let e=t.get("password")?.value,n=t.get("repeatPassword")?.value;return e===n?null:{passwordsMismatch:!0}}}var Ja=(t,e)=>({"is-valid":t,"is-invalid":e});function q2(t,e){t&1&&(v(0,"small",23),y(1,"Email ya en uso"),g())}function Y2(t,e){t&1&&(v(0,"div",23),y(1," Las contrase\xF1as no coinciden. "),g())}var Wd=class t{constructor(e,n,r,i){this.serviceAuth=n;this.router=r;this.personService=i;this.formSingIn=e.group({email:["",[_e.required,_e.email]],password:["",[_e.required,_e.minLength(6)]],repeatPassword:["",[_e.required]],name:["",[_e.required]],surname:["",[_e.required]],isAdmin:["",[]]},{validators:TS()})}formSingIn;isErrorEmail=!1;onSubmit(){this.formSingIn.valid&&this.serviceAuth.register(this.formSingIn.value).then(e=>{let n=new $o(e.user.uid,this.formSingIn.get("name")?.value,this.formSingIn.get("surname")?.value,this.formSingIn.get("email")?.value,this.formSingIn.get("isAdmin")?.value?"ADMIN":"USER",new Date().toString());this.personService.savePerson(n).catch(r=>console.log(r)),this.router.navigate(["/login"]).catch(r=>console.log(r))}).catch(()=>this.isErrorEmail=!0)}static \u0275fac=function(n){return new(n||t)(C(Jo),C(He),C(Ve),C(rt))};static \u0275cmp=X({type:t,selectors:[["app-sigin"]],standalone:!0,features:[ee],decls:41,vars:23,consts:[[1,"body"],[1,"container"],[1,"row"],[1,"col-md-12","d-flex","justify-content-center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","exampleInputEmail"],["formControlName","email","type","email","id","exampleInputEmail","placeholder","Email",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["for","exampleInputPassword"],["formControlName","password","type","password","id","exampleInputPassword","placeholder","Password",1,"form-control",3,"ngClass"],["for","exampleInputPasswordRepeat"],["formControlName","repeatPassword","type","password","id","exampleInputPasswordRepeat","placeholder","Repeat Password",1,"form-control",3,"ngClass"],["for","name"],["formControlName","name","type","text","id","name","placeholder","Name",1,"form-control",3,"ngClass"],["for","surname"],["formControlName","surname","type","text","id","surname","placeholder","Surname",1,"form-control",3,"ngClass"],[1,"form-check","form-switch","mt-1"],["formControlName","isAdmin","type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input"],[1,"form-check-label"],["type","submit",1,"btn","btn-primary","mt-2"],[1,"mt-3","d-flex","justify-content-center"],["routerLink","/login"],[1,"text-danger"]],template:function(n,r){if(n&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),y(5,"Registro"),g()(),v(6,"div",3)(7,"form",4),se("ngSubmit",function(){return r.onSubmit()}),v(8,"div",5)(9,"label",6),y(10,"Email"),g(),J(11,"input",7),g(),Q(12,q2,2,0,"small",8),v(13,"div",5)(14,"label",9),y(15,"Password"),g(),J(16,"input",10),g(),v(17,"div",5)(18,"label",11),y(19,"Repeat Password"),g(),J(20,"input",12),g(),Q(21,Y2,2,0,"div",8),v(22,"div",5)(23,"label",13),y(24,"Name"),g(),J(25,"input",14),g(),v(26,"div",5)(27,"label",15),y(28,"Surname"),g(),J(29,"input",16),g(),v(30,"div",17),J(31,"input",18),v(32,"label",19),y(33,"Is admin"),g()(),v(34,"button",20),y(35,"Enviar"),g(),v(36,"p",21),y(37,"\xBFYa tienes?"),v(38,"span")(39,"a",22),y(40,"Logueate aqu\xED"),g()()()()()()()()),n&2){let i,o,s,a,c;w(7),b("formGroup",r.formSingIn),w(4),b("ngClass",Bt(8,Ja,(i=r.formSingIn.get("email"))==null?null:i.valid,((i=r.formSingIn.get("email"))==null?null:i.invalid)&&((i=r.formSingIn.get("email"))==null?null:i.touched))),w(),b("ngIf",r.isErrorEmail),w(4),b("ngClass",Bt(11,Ja,(o=r.formSingIn.get("password"))==null?null:o.valid,((o=r.formSingIn.get("password"))==null?null:o.invalid)&&((o=r.formSingIn.get("password"))==null?null:o.touched))),w(4),b("ngClass",Bt(14,Ja,((s=r.formSingIn.get("repeatPassword"))==null?null:s.valid)&&!r.formSingIn.hasError("passwordsMismatch"),r.formSingIn.get("passwordsMismatch")&&((s=r.formSingIn.get("repeatPassword"))==null?null:s.touched))),w(),b("ngIf",r.formSingIn.hasError("passwordsMismatch")),w(4),b("ngClass",Bt(17,Ja,(a=r.formSingIn.get("name"))==null?null:a.valid,((a=r.formSingIn.get("name"))==null?null:a.invalid)&&((a=r.formSingIn.get("name"))==null?null:a.touched))),w(4),b("ngClass",Bt(20,Ja,(c=r.formSingIn.get("surname"))==null?null:c.valid,((c=r.formSingIn.get("surname"))==null?null:c.invalid)&&((c=r.formSingIn.get("surname"))==null?null:c.touched)))}},dependencies:[Te,nr,on,Xo,Qo,Cr,Dy,Ko,Zo,_i,Ii,or],styles:[".body[_ngcontent-%COMP%]{background:linear-gradient(to right,#4facfe,#00f2fe);height:100vh;display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif}.container[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 6px #0000001a}h1[_ngcontent-%COMP%]{font-size:2rem;color:#333;margin-bottom:1rem;text-align:center}.btn-primary[_ngcontent-%COMP%]{width:100%;background-color:#4facfe;border:none;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00c6ff}.form-control[_ngcontent-%COMP%]{border-radius:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600}"]})};var zd=class{id;name;description;priority;status;creationDate;expirationDate;isDelete;constructor(e,n,r,i,o,s,a,c){this.id=e,this.name=n,this.description=r,this.priority=i,this.status=o,this.creationDate=s,this.expirationDate=a,this.isDelete=c}getStatusText(){let e="";switch(this.status){case"IP":e="En proceso";break;case"C":e="Realizada";break;case"P":e="Pendiente";break}return e}getPriorityText(){switch(this.priority){case"H":return"Alta";case"M":return"Media";case"L":return"Baja";default:return""}}raisePriority(){switch(this.priority){case"L":this.priority="M";break;case"M":this.priority="H";break}}lowerPriority(){switch(this.priority){case"M":this.priority="L";break;case"H":this.priority="M";break}}changeStatus(){switch(this.status){case"C":this.status="IP";break;case"IP":this.status="C";break;case"P":this.status="IP";break}}getPriorityColor(){switch(this.priority){case"H":return"yellow";case"M":return"red";case"L":return"black";default:return""}}};var Dr=class t{constructor(e){this.database=e}setStatus(e){console.log("set status",e),this.getTaskById(e).then(n=>{let r=n.val();console.log(n.val()),r.status=="C"?r.status="P":r.status=="IP"?r.status="C":r.status="IP",this.saveTask(r).catch(i=>{console.log(i)})})}lowerPriority(e){this.getTaskById(e).then(n=>{let r=n.val();r.priority=="H"?r.priority="M":r.priority=="M"&&(r.priority="L"),this.saveTask(r).catch(i=>{console.log(i)})})}raisePriority(e){this.getTaskById(e).then(n=>{let r=n.val();r.priority=="M"?r.priority="H":r.priority=="L"&&(r.priority="M"),this.saveTask(r).catch(i=>{console.log(i)})}).catch(n=>{console.log(n)})}saveTask(e){console.log(e);let n=Fn(this.database,`/Tareas/${e.id}`);if(!e.id){let r=Fn(this.database,"/Tareas/");n=BT(r),n.key!=null&&(e.id=n.key,e.status="P")}return Ad(n,e)}getAllTasks(){let e=Fn(this.database,"/Tareas");return LT(e)}getTaskById(e){let n=Fn(this.database,"/Tareas/"+e);return jT(n)}removeTask(e){let n=Fn(this.database,`/Tareas/${e}`);return $T(n)}static \u0275fac=function(n){return new(n||t)(O(kn))};static \u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})};var Q2=(t,e,n)=>({"bg-danger":t,"bg-success":e,"bg-warning":n});function J2(t,e){t&1&&(v(0,"span"),y(1,"(Completa)"),g())}function X2(t,e){t&1&&(v(0,"span"),y(1,"(En proceso)"),g())}function e$(t,e){t&1&&(v(0,"span"),y(1,"(Pendiente)"),g())}function t$(t,e){if(t&1){let n=jt();v(0,"i",16),se("click",function(){It(n);let i=pe(4);return Et(i.lowerPriority(i.task.id))}),g()}}function n$(t,e){if(t&1&&(zr(0),Q(1,t$,1,0,"i",15),Gr()),t&2){let n=pe(3);w(),b("ngIf",n.personRole==n.PersonType.ADMIN)}}function r$(t,e){if(t&1&&(v(0,"span"),Q(1,n$,2,1,"ng-container",14),y(2," Alta"),g()),t&2){let n=pe(2);w(),b("ngIf",n.task.status!="C")}}function i$(t,e){if(t&1){let n=jt();v(0,"i",18),se("click",function(){It(n);let i=pe(4);return Et(i.raisePriority(i.task.id))}),g()}}function o$(t,e){if(t&1){let n=jt();v(0,"i",16),se("click",function(){It(n);let i=pe(4);return Et(i.lowerPriority(i.task.id))}),g()}}function s$(t,e){if(t&1&&(zr(0),Q(1,i$,1,0,"i",17)(2,o$,1,0,"i",15),Gr()),t&2){let n=pe(3);w(),b("ngIf",n.personRole==n.PersonType.ADMIN),w(),b("ngIf",n.personRole==n.PersonType.ADMIN)}}function a$(t,e){if(t&1&&(v(0,"span"),Q(1,s$,3,2,"ng-container",14),y(2," Media"),g()),t&2){let n=pe(2);w(),b("ngIf",n.task.status!="C")}}function c$(t,e){if(t&1){let n=jt();v(0,"i",18),se("click",function(){It(n);let i=pe(4);return Et(i.raisePriority(i.task.id))}),g()}}function l$(t,e){if(t&1&&(zr(0),Q(1,c$,1,0,"i",17),Gr()),t&2){let n=pe(3);w(),b("ngIf",n.personRole==n.PersonType.ADMIN)}}function u$(t,e){if(t&1&&(v(0,"span"),Q(1,l$,2,1,"ng-container",14),y(2," Baja"),g()),t&2){let n=pe(2);w(),b("ngIf",n.task.status!="C")}}function d$(t,e){if(t&1){let n=jt();v(0,"i",20),se("click",function(){It(n);let i=pe(3);return Et(i.setStatus(i.task.id))}),g()}}function f$(t,e){if(t&1&&(v(0,"span"),Q(1,d$,1,0,"i",19),y(2,"Completada"),g()),t&2){let n=pe(2);w(),b("ngIf",n.personRole==n.PersonType.ADMIN)}}function h$(t,e){if(t&1){let n=jt();v(0,"i",22),se("click",function(){It(n);let i=pe(3);return Et(i.setStatus(i.task.id))}),g()}}function p$(t,e){if(t&1&&(v(0,"span"),Q(1,h$,1,0,"i",21),y(2,"En proceso"),g()),t&2){let n=pe(2);w(),b("ngIf",n.personRole==n.PersonType.ADMIN)}}function m$(t,e){if(t&1){let n=jt();v(0,"i",24),se("click",function(){It(n);let i=pe(3);return Et(i.setStatus(i.task.id))}),g()}}function g$(t,e){if(t&1&&(v(0,"span"),Q(1,m$,1,0,"i",23),y(2,"Pendiente"),g()),t&2){let n=pe(2);w(),b("ngIf",n.personRole==n.PersonType.ADMIN)}}function v$(t,e){if(t&1){let n=jt();v(0,"p",12),y(1,"Acciones:"),v(2,"i",25),se("click",function(){It(n);let i=pe(2);return Et(i.onEditTask(i.task.id))}),g(),v(3,"i",26),se("click",function(){It(n);let i=pe(2);return Et(i.deleteTask(i.task.id.toString()))}),g()()}}function y$(t,e){if(t&1&&(v(0,"div",1)(1,"div",2)(2,"h5",3),y(3),Q(4,J2,2,0,"span",4)(5,X2,2,0,"span",4)(6,e$,2,0,"span",4),g(),v(7,"div",5)(8,"div",6)(9,"h2",7)(10,"button",8),y(11),g()(),v(12,"div",9)(13,"div",10)(14,"p",11),y(15,"Prioridad: "),Q(16,r$,3,1,"span",4)(17,a$,3,1,"span",4)(18,u$,3,1,"span",4),g(),v(19,"p",11),y(20," Estado: "),Q(21,f$,3,1,"span",4)(22,p$,3,1,"span",4)(23,g$,3,1,"span",4),g(),v(24,"p",12),y(25),g(),Q(26,v$,4,0,"p",13),g()()()()()()),t&2){let n=pe();b("ngClass",xw(22,Q2,n.task.priority=="H",n.task.priority=="L",n.task.priority=="M")),w(2),b("ngSwitch",n.task.status),w(),Ut(" ",n.task.name," "),w(),b("ngSwitchCase","C"),w(),b("ngSwitchCase","IP"),w(),b("ngSwitchCase","P"),w(),b("id","accordionExample"+n.task.id),w(3),Wr("data-bs-target","#collapseOne"+n.task.id)("aria-controls","collapseOne"+n.task.id),w(),Ut(" Descripci\xF3n: ",n.task.description," "),w(),b("id","collapseOne"+n.task.id),Wr("data-bs-parent","#accordionExample"+n.task.id),w(2),b("ngSwitch",n.task.priority),w(2),b("ngSwitchCase","H"),w(),b("ngSwitchCase","M"),w(),b("ngSwitchCase","L"),w(),b("ngSwitch",n.task.status),w(2),b("ngSwitchCase","C"),w(),b("ngSwitchCase","IP"),w(),b("ngSwitchCase","P"),w(2),Ut("Fecha de expiraci\xF3n: ",n.task.expirationDate,""),w(),b("ngIf",n.personRole==n.PersonType.ADMIN)}}var Gd=class t{constructor(e,n,r,i){this.taskService=e;this.router=n;this.authService=r;this.personService=i}task=new zd("1","Tarea 1","Descripci\xF3n Tarea 1","L","P",new Date("11/1/2024"),new Date("11/18/2024"),!1);personRole=null;ngOnInit(){this.authService.getUserAuthenticated().subscribe(e=>{e&&this.personService.getPersonByUID(e.uid).subscribe(n=>{n&&(this.personRole=n.role)})})}setStatus(e){this.taskService.setStatus(e)}deleteTask(e){this.taskService.removeTask(e.toString()).then(()=>console.log(`La tarea eliminada tiene el id: ${e}`)).catch(n=>{console.log("Error: ",n)})}lowerPriority(e){this.taskService.lowerPriority(e)}raisePriority(e){this.taskService.raisePriority(e)}onEditTask(e){this.router.navigate([`/formTaskEdit/${e}`])}PersonType=Ir;static \u0275fac=function(n){return new(n||t)(C(Dr),C(Ve),C(He),C(rt))};static \u0275cmp=X({type:t,selectors:[["app-resume"]],inputs:{task:"task"},standalone:!0,features:[ee],decls:1,vars:1,consts:[["class","card mb-3",3,"ngClass",4,"ngIf"],[1,"card","mb-3",3,"ngClass"],[1,"card-body"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"accordion",3,"id"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],[1,"card-text",3,"ngSwitch"],[1,"card-text"],["class","card-text",4,"ngIf"],[4,"ngIf"],["class","bi bi-arrow-down-circle-fill",3,"click",4,"ngIf"],[1,"bi","bi-arrow-down-circle-fill",3,"click"],["class","bi bi-arrow-up-circle-fill",3,"click",4,"ngIf"],[1,"bi","bi-arrow-up-circle-fill",3,"click"],["class","bi bi-arrow-return-right",3,"click",4,"ngIf"],[1,"bi","bi-arrow-return-right",3,"click"],["class","bi bi-check-lg",3,"click",4,"ngIf"],[1,"bi","bi-check-lg",3,"click"],["class","bi bi-play-fill",3,"click",4,"ngIf"],[1,"bi","bi-play-fill",3,"click"],[1,"bi","bi-pencil-square",3,"click"],[1,"bi","bi-trash",3,"click"]],template:function(n,r){n&1&&Q(0,y$,27,26,"div",0),n&2&&b("ngIf",!r.task.isDelete)},dependencies:[Te,nr,on,xp,eC]})};function _$(t,e){if(t&1&&(zr(0,4),J(1,"app-resume",5),Gr()),t&2){let n=e.$implicit;w(),b("task",n)}}var qd=class t{constructor(e){this.taskService=e}tasklist=[];ngOnInit(){this.taskService.getAllTasks().subscribe(e=>{this.tasklist=e})}static \u0275fac=function(n){return new(n||t)(C(Dr))};static \u0275cmp=X({type:t,selectors:[["app-tasklist"]],standalone:!0,features:[ee],decls:4,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],["class","ng-container",4,"ngFor","ngForOf"],[1,"ng-container"],[3,"task"]],template:function(n,r){n&1&&(v(0,"div",0)(1,"div",1)(2,"div",2),Q(3,_$,2,1,"ng-container",3),g()()()),n&2&&(w(3),b("ngForOf",r.tasklist))},dependencies:[Te,Xw,Gd]})};var Yd=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=X({type:t,selectors:[["app-tasks"]],standalone:!0,features:[ee],decls:1,vars:0,template:function(n,r){n&1&&J(0,"app-tasklist")},dependencies:[Te,qd]})};function SS(){return t=>{let e=t.value,n=new Date;return new Date(e)>=n?null:{invalidDate:!0}}}function AS(){return t=>{let e=t.value;return["L","M","H"].includes(e)?null:{invalidValuePriority:!0}}}var Kd=(t,e)=>({"is-invalid":t,"is-valid":e});function I$(t,e){t&1&&(v(0,"small",18),y(1," El campo nombre es requerido "),g())}function E$(t,e){t&1&&(v(0,"small",18),y(1,"El campo tiene que tener menos de 50 caracteres"),g())}function w$(t,e){t&1&&(v(0,"small",18),y(1," El campo descripcion es requerido "),g())}function C$(t,e){t&1&&(v(0,"small",18),y(1," El campo prioridad es requerido "),g())}function D$(t,e){t&1&&(v(0,"small",18),y(1," El valor tiene que ser 'H' 'M' O 'L' "),g())}function b$(t,e){t&1&&(v(0,"small",18),y(1," El campo fecha de expiraci\xF3n es requerido "),g())}function T$(t,e){t&1&&(v(0,"small",18),y(1," El campo fecha de expiraci\xF3n tiene que ser mayor al d\xEDa de hoy "),g())}var Zd=class t{constructor(e,n,r,i){this.taskService=e;this.router=n;this.route=r;this.formTaskEdit=i.group({name:["",[_e.required,_e.maxLength(50)]],description:["",[_e.required,_e.maxLength(255)]],priority:["",[_e.required,AS()]],expirationDate:["",[_e.required,SS()]]})}taskToEdit=null;formTaskEdit;ngOnInit(){this.route.paramMap.subscribe(e=>{let n=e.get("id");this.taskService.getTaskById(n).then(r=>{if(r.exists()&&(this.taskToEdit=r.val(),this.taskToEdit)){let i=this.taskToEdit.expirationDate?new Date(this.taskToEdit.expirationDate).toISOString().slice(0,16):null;console.log(this.taskToEdit),this.formTaskEdit.patchValue({name:this.taskToEdit.name,description:this.taskToEdit.description,priority:this.taskToEdit.priority,expirationDate:i})}}).catch(r=>{console.log(r)})})}onSubmit(){if(this.formTaskEdit.valid){let e=this.formTaskEdit.value;this.taskToEdit&&(e.id=this.taskToEdit.id,e.status=this.taskToEdit.status),this.taskService.saveTask(e).then(()=>{this.router.navigate(["/tasks"])}).catch(n=>{console.log(n)}),this.formTaskEdit.reset()}else console.log("El formulario tiene errores:",this.formTaskEdit.errors)}static \u0275fac=function(n){return new(n||t)(C(Dr),C(Ve),C(Tn),C(Jo))};static \u0275cmp=X({type:t,selectors:[["app-taskform"]],standalone:!0,features:[ee],decls:41,vars:24,consts:[[1,"body"],[1,"container"],[1,"row"],[1,"col-md-12"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","exampleFormControlInput1"],["type","text","formControlName","name","id","exampleFormControlInput1",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["for","exampleFormControlTextarea1"],["formControlName","description","id","exampleFormControlTextarea1","rows","10",1,"form-control",3,"ngClass"],["for","exampleFormControlSelect1"],["formControlName","priority","id","exampleFormControlSelect1",1,"form-control",3,"ngClass"],["value","H"],["value","M"],["value","L"],["type","datetime-local","formControlName","expirationDate","id","exampleFromcontrolInput",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"]],template:function(n,r){if(n&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),se("ngSubmit",function(){return r.onSubmit()}),v(5,"div",5)(6,"label",6),y(7,"Nombre"),g(),J(8,"input",7),v(9,"div"),Q(10,I$,2,0,"small",8)(11,E$,2,0,"small",8),g()(),v(12,"div",5)(13,"label",9),y(14,"Descripcion"),g(),J(15,"textarea",10),Q(16,w$,2,0,"small",8),g(),v(17,"div",5)(18,"label",11),y(19,"Prioridad"),g(),v(20,"select",12)(21,"option",13),y(22,"Alta"),g(),v(23,"option",14),y(24,"Media"),g(),v(25,"option",15),y(26,"Baja"),g()(),v(27,"div"),Q(28,C$,2,0,"small",8)(29,D$,2,0,"small",8),g()(),v(30,"div",5)(31,"label",11),y(32,"Fecha expiracion"),g(),J(33,"input",16),v(34,"div"),Q(35,b$,2,0,"small",8)(36,T$,2,0,"small",8),g()(),J(37,"br")(38,"br"),v(39,"button",17),y(40,"Guardar Cambios"),g()()()()()()),n&2){let i,o,s,a,c,l,u,d,f,h,p;w(4),b("formGroup",r.formTaskEdit),w(4),b("ngClass",Bt(12,Kd,((i=r.formTaskEdit.get("name"))==null?null:i.invalid)&&((i=r.formTaskEdit.get("name"))==null?null:i.touched),(i=r.formTaskEdit.get("name"))==null?null:i.valid)),w(2),b("ngIf",((o=r.formTaskEdit.get("name"))==null||o.errors==null?null:o.errors.required)&&((o=r.formTaskEdit.get("name"))==null?null:o.touched)),w(),b("ngIf",((s=r.formTaskEdit.get("name"))==null||s.errors==null?null:s.errors.maxlength)&&((s=r.formTaskEdit.get("name"))==null?null:s.touched)),w(4),b("ngClass",Bt(15,Kd,((a=r.formTaskEdit.get("description"))==null?null:a.invalid)&&((a=r.formTaskEdit.get("description"))==null?null:a.touched),(a=r.formTaskEdit.get("description"))==null?null:a.valid)),w(),b("ngIf",((c=r.formTaskEdit.get("description"))==null||c.errors==null?null:c.errors.required)&&((c=r.formTaskEdit.get("description"))==null?null:c.touched)),w(4),b("ngClass",Bt(18,Kd,((l=r.formTaskEdit.get("priority"))==null?null:l.invalid)&&((l=r.formTaskEdit.get("priority"))==null?null:l.touched),(l=r.formTaskEdit.get("priority"))==null?null:l.valid)),w(8),b("ngIf",((u=r.formTaskEdit.get("priority"))==null||u.errors==null?null:u.errors.required)&&((u=r.formTaskEdit.get("priority"))==null?null:u.touched)),w(),b("ngIf",((d=r.formTaskEdit.get("priority"))==null||d.errors==null?null:d.errors.invalidValuePriority)&&((d=r.formTaskEdit.get("priority"))==null?null:d.touched)),w(4),b("ngClass",Bt(21,Kd,((f=r.formTaskEdit.get("expirationDate"))==null?null:f.invalid)&&((f=r.formTaskEdit.get("expirationDate"))==null?null:f.touched),(f=r.formTaskEdit.get("expirationDate"))==null?null:f.valid)),w(2),b("ngIf",((h=r.formTaskEdit.get("expirationDate"))==null||h.errors==null?null:h.errors.required)&&((h=r.formTaskEdit.get("expirationDate"))==null?null:h.touched)),w(),b("ngIf",!(!((p=r.formTaskEdit.get("expirationDate"))==null||p.errors==null)&&p.errors.required)&&((p=r.formTaskEdit.get("expirationDate"))==null||p.errors==null?null:p.errors.invalidDate)&&((p=r.formTaskEdit.get("expirationDate"))==null?null:p.touched))}},dependencies:[Xo,Qo,IS,wS,Cr,$d,Ko,Zo,_i,Ii,Te,nr,on],styles:[".body[_ngcontent-%COMP%]{background:linear-gradient(to right,#4facfe,#00f2fe);height:100vh;display:flex;align-items:center;justify-content:center;font-family:Arial,sans-serif}.container[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:10px;box-shadow:0 4px 6px #0000001a}h1[_ngcontent-%COMP%]{font-size:2rem;color:#333;margin-bottom:1rem;text-align:center}.btn-primary[_ngcontent-%COMP%]{width:100%;background-color:#4facfe;border:none;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00c6ff}.form-control[_ngcontent-%COMP%]{border-radius:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600}"]})};var Xa=class t{constructor(e,n,r){this.authService=e;this.personService=n;this.router=r}ngOnInit(){this.authService.getUserAuthenticated().subscribe(e=>{e&&this.personService.getPersonByUID(e.uid).subscribe(n=>{n&&n.role=="USER"&&this.router.navigate(["/"])})})}static \u0275fac=function(n){return new(n||t)(C(He),C(rt),C(Ve))};static \u0275cmp=X({type:t,selectors:[["app-home"]],standalone:!0,features:[ee],decls:1,vars:0,template:function(n,r){n&1&&J(0,"app-taskform")},dependencies:[Te,Zd]})};var Qd=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=X({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[ee],decls:1,vars:0,template:function(n,r){n&1&&J(0,"router-outlet")},dependencies:[Te,Js]})};var Jd=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=X({type:t,selectors:[["app-notfound"]],standalone:!0,features:[ee],decls:9,vars:0,consts:[[1,"d-flex","flex-column","align-items-center","justify-content-center",2,"height","100vh","text-align","center"],[1,"display-1","text-danger"],[1,"text-dark"],[1,"text-muted"],["routerLink","/home",1,"btn","btn-primary","mt-3"]],template:function(n,r){n&1&&(v(0,"div",0)(1,"h1",1),y(2,"404"),g(),v(3,"h2",2),y(4,"P\xE1gina No Encontrada"),g(),v(5,"p",3),y(6,"Lo sentimos, no hemos podido encontrar la p\xE1gina que buscas."),g(),v(7,"a",4),y(8,"Volver al Inicio"),g()())},dependencies:[or]})};var Xd=(t,e)=>{let n=_(He),r=_(Ve),i=t.data.role;return n.getUserDataAuth().pipe(x(({user:o,person:s})=>o?s?s.role!=null&&s.role=="ADMIN"||i=="*"?!0:(r.navigate(["/tasks"]),!1):(r.navigate(["/login"]),!1):(r.navigate(["/login"]),!1)),Xe((o,s)=>(r.navigate(["/login"]),N(!1))))};var MS=[{path:"login",component:Hd},{path:"singin",component:Wd},{path:"home",component:Xa,canActivate:[Xd],data:{role:"ADMIN"}},{path:"tasks",component:Yd,canActivate:[Xd],data:{role:"*"}},{path:"formTaskEdit/:id",component:Xa},{path:"dashboard",component:Qd,children:[{path:"stats",component:mu},{path:"profile",component:Md}],canActivate:[Xd],data:{role:"*"}},{path:"notfound",component:Jd},{path:"",redirectTo:"/tasks",pathMatch:"full"},{path:"**",redirectTo:"/notfound",pathMatch:"full"}];var NS={providers:[jw({eventCoalescing:!0}),nD(MS),IC(),PD(()=>OD({projectId:"angular-tutorial-f9f07",appId:"1:239544362482:web:c132097512464cb5f0776b",storageBucket:"angular-tutorial-f9f07.firebasestorage.app",apiKey:"AIzaSyDBYaql5wnd0YAQyj1xATzcVu_PH7-F11s",authDomain:"angular-tutorial-f9f07.firebaseapp.com",messagingSenderId:"239544362482",databaseURL:"https://angular-tutorial-f9f07-default-rtdb.europe-west1.firebasedatabase.app"})),Mb(()=>Rb()),FT(()=>UT())]};function S$(t,e){t&1&&(v(0,"li",9)(1,"a",10),y(2,"Inicio"),g()())}function A$(t,e){t&1&&(v(0,"li",9)(1,"a",11),y(2,"Tareas"),g()())}function M$(t,e){t&1&&(v(0,"ul",15)(1,"li")(2,"a",16),y(3,"Stats"),g()(),v(4,"li")(5,"a",17),y(6,"Profile"),g()()())}function N$(t,e){if(t&1&&(v(0,"li",12)(1,"a",13),y(2," dashboard "),g(),Q(3,M$,7,0,"ul",14),g()),t&2){let n=pe();w(3),b("ngIf",n.isAuthenticated)}}function R$(t,e){t&1&&(v(0,"li",9)(1,"a",18),y(2,"Login"),g()())}function x$(t,e){t&1&&(v(0,"li",9)(1,"a",19),y(2,"Register"),g()())}function P$(t,e){if(t&1){let n=jt();v(0,"li",9)(1,"button",20),se("click",function(){It(n);let i=pe();return Et(i.logout())}),y(2,"Singout"),g()()}}var ef=class t{constructor(e,n,r){this.router=e;this.authService=n;this.personService=r}isAuthenticated=!1;rolePerson=null;ngOnInit(){this.authService.getUserDataAuth().subscribe(({user:e,person:n})=>{e?(this.isAuthenticated=!0,n&&n.role&&(this.rolePerson=n.role,this.isAuthenticated=!0)):this.isAuthenticated=!1})}logout(){this.authService.logout().then(e=>{console.log(e),this.router.navigate(["/login"]).catch(n=>console.log(n))}).catch(e=>console.log(e))}PersonType=Ir;static \u0275fac=function(n){return new(n||t)(C(Ve),C(He),C(rt))};static \u0275cmp=X({type:t,selectors:[["app-nav-bar"]],standalone:!0,features:[ee],decls:14,vars:6,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary"],[1,"container-fluid"],["routerLink","/tasks",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["class","nav-item",4,"ngIf"],["class","nav-item dropdown",4,"ngIf"],[1,"nav-item"],["aria-current","page","routerLink","/home",1,"nav-link","active"],["routerLink","/tasks",1,"nav-link"],[1,"nav-item","dropdown"],["routerLink","/dashboard","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["class","dropdown-menu",4,"ngIf"],[1,"dropdown-menu"],["routerLink","/dashboard/stats",1,"dropdown-item"],["routerLink","/dashboard/profile",1,"dropdown-item"],["routerLink","/login",1,"nav-link"],["routerLink","/singin",1,"nav-link"],[1,"btn","btn-primary",3,"click"]],template:function(n,r){n&1&&(v(0,"nav",0)(1,"div",1)(2,"a",2),y(3,"TaskManager"),g(),v(4,"button",3),J(5,"span",4),g(),v(6,"div",5)(7,"ul",6),Q(8,S$,3,0,"li",7)(9,A$,3,0,"li",7)(10,N$,4,1,"li",8)(11,R$,3,0,"li",7)(12,x$,3,0,"li",7)(13,P$,3,0,"li",7),g()()()()),n&2&&(w(8),b("ngIf",r.isAuthenticated&&r.rolePerson==r.PersonType.ADMIN),w(),b("ngIf",r.isAuthenticated),w(),b("ngIf",r.isAuthenticated),w(),b("ngIf",!r.isAuthenticated),w(),b("ngIf",!r.isAuthenticated),w(),b("ngIf",r.isAuthenticated))},dependencies:[or,Te,on]})};var tf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=X({type:t,selectors:[["app-footer"]],standalone:!0,features:[ee],decls:19,vars:0,consts:[[1,"py-3","my-4"],[1,"nav","justify-content-center","border-bottom","pb-3","mb-3"],[1,"nav-item"],["href","#",1,"nav-link","px-2","text-body-secondary"],[1,"text-center","text-body-secondary"]],template:function(n,r){n&1&&(v(0,"footer",0)(1,"ul",1)(2,"li",2)(3,"a",3),y(4,"Home"),g()(),v(5,"li",2)(6,"a",3),y(7,"Features"),g()(),v(8,"li",2)(9,"a",3),y(10,"Pricing"),g()(),v(11,"li",2)(12,"a",3),y(13,"FAQs"),g()(),v(14,"li",2)(15,"a",3),y(16,"About"),g()()(),v(17,"p",4),y(18,"\xA9 2024 Company, Inc"),g()())}})};var nf=class t{title="angular-tutorial-app";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=X({type:t,selectors:[["app-root"]],standalone:!0,features:[ee],decls:3,vars:0,template:function(n,r){n&1&&J(0,"app-nav-bar")(1,"router-outlet")(2,"app-footer")},dependencies:[Js,DS,ef,tf]})};yC(nf,NS).catch(t=>console.error(t));
